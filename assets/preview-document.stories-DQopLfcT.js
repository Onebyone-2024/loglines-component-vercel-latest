import{j as jsxRuntimeExports}from"./jsx-runtime-u17CrQMm.js";import{b as getAugmentedNamespace,c as requireReact}from"./iframe-vU-aGGkt.js";import{r as requireReactDom}from"./index-CRw7lphU.js";import"./preload-helper-PPVm8Dsz.js";var lib$h={exports:{}},core_min={};function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(d,i){module.exports=d.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,((r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.VerbosityLevel=d.Util=d.UnknownErrorException=d.UnexpectedResponseException=d.TextRenderingMode=d.RenderingIntentFlag=d.PromiseCapability=d.PermissionFlag=d.PasswordResponses=d.PasswordException=d.PageActionEventType=d.OPS=d.MissingPDFException=d.MAX_IMAGE_SIZE_TO_CACHE=d.LINE_FACTOR=d.LINE_DESCENT_FACTOR=d.InvalidPDFException=d.ImageKind=d.IDENTITY_MATRIX=d.FormatError=d.FeatureTest=d.FONT_IDENTITY_MATRIX=d.DocumentActionEventType=d.CMapCompressionType=d.BaseException=d.BASELINE_FACTOR=d.AnnotationType=d.AnnotationReplyType=d.AnnotationPrefix=d.AnnotationMode=d.AnnotationFlag=d.AnnotationFieldFlag=d.AnnotationEditorType=d.AnnotationEditorPrefix=d.AnnotationEditorParamsType=d.AnnotationBorderStyleType=d.AnnotationActionEventType=d.AbortException=void 0,d.assert=p,d.bytesToString=Z,d.createValidAbsoluteUrl=M,d.getModificationDate=Je,d.getUuid=jt,d.getVerbosityLevel=G,d.info=U,d.isArrayBuffer=Ue,d.isArrayEqual=tt,d.isNodeJS=void 0,d.normalizeUnicode=st,d.objectFromMap=de,d.objectSize=_e,d.setVerbosityLevel=X,d.shadow=F,d.string32=ce,d.stringToBytes=$,d.stringToPDFString=be,d.stringToUTF8String=ke,d.unreachable=_,d.utf8StringToString=Le,d.warn=k;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");d.isNodeJS=i;const m=[1,0,0,1,0,0];d.IDENTITY_MATRIX=m;const y=[.001,0,0,.001,0,0];d.FONT_IDENTITY_MATRIX=y;const o=1e7;d.MAX_IMAGE_SIZE_TO_CACHE=o;const T=1.35;d.LINE_FACTOR=T;const z=.35;d.LINE_DESCENT_FACTOR=z;const K=z/T;d.BASELINE_FACTOR=K;const h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};d.RenderingIntentFlag=h;const n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};d.AnnotationMode=n;const a="pdfjs_internal_editor_";d.AnnotationEditorPrefix=a;const u={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};d.AnnotationEditorType=u;const l={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};d.AnnotationEditorParamsType=l;const e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};d.PermissionFlag=e;const t={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};d.TextRenderingMode=t;const c={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};d.ImageKind=c;const s={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};d.AnnotationType=s;const f={GROUP:"Group",REPLY:"R"};d.AnnotationReplyType=f;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};d.AnnotationFlag=x;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};d.AnnotationFieldFlag=E;const g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};d.AnnotationBorderStyleType=g;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};d.AnnotationActionEventType=A;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};d.DocumentActionEventType=D;const P={O:"PageOpen",C:"PageClose"};d.PageActionEventType=P;const R={ERRORS:0,WARNINGS:1,INFOS:5};d.VerbosityLevel=R;const j={NONE:0,BINARY:1};d.CMapCompressionType=j;const w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};d.OPS=w;const N={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};d.PasswordResponses=N;let H=R.WARNINGS;function X(ye){Number.isInteger(ye)&&(H=ye)}function G(){return H}function U(ye){H>=R.INFOS&&console.log(`Info: ${ye}`)}function k(ye){H>=R.WARNINGS&&console.log(`Warning: ${ye}`)}function _(ye){throw new Error(ye)}function p(ye,ue){ye||_(ue)}function b(ye){switch(ye?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function M(ye,ue=null,se=null){if(!ye)return null;try{if(se&&typeof ye=="string"&&(se.addDefaultProtocol&&ye.startsWith("www.")&&ye.match(/\./g)?.length>=2&&(ye=`http://${ye}`),se.tryConvertEncoding))try{ye=ke(ye)}catch{}const Pe=ue?new URL(ye,ue):new URL(ye);if(b(Pe))return Pe}catch{}return null}function F(ye,ue,se,Pe=!1){return Object.defineProperty(ye,ue,{value:se,enumerable:!Pe,configurable:!0,writable:!1}),se}const I=(function(){function ue(se,Pe){this.constructor===ue&&_("Cannot initialize BaseException."),this.message=se,this.name=Pe}return ue.prototype=new Error,ue.constructor=ue,ue})();d.BaseException=I;class q extends I{constructor(ue,se){super(ue,"PasswordException"),this.code=se}}d.PasswordException=q;class B extends I{constructor(ue,se){super(ue,"UnknownErrorException"),this.details=se}}d.UnknownErrorException=B;class v extends I{constructor(ue){super(ue,"InvalidPDFException")}}d.InvalidPDFException=v;class C extends I{constructor(ue){super(ue,"MissingPDFException")}}d.MissingPDFException=C;class L extends I{constructor(ue,se){super(ue,"UnexpectedResponseException"),this.status=se}}d.UnexpectedResponseException=L;class V extends I{constructor(ue){super(ue,"FormatError")}}d.FormatError=V;class W extends I{constructor(ue){super(ue,"AbortException")}}d.AbortException=W;function Z(ye){(typeof ye!="object"||ye?.length===void 0)&&_("Invalid argument for bytesToString");const ue=ye.length,se=8192;if(ue<se)return String.fromCharCode.apply(null,ye);const Pe=[];for(let it=0;it<ue;it+=se){const He=Math.min(it+se,ue),Qe=ye.subarray(it,He);Pe.push(String.fromCharCode.apply(null,Qe))}return Pe.join("")}function $(ye){typeof ye!="string"&&_("Invalid argument for stringToBytes");const ue=ye.length,se=new Uint8Array(ue);for(let Pe=0;Pe<ue;++Pe)se[Pe]=ye.charCodeAt(Pe)&255;return se}function ce(ye){return String.fromCharCode(ye>>24&255,ye>>16&255,ye>>8&255,ye&255)}function _e(ye){return Object.keys(ye).length}function de(ye){const ue=Object.create(null);for(const[se,Pe]of ye)ue[se]=Pe;return ue}function he(){const ye=new Uint8Array(4);return ye[0]=1,new Uint32Array(ye.buffer,0,1)[0]===1}function fe(){try{return new Function(""),!0}catch{return!1}}class re{static get isLittleEndian(){return F(this,"isLittleEndian",he())}static get isEvalSupported(){return F(this,"isEvalSupported",fe())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?F(this,"platform",{isWin:!1,isMac:!1}):F(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return F(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}d.FeatureTest=re;const le=[...Array(256).keys()].map(ye=>ye.toString(16).padStart(2,"0"));class Se{static makeHexColor(ue,se,Pe){return`#${le[ue]}${le[se]}${le[Pe]}`}static scaleMinMax(ue,se){let Pe;ue[0]?(ue[0]<0&&(Pe=se[0],se[0]=se[1],se[1]=Pe),se[0]*=ue[0],se[1]*=ue[0],ue[3]<0&&(Pe=se[2],se[2]=se[3],se[3]=Pe),se[2]*=ue[3],se[3]*=ue[3]):(Pe=se[0],se[0]=se[2],se[2]=Pe,Pe=se[1],se[1]=se[3],se[3]=Pe,ue[1]<0&&(Pe=se[2],se[2]=se[3],se[3]=Pe),se[2]*=ue[1],se[3]*=ue[1],ue[2]<0&&(Pe=se[0],se[0]=se[1],se[1]=Pe),se[0]*=ue[2],se[1]*=ue[2]),se[0]+=ue[4],se[1]+=ue[4],se[2]+=ue[5],se[3]+=ue[5]}static transform(ue,se){return[ue[0]*se[0]+ue[2]*se[1],ue[1]*se[0]+ue[3]*se[1],ue[0]*se[2]+ue[2]*se[3],ue[1]*se[2]+ue[3]*se[3],ue[0]*se[4]+ue[2]*se[5]+ue[4],ue[1]*se[4]+ue[3]*se[5]+ue[5]]}static applyTransform(ue,se){const Pe=ue[0]*se[0]+ue[1]*se[2]+se[4],it=ue[0]*se[1]+ue[1]*se[3]+se[5];return[Pe,it]}static applyInverseTransform(ue,se){const Pe=se[0]*se[3]-se[1]*se[2],it=(ue[0]*se[3]-ue[1]*se[2]+se[2]*se[5]-se[4]*se[3])/Pe,He=(-ue[0]*se[1]+ue[1]*se[0]+se[4]*se[1]-se[5]*se[0])/Pe;return[it,He]}static getAxialAlignedBoundingBox(ue,se){const Pe=this.applyTransform(ue,se),it=this.applyTransform(ue.slice(2,4),se),He=this.applyTransform([ue[0],ue[3]],se),Qe=this.applyTransform([ue[2],ue[1]],se);return[Math.min(Pe[0],it[0],He[0],Qe[0]),Math.min(Pe[1],it[1],He[1],Qe[1]),Math.max(Pe[0],it[0],He[0],Qe[0]),Math.max(Pe[1],it[1],He[1],Qe[1])]}static inverseTransform(ue){const se=ue[0]*ue[3]-ue[1]*ue[2];return[ue[3]/se,-ue[1]/se,-ue[2]/se,ue[0]/se,(ue[2]*ue[5]-ue[4]*ue[3])/se,(ue[4]*ue[1]-ue[5]*ue[0])/se]}static singularValueDecompose2dScale(ue){const se=[ue[0],ue[2],ue[1],ue[3]],Pe=ue[0]*se[0]+ue[1]*se[2],it=ue[0]*se[1]+ue[1]*se[3],He=ue[2]*se[0]+ue[3]*se[2],Qe=ue[2]*se[1]+ue[3]*se[3],zt=(Pe+Qe)/2,Nt=Math.sqrt((Pe+Qe)**2-4*(Pe*Qe-He*it))/2,Ht=zt+Nt||1,Tt=zt-Nt||1;return[Math.sqrt(Ht),Math.sqrt(Tt)]}static normalizeRect(ue){const se=ue.slice(0);return ue[0]>ue[2]&&(se[0]=ue[2],se[2]=ue[0]),ue[1]>ue[3]&&(se[1]=ue[3],se[3]=ue[1]),se}static intersect(ue,se){const Pe=Math.max(Math.min(ue[0],ue[2]),Math.min(se[0],se[2])),it=Math.min(Math.max(ue[0],ue[2]),Math.max(se[0],se[2]));if(Pe>it)return null;const He=Math.max(Math.min(ue[1],ue[3]),Math.min(se[1],se[3])),Qe=Math.min(Math.max(ue[1],ue[3]),Math.max(se[1],se[3]));return He>Qe?null:[Pe,He,it,Qe]}static bezierBoundingBox(ue,se,Pe,it,He,Qe,zt,Nt){const Ht=[],Tt=[[],[]];let Vt,Bt,Gt,St,Kt,Yt,an,on;for(let fn=0;fn<2;++fn){if(fn===0?(Bt=6*ue-12*Pe+6*He,Vt=-3*ue+9*Pe-9*He+3*zt,Gt=3*Pe-3*ue):(Bt=6*se-12*it+6*Qe,Vt=-3*se+9*it-9*Qe+3*Nt,Gt=3*it-3*se),Math.abs(Vt)<1e-12){if(Math.abs(Bt)<1e-12)continue;St=-Gt/Bt,0<St&&St<1&&Ht.push(St);continue}an=Bt*Bt-4*Gt*Vt,on=Math.sqrt(an),!(an<0)&&(Kt=(-Bt+on)/(2*Vt),0<Kt&&Kt<1&&Ht.push(Kt),Yt=(-Bt-on)/(2*Vt),0<Yt&&Yt<1&&Ht.push(Yt))}let Jt=Ht.length,Dt;const sn=Jt;for(;Jt--;)St=Ht[Jt],Dt=1-St,Tt[0][Jt]=Dt*Dt*Dt*ue+3*Dt*Dt*St*Pe+3*Dt*St*St*He+St*St*St*zt,Tt[1][Jt]=Dt*Dt*Dt*se+3*Dt*Dt*St*it+3*Dt*St*St*Qe+St*St*St*Nt;return Tt[0][sn]=ue,Tt[1][sn]=se,Tt[0][sn+1]=zt,Tt[1][sn+1]=Nt,Tt[0].length=Tt[1].length=sn+2,[Math.min(...Tt[0]),Math.min(...Tt[1]),Math.max(...Tt[0]),Math.max(...Tt[1])]}}d.Util=Se;const ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function be(ye){if(ye[0]>="ï"){let se;if(ye[0]==="þ"&&ye[1]==="ÿ"?se="utf-16be":ye[0]==="ÿ"&&ye[1]==="þ"?se="utf-16le":ye[0]==="ï"&&ye[1]==="»"&&ye[2]==="¿"&&(se="utf-8"),se)try{const Pe=new TextDecoder(se,{fatal:!0}),it=$(ye);return Pe.decode(it)}catch(Pe){k(`stringToPDFString: "${Pe}".`)}}const ue=[];for(let se=0,Pe=ye.length;se<Pe;se++){const it=ve[ye.charCodeAt(se)];ue.push(it?String.fromCharCode(it):ye.charAt(se))}return ue.join("")}function ke(ye){return decodeURIComponent(escape(ye))}function Le(ye){return unescape(encodeURIComponent(ye))}function Ue(ye){return typeof ye=="object"&&ye?.byteLength!==void 0}function tt(ye,ue){if(ye.length!==ue.length)return!1;for(let se=0,Pe=ye.length;se<Pe;se++)if(ye[se]!==ue[se])return!1;return!0}function Je(ye=new Date){return[ye.getUTCFullYear().toString(),(ye.getUTCMonth()+1).toString().padStart(2,"0"),ye.getUTCDate().toString().padStart(2,"0"),ye.getUTCHours().toString().padStart(2,"0"),ye.getUTCMinutes().toString().padStart(2,"0"),ye.getUTCSeconds().toString().padStart(2,"0")].join("")}class gt{#e=!1;constructor(){this.promise=new Promise((ue,se)=>{this.resolve=Pe=>{this.#e=!0,ue(Pe)},this.reject=Pe=>{this.#e=!0,se(Pe)}})}get settled(){return this.#e}}d.PromiseCapability=gt;let rt=null,ft=null;function st(ye){return rt||(rt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ft=new Map([["ﬅ","ſt"]])),ye.replaceAll(rt,(ue,se,Pe)=>se?se.normalize("NFKC"):ft.get(Pe))}function jt(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const ye=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(ye);else for(let ue=0;ue<32;ue++)ye[ue]=Math.floor(Math.random()*255);return Z(ye)}const _t="pdfjs_internal_id_";d.AnnotationPrefix=_t}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const d=new PDFDocumentLoadingTask,{docId:i}=d,m=r.url?getUrlProp(r.url):null,y=r.data?getDataProp(r.data):null,o=r.httpHeaders||null,T=r.withCredentials===!0,z=r.password??null,K=r.range instanceof PDFDataRangeTransport?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let n=r.worker instanceof PDFWorker?r.worker:null;const a=r.verbosity,u=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,l=typeof r.cMapUrl=="string"?r.cMapUrl:null,e=r.cMapPacked!==!1,t=r.CMapReaderFactory||DefaultCMapReaderFactory,c=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,s=r.StandardFontDataFactory||DefaultStandardFontDataFactory,f=r.stopAtErrors!==!0,x=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,E=r.isEvalSupported!==!1,g=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_util.isNodeJS,A=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,D=typeof r.disableFontFace=="boolean"?r.disableFontFace:_util.isNodeJS,P=r.fontExtraProperties===!0,R=r.enableXfa===!0,j=r.ownerDocument||globalThis.document,w=r.disableRange===!0,N=r.disableStream===!0,H=r.disableAutoFetch===!0,X=r.pdfBug===!0,G=K?K.length:r.length??NaN,U=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_util.isNodeJS&&!D,k=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:t===_display_utils.DOMCMapReaderFactory&&s===_display_utils.DOMStandardFontDataFactory&&l&&c&&(0,_display_utils.isValidFetchUrl)(l,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(c,document.baseURI),_=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),p=r.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:j}),b=null;(0,_util.setVerbosityLevel)(a);const M={canvasFactory:_,filterFactory:p};if(k||(M.cMapReaderFactory=new t({baseUrl:l,isCompressed:e}),M.standardFontDataFactory=new s({baseUrl:c})),!n){const q={verbosity:a,port:_worker_options.GlobalWorkerOptions.workerPort};n=q.port?PDFWorker.fromPort(q):new PDFWorker(q),d._worker=n}const F={docId:i,apiVersion:"3.11.174",data:y,password:z,disableAutoFetch:H,rangeChunkSize:h,length:G,docBaseUrl:u,enableXfa:R,evaluatorOptions:{maxImageSize:x,disableFontFace:D,ignoreErrors:f,isEvalSupported:E,isOffscreenCanvasSupported:g,canvasMaxAreaInBytes:A,fontExtraProperties:P,useSystemFonts:U,cMapUrl:k?l:null,standardFontDataUrl:k?c:null}},I={ignoreErrors:f,isEvalSupported:E,disableFontFace:D,fontExtraProperties:P,enableXfa:R,ownerDocument:j,disableAutoFetch:H,pdfBug:X,styleElement:b};return n.promise.then(function(){if(d.destroyed)throw new Error("Loading aborted");const q=_fetchDocument(n,F),B=new Promise(function(v){let C;K?C=new _transport_stream.PDFDataTransportStream({length:G,initialData:K.initialData,progressiveDone:K.progressiveDone,contentDispositionFilename:K.contentDispositionFilename,disableRange:w,disableStream:N},K):y||(C=(V=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(V):(0,_display_utils.isValidFetchUrl)(V.url)?new _displayFetch_stream.PDFFetchStream(V):new _displayNetwork.PDFNetworkStream(V))({url:m,length:G,httpHeaders:o,withCredentials:T,rangeChunkSize:h,disableRange:w,disableStream:N})),v(C)});return Promise.all([q,B]).then(function([v,C]){if(d.destroyed)throw new Error("Loading aborted");const L=new _message_handler.MessageHandler(i,v,n.port),V=new WorkerTransport(L,d,C,I,M);d._transport=V,L.send("Ready",null)})}).catch(d._capability.reject),d}async function _fetchDocument(r,d){if(r.destroyed)throw new Error("Worker was destroyed");const i=await r.messageHandler.sendWithPromise("GetDocRequest",d,d.data?[d.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return i}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_util.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_util.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r?.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(d){throw this._worker?.port&&delete this._worker._pendingDestroy,d}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(d,i,m=!1,y=null){this.length=d,this.initialData=i,this.progressiveDone=m,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(d){this._rangeListeners.push(d)}addProgressListener(d){this._progressListeners.push(d)}addProgressiveReadListener(d){this._progressiveReadListeners.push(d)}addProgressiveDoneListener(d){this._progressiveDoneListeners.push(d)}onDataRange(d,i){for(const m of this._rangeListeners)m(d,i)}onDataProgress(d,i){this._readyCapability.promise.then(()=>{for(const m of this._progressListeners)m(d,i)})}onDataProgressiveRead(d){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(d)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const d of this._progressiveDoneListeners)d()})}transportReady(){this._readyCapability.resolve()}requestDataRange(d,i){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(d,i){this._pdfInfo=d,this._transport=i,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(m=>{if(!m)return m;const y=[];for(const o in m)y.push(...m[o]);return y}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(d){return this._transport.getPage(d)}getPageIndex(d){return this._transport.getPageIndex(d)}getDestinations(){return this._transport.getDestinations()}getDestination(d){return this._transport.getDestination(d)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(d=!1){return this._transport.startCleanup(d||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(d,i,m,y=!1){this._pageIndex=d,this._pageInfo=i,this._transport=m,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=m.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:d,rotation:i=this.rotate,offsetX:m=0,offsetY:y=0,dontFlip:o=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:d,rotation:i,offsetX:m,offsetY:y,dontFlip:o})}getAnnotations({intent:d="display"}={}){const i=this._transport.getRenderingIntent(d);return this._transport.getAnnotations(this._pageIndex,i.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:d,viewport:i,intent:m="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:o=null,background:T=null,optionalContentConfigPromise:z=null,annotationCanvasMap:K=null,pageColors:h=null,printAnnotationStorage:n=null}){this._stats?.time("Overall");const a=this._transport.getRenderingIntent(m,y,n);this.#t=!1,this.#r(),z||(z=this._transport.getOptionalContentConfig());let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u)),u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null);const l=!!(a.renderingIntent&_util.RenderingIntentFlag.PRINT);u.displayReadyCapability||(u.displayReadyCapability=new _util.PromiseCapability,u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a));const e=s=>{u.renderTasks.delete(t),(this._maybeCleanupAfterRender||l)&&(this.#t=!0),this.#n(!l),s?(t.capability.reject(s),this._abortOperatorList({intentState:u,reason:s instanceof Error?s:new Error(s)})):t.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},t=new InternalRenderTask({callback:e,params:{canvasContext:d,viewport:i,transform:o,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:K,operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!l,pdfBug:this._pdfBug,pageColors:h});(u.renderTasks||=new Set).add(t);const c=t.task;return Promise.all([u.displayReadyCapability.promise,z]).then(([s,f])=>{if(this.destroyed){e();return}this._stats?.time("Rendering"),t.initializeGraphics({transparency:s,optionalContentConfig:f}),t.operatorListChanged()}).catch(e),c}getOperatorList({intent:d="display",annotationMode:i=_util.AnnotationMode.ENABLE,printAnnotationStorage:m=null}={}){function y(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(z))}const o=this._transport.getRenderingIntent(d,i,m,!0);let T=this._intentStates.get(o.cacheKey);T||(T=Object.create(null),this._intentStates.set(o.cacheKey,T));let z;return T.opListReadCapability||(z=Object.create(null),z.operatorListChanged=y,T.opListReadCapability=new _util.PromiseCapability,(T.renderTasks||=new Set).add(z),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),T.opListReadCapability.promise}streamTextContent({includeMarkedContent:d=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:d===!0,disableNormalization:i===!0},{highWaterMark:100,size(y){return y.items.length}})}getTextContent(d={}){if(this._transport._htmlForXfa)return this.getXfa().then(m=>_xfa_text.XfaText.textContent(m));const i=this.streamTextContent(d);return new Promise(function(m,y){function o(){T.read().then(function({value:K,done:h}){if(h){m(z);return}Object.assign(z.styles,K.styles),z.items.push(...K.items),o()},y)}const T=i.getReader(),z={items:[],styles:Object.create(null)};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const d=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const m of i.renderTasks)d.push(m.completed),m.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(d)}cleanup(d=!1){this.#t=!0;const i=this.#n(!1);return d&&i&&(this._stats&&=new _display_utils.StatTimer),i}#n(d=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(d)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:i,operatorList:m}of this._intentStates.values())if(i.size>0||!m.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(d,i){const m=this._intentStates.get(i);m&&(this._stats?.timeEnd("Page Request"),m.displayReadyCapability?.resolve(d))}_renderPageChunk(d,i){for(let m=0,y=d.length;m<y;m++)i.operatorList.fnArray.push(d.fnArray[m]),i.operatorList.argsArray.push(d.argsArray[m]);i.operatorList.lastChunk=d.lastChunk,i.operatorList.separateAnnots=d.separateAnnots;for(const m of i.renderTasks)m.operatorListChanged();d.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:d,cacheKey:i,annotationStorageSerializable:m}){const{map:y,transfers:o}=m,z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:d,cacheKey:i,annotationStorage:y},o).getReader(),K=this._intentStates.get(i);K.streamReader=z;const h=()=>{z.read().then(({value:n,done:a})=>{if(a){K.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(n,K),h())},n=>{if(K.streamReader=null,!this._transport.destroyed){if(K.operatorList){K.operatorList.lastChunk=!0;for(const a of K.renderTasks)a.operatorListChanged();this.#n(!0)}if(K.displayReadyCapability)K.displayReadyCapability.reject(n);else if(K.opListReadCapability)K.opListReadCapability.reject(n);else throw n}})};h()}_abortOperatorList({intentState:d,reason:i,force:m=!1}){if(d.streamReader){if(d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null),!m){if(d.renderTasks.size>0)return;if(i instanceof _display_utils.RenderingCancelledException){let y=RENDERING_CANCELLED_TIMEOUT;i.extraDelay>0&&i.extraDelay<1e3&&(y+=i.extraDelay),d.streamReaderCancelTimeout=setTimeout(()=>{d.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:d,reason:i,force:!0})},y);return}}if(d.streamReader.cancel(new _util.AbortException(i.message)).catch(()=>{}),d.streamReader=null,!this._transport.destroyed){for(const[y,o]of this._intentStates)if(o===d){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(d,i){const m={data:structuredClone(d,i?{transfer:i}:null)};this.#t.then(()=>{for(const y of this.#e)y.call(this,m)})}addEventListener(d,i){this.#e.add(i)}removeEventListener(d,i){this.#e.delete(i)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=document?.currentScript?.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,d){let i;try{if(i=new URL(r),!i.origin||i.origin==="null")return!1}catch{return!1}const m=new URL(d,i);return i.origin===m.origin},PDFWorkerUtil.createCDNWrapper=function(r){const d=`importScripts("${r}");`;return URL.createObjectURL(new Blob([d]))}}class PDFWorker{static#workerPorts;constructor({name:r=null,port:d=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(this.name=r,this.destroyed=!1,this.verbosity=i,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,d){if(PDFWorker.#workerPorts?.has(d))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(d,this),this._initializeFromPort(d);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const d=new Worker(r),i=new _message_handler.MessageHandler("main","worker",d),m=()=>{d.removeEventListener("error",y),i.destroy(),d.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||m()};d.addEventListener("error",y),i.on("test",T=>{if(d.removeEventListener("error",y),this.destroyed){m();return}T?(this._messageHandler=i,this._port=d,this._webWorker=d,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),d.terminate())}),i.on("ready",T=>{if(d.removeEventListener("error",y),this.destroyed){m();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const T=new Uint8Array;i.send("test",T,[T.buffer])};o();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const d=new LoopbackPort;this._port=d;const i=`fake${PDFWorkerUtil.fakeWorkerId++}`,m=new _message_handler.MessageHandler(i+"_worker",i,d);r.setup(m,d);const y=new _message_handler.MessageHandler(i,i+"_worker",d);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!r?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const d=this.#workerPorts?.get(r.port);if(d){if(d._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return d}return new PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(d,i,m,y,o){this.messageHandler=d,this.loadingTask=i,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=m,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#s(d,i=null){const m=this.#e.get(d);if(m)return m;const y=this.messageHandler.sendWithPromise(d,i);return this.#e.set(d,y),y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(d,i=_util.AnnotationMode.ENABLE,m=null,y=!1){let o=_util.RenderingIntentFlag.DISPLAY,T=_annotation_storage.SerializableEmpty;switch(d){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${d}`)}switch(i){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=(o&_util.RenderingIntentFlag.PRINT&&m instanceof _annotation_storage.PrintAnnotationStorage?m:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${i}`)}return y&&(o+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:`${o}_${T.hash}`,annotationStorageSerializable:T}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const d=[];for(const m of this.#t.values())d.push(m._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return d.push(i),Promise.all(d).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:d,loadingTask:i}=this;d.on("GetReader",(m,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},y.onPull=()=>{this._fullReader.read().then(function({value:o,done:T}){if(T){y.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{y.error(o)})},y.onCancel=o=>{this._fullReader.cancel(o),y.ready.catch(T=>{if(!this.destroyed)throw T})}}),d.on("ReaderHeadersReady",m=>{const y=new _util.PromiseCapability,o=this._fullReader;return o.headersReady.then(()=>{(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),o.onProgress=T=>{i.onProgress?.({loaded:T.loaded,total:T.total})}),y.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},y.reject),y.promise}),d.on("GetRangeReader",(m,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(m.begin,m.end);if(!o){y.close();return}y.onPull=()=>{o.read().then(function({value:T,done:z}){if(z){y.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{y.error(T)})},y.onCancel=T=>{o.cancel(T),y.ready.catch(z=>{if(!this.destroyed)throw z})}}),d.on("GetDoc",({pdfInfo:m})=>{this._numPages=m.numPages,this._htmlForXfa=m.htmlForXfa,delete m.htmlForXfa,i._capability.resolve(new PDFDocumentProxy(m,this))}),d.on("DocException",function(m){let y;switch(m.name){case"PasswordException":y=new _util.PasswordException(m.message,m.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(m.message);break;case"MissingPDFException":y=new _util.MissingPDFException(m.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(m.message,m.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(m.message,m.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(y)}),d.on("PasswordRequest",m=>{if(this.#r=new _util.PromiseCapability,i.onPassword){const y=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};try{i.onPassword(y,m.code)}catch(o){this.#r.reject(o)}}else this.#r.reject(new _util.PasswordException(m.message,m.code));return this.#r.promise}),d.on("DataLoaded",m=>{i.onProgress?.({loaded:m.length,total:m.length}),this.downloadInfoCapability.resolve(m)}),d.on("StartRenderPage",m=>{if(this.destroyed)return;this.#t.get(m.pageIndex)._startRenderPage(m.transparency,m.cacheKey)}),d.on("commonobj",([m,y,o])=>{if(!this.destroyed&&!this.commonObjs.has(m))switch(y){case"Font":const T=this._params;if("error"in o){const h=o.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(m,h);break}const z=T.pdfBug&&globalThis.FontInspector?.enabled?(h,n)=>globalThis.FontInspector.fontAdded(h,n):null,K=new _font_loader.FontFaceObject(o,{isEvalSupported:T.isEvalSupported,disableFontFace:T.disableFontFace,ignoreErrors:T.ignoreErrors,inspectFont:z});this.fontLoader.bind(K).catch(h=>d.sendWithPromise("FontFallback",{id:m})).finally(()=>{!T.fontExtraProperties&&K.data&&(K.data=null),this.commonObjs.resolve(m,K)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(m,o);break;default:throw new Error(`Got unknown common object type ${y}`)}}),d.on("obj",([m,y,o,T])=>{if(this.destroyed)return;const z=this.#t.get(y);if(!z.objs.has(m))switch(o){case"Image":if(z.objs.resolve(m,T),T){let K;if(T.bitmap){const{width:h,height:n}=T;K=h*n*4}else K=T.data?.length||0;K>_util.MAX_IMAGE_SIZE_TO_CACHE&&(z._maybeCleanupAfterRender=!0)}break;case"Pattern":z.objs.resolve(m,T);break;default:throw new Error(`Got unknown object type ${o}`)}}),d.on("DocProgress",m=>{this.destroyed||i.onProgress?.({loaded:m.loaded,total:m.total})}),d.on("FetchBuiltInCMap",m=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(m):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),d.on("FetchStandardFontData",m=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(m):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:d,transfers:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:d,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(d){if(!Number.isInteger(d)||d<=0||d>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=d-1,m=this.#n.get(i);if(m)return m;const y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");const T=new PDFPageProxy(i,o,this,this._params.pdfBug);return this.#t.set(i,T),T});return this.#n.set(i,y),y}getPageIndex(d){return typeof d!="object"||d===null||!Number.isInteger(d.num)||d.num<0||!Number.isInteger(d.gen)||d.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:d.num,gen:d.gen})}getAnnotations(d,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:d,intent:i})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(d){return typeof d!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:d})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(d){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:d})}getStructTree(d){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:d})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(d=>new _optional_content_config.OptionalContentConfig(d))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const d="GetMetadata",i=this.#e.get(d);if(i)return i;const m=this.messageHandler.sendWithPromise(d,null).then(y=>({info:y[0],metadata:y[1]?new _metadata.Metadata(y[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(d,m),m}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(d=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#t.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),d||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:d,enableXfa:i}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:d,enableXfa:i})}}class PDFObjects{#e=Object.create(null);#t(d){return this.#e[d]||={capability:new _util.PromiseCapability,data:null}}get(d,i=null){if(i){const y=this.#t(d);return y.capability.promise.then(()=>i(y.data)),null}const m=this.#e[d];if(!m?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${d}.`);return m.data}has(d){return this.#e[d]?.capability.settled||!1}resolve(d,i=null){const m=this.#t(d);m.data=i,m.capability.resolve()}clear(){for(const d in this.#e){const{data:i}=this.#e[d];i?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(d){this.#e=d,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(d=0){this.#e.cancel(null,d)}get separateAnnots(){const{separateAnnots:d}=this.#e.operatorList;if(!d)return!1;const{annotationCanvasMap:i}=this.#e;return d.form||d.canvas&&i?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:d,params:i,objs:m,commonObjs:y,annotationCanvasMap:o,operatorList:T,pageIndex:z,canvasFactory:K,filterFactory:h,useRequestAnimationFrame:n=!1,pdfBug:a=!1,pageColors:u=null}){this.callback=d,this.params=i,this.objs=m,this.commonObjs=y,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=z,this.canvasFactory=K,this.filterFactory=h,this._pdfBug=a,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=n===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:d=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:m,viewport:y,transform:o,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(m,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:y,transparency:d,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(d=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(d||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SerializableEmpty=d.PrintAnnotationStorage=d.AnnotationStorage=void 0;var m=i(1),y=i(4),o=i(8);const T=Object.freeze({map:null,hash:"",transfers:void 0});d.SerializableEmpty=T;class z{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(n,a){const u=this.#t.get(n);return u===void 0?a:Object.assign(a,u)}getRawValue(n){return this.#t.get(n)}remove(n){if(this.#t.delete(n),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const a of this.#t.values())if(a instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(n,a){const u=this.#t.get(n);let l=!1;if(u!==void 0)for(const[e,t]of Object.entries(a))u[e]!==t&&(l=!0,u[e]=t);else l=!0,this.#t.set(n,a);l&&this.#n(),a instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(a.constructor._type)}has(n){return this.#t.has(n)}getAll(){return this.#t.size>0?(0,m.objectFromMap)(this.#t):null}setAll(n){for(const[a,u]of Object.entries(n))this.setValue(a,u)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new K(this)}get serializable(){if(this.#t.size===0)return T;const n=new Map,a=new o.MurmurHash3_64,u=[],l=Object.create(null);let e=!1;for(const[t,c]of this.#t){const s=c instanceof y.AnnotationEditor?c.serialize(!1,l):c;s&&(n.set(t,s),a.update(`${t}:${JSON.stringify(s)}`),e||=!!s.bitmap)}if(e)for(const t of n.values())t.bitmap&&u.push(t.bitmap);return n.size>0?{map:n,hash:a.hexdigest(),transfers:u}:T}}d.AnnotationStorage=z;class K extends z{#e;constructor(n){super();const{map:a,hash:u,transfers:l}=n.serializable,e=structuredClone(a,l?{transfer:l}:null);this.#e={map:e,hash:u,transfers:l}}get print(){(0,m.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}d.PrintAnnotationStorage=K}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditor=void 0;var m=i(5),y=i(1),o=i(6);class T{#e="";#t=!1;#n=null;#r=null;#s=null;#o=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=T._zIndex++;static _borderLineWidth=-1;static _colorManager=new m.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(h){this.constructor===T&&(0,y.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=h.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:a,pageHeight:u,pageX:l,pageY:e}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,u],this.pageTranslation=[l,e];const[t,c]=this.parentDimensions;this.x=h.x/t,this.y=h.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,y.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(h){const n=new z({id:h.parent.getNextId(),parent:h.parent,uiManager:h._uiManager});n.annotationElementId=h.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(h,n=null){if(T._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(u=>[u,h.get(u)])),n?.strings)for(const u of n.strings)T._l10nPromise.set(u,h.get(u));if(T._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);T._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(h,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(h){return!1}static paste(h,n){(0,y.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(h){this.#h=h,this.div?.classList.toggle("draggable",h)}center(){const[h,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(h*2),this.y+=this.width*h/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(h*2),this.y-=this.width*h/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(h){!this._focusEventsAllowed||!this.isAttachedToDOM||h.relatedTarget?.closest(`#${this.id}`)||(h.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(h,n,a,u){const[l,e]=this.parentDimensions;[a,u]=this.screenToPageTranslation(a,u),this.x=(h+a)/l,this.y=(n+u)/e,this.fixAndSetPosition()}#v([h,n],a,u){[a,u]=this.screenToPageTranslation(a,u),this.x+=a/h,this.y+=u/n,this.fixAndSetPosition()}translate(h,n){this.#v(this.parentDimensions,h,n)}translateInPage(h,n){this.#v(this.pageDimensions,h,n),this.div.scrollIntoView({block:"nearest"})}drag(h,n){const[a,u]=this.parentDimensions;if(this.x+=h/a,this.y+=n/u,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:s,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,s,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:e}=this;const[t,c]=this.#g();l+=t,e+=c,this.div.style.left=`${(100*l).toFixed(2)}%`,this.div.style.top=`${(100*e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[h,n]=this.parentDimensions,{_borderLineWidth:a}=T,u=a/h,l=a/n;switch(this.rotation){case 90:return[-u,l];case 180:return[u,l];case 270:return[u,-l];default:return[-u,-l]}}fixAndSetPosition(){const[h,n]=this.pageDimensions;let{x:a,y:u,width:l,height:e}=this;switch(l*=h,e*=n,a*=h,u*=n,this.rotation){case 0:a=Math.max(0,Math.min(h-l,a)),u=Math.max(0,Math.min(n-e,u));break;case 90:a=Math.max(0,Math.min(h-e,a)),u=Math.min(n,Math.max(l,u));break;case 180:a=Math.min(h,Math.max(l,a)),u=Math.min(n,Math.max(e,u));break;case 270:a=Math.min(h,Math.max(e,a)),u=Math.max(0,Math.min(n-l,u));break}this.x=a/=h,this.y=u/=n;const[t,c]=this.#g();a+=t,u+=c;const{style:s}=this.div;s.left=`${(100*a).toFixed(2)}%`,s.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#m(h,n,a){switch(a){case 90:return[n,-h];case 180:return[-h,-n];case 270:return[-n,h];default:return[h,n]}}screenToPageTranslation(h,n){return T.#m(h,n,this.parentRotation)}pageTranslationToScreen(h,n){return T.#m(h,n,360-this.parentRotation)}#u(h){switch(h){case 90:{const[n,a]=this.pageDimensions;return[0,-n/a,a/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,a]=this.pageDimensions;return[0,n/a,-a/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:h,pageDimensions:[n,a]}=this,u=n*h,l=a*h;return y.FeatureTest.isCSSRoundSupported?[Math.round(u),Math.round(l)]:[u,l]}setDims(h,n){const[a,u]=this.parentDimensions;this.div.style.width=`${(100*h/a).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*n/u).toFixed(2)}%`),this.#n?.classList.toggle("small",h<T.SMALL_EDITOR_SIZE||n<T.SMALL_EDITOR_SIZE)}fixDims(){const{style:h}=this.div,{height:n,width:a}=h,u=a.endsWith("%"),l=!this.#o&&n.endsWith("%");if(u&&l)return;const[e,t]=this.parentDimensions;u||(h.width=`${(100*parseFloat(a)/e).toFixed(2)}%`),!this.#o&&!l&&(h.height=`${(100*parseFloat(n)/t).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const h=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||h.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const n of h){const a=document.createElement("div");this.#a.append(a),a.classList.add("resizer",n),a.addEventListener("pointerdown",this.#w.bind(this,n)),a.addEventListener("contextmenu",o.noContextMenu)}this.div.prepend(this.#a)}#w(h,n){n.preventDefault();const{isMac:a}=y.FeatureTest.platform;if(n.button!==0||n.ctrlKey&&a)return;const u=this.#S.bind(this,h),l=this._isDraggable;this._isDraggable=!1;const e={passive:!0,capture:!0};window.addEventListener("pointermove",u,e);const t=this.x,c=this.y,s=this.width,f=this.height,x=this.parent.div.style.cursor,E=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const g=()=>{this._isDraggable=l,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",u,e),this.parent.div.style.cursor=x,this.div.style.cursor=E;const A=this.x,D=this.y,P=this.width,R=this.height;A===t&&D===c&&P===s&&R===f||this.addCommands({cmd:()=>{this.width=P,this.height=R,this.x=A,this.y=D;const[j,w]=this.parentDimensions;this.setDims(j*P,w*R),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=f,this.x=t,this.y=c;const[j,w]=this.parentDimensions;this.setDims(j*s,w*f),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",g),window.addEventListener("blur",g)}#S(h,n){const[a,u]=this.parentDimensions,l=this.x,e=this.y,t=this.width,c=this.height,s=T.MIN_SIZE/a,f=T.MIN_SIZE/u,x=B=>Math.round(B*1e4)/1e4,E=this.#u(this.rotation),g=(B,v)=>[E[0]*B+E[2]*v,E[1]*B+E[3]*v],A=this.#u(360-this.rotation),D=(B,v)=>[A[0]*B+A[2]*v,A[1]*B+A[3]*v];let P,R,j=!1,w=!1;switch(h){case"topLeft":j=!0,P=(B,v)=>[0,0],R=(B,v)=>[B,v];break;case"topMiddle":P=(B,v)=>[B/2,0],R=(B,v)=>[B/2,v];break;case"topRight":j=!0,P=(B,v)=>[B,0],R=(B,v)=>[0,v];break;case"middleRight":w=!0,P=(B,v)=>[B,v/2],R=(B,v)=>[0,v/2];break;case"bottomRight":j=!0,P=(B,v)=>[B,v],R=(B,v)=>[0,0];break;case"bottomMiddle":P=(B,v)=>[B/2,v],R=(B,v)=>[B/2,0];break;case"bottomLeft":j=!0,P=(B,v)=>[0,v],R=(B,v)=>[B,0];break;case"middleLeft":w=!0,P=(B,v)=>[0,v/2],R=(B,v)=>[B,v/2];break}const N=P(t,c),H=R(t,c);let X=g(...H);const G=x(l+X[0]),U=x(e+X[1]);let k=1,_=1,[p,b]=this.screenToPageTranslation(n.movementX,n.movementY);if([p,b]=D(p/a,b/u),j){const B=Math.hypot(t,c);k=_=Math.max(Math.min(Math.hypot(H[0]-N[0]-p,H[1]-N[1]-b)/B,1/t,1/c),s/t,f/c)}else w?k=Math.max(s,Math.min(1,Math.abs(H[0]-N[0]-p)))/t:_=Math.max(f,Math.min(1,Math.abs(H[1]-N[1]-b)))/c;const M=x(t*k),F=x(c*_);X=g(...R(M,F));const I=G-X[0],q=U-X[1];this.width=M,this.height=F,this.x=I,this.y=q,this.setDims(a*M,u*F),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const h=this.#n=document.createElement("button");h.className="altText";const n=await T._l10nPromise.get("editor_alt_text_button_label");h.textContent=n,h.setAttribute("aria-label",n),h.tabIndex="0",h.addEventListener("contextmenu",o.noContextMenu),h.addEventListener("pointerdown",a=>a.stopPropagation()),h.addEventListener("click",a=>{a.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),h.addEventListener("keydown",a=>{a.target===h&&a.key==="Enter"&&(a.preventDefault(),this._uiManager.editAltText(this))}),this.#P(),this.div.append(h),T.SMALL_EDITOR_SIZE||(T.SMALL_EDITOR_SIZE=Math.min(128,Math.round(h.getBoundingClientRect().width*1.4)))}async#P(){const h=this.#n;if(!h)return;if(!this.#e&&!this.#t){h.classList.remove("done"),this.#r?.remove();return}T._l10nPromise.get("editor_alt_text_edit_button_label").then(a=>{h.setAttribute("aria-label",a)});let n=this.#r;if(!n){this.#r=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip");const a=n.id=`alt-text-tooltip-${this.id}`;h.setAttribute("aria-describedby",a);const u=100;h.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},u)}),h.addEventListener("mouseleave",()=>{clearTimeout(this.#s),this.#s=null,this.#r?.classList.remove("show")})}h.classList.add("done"),n.innerText=this.#t?await T._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,n.parentNode||h.append(n)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:h,decorative:n}){this.#e===h&&this.#t===n||(this.#e=h,this.#t=n,this.#P())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[h,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/h).toFixed(2)}%`,this.div.style.maxHeight=`${(100*h/n).toFixed(2)}%`);const[a,u]=this.getInitialTranslation();return this.translate(a,u),(0,m.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(h){const{isMac:n}=y.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&n){h.preventDefault();return}this.#i=!0,this.#M(h)}#M(h){if(!this._isDraggable)return;const n=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let a,u;n&&(a={passive:!0,capture:!0},u=e=>{const[t,c]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,c)},window.addEventListener("pointermove",u,a));const l=()=>{if(window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),n&&window.removeEventListener("pointermove",u,a),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:e}=y.FeatureTest.platform;h.ctrlKey&&!e||h.shiftKey||h.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",l),window.addEventListener("blur",l)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(h,n,a){h.changeParent(this),this.x=n,this.y=a,this.fixAndSetPosition()}getRect(h,n){const a=this.parentScale,[u,l]=this.pageDimensions,[e,t]=this.pageTranslation,c=h/a,s=n/a,f=this.x*u,x=this.y*l,E=this.width*u,g=this.height*l;switch(this.rotation){case 0:return[f+c+e,l-x-s-g+t,f+c+E+e,l-x-s+t];case 90:return[f+s+e,l-x+c+t,f+s+g+e,l-x+c+E+t];case 180:return[f-c-E+e,l-x+s+t,f-c+e,l-x+s+g+t];case 270:return[f-s-g+e,l-x-c-E+t,f-s+e,l-x-c+t];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,n){const[a,u,l,e]=h,t=l-a,c=e-u;switch(this.rotation){case 0:return[a,n-e,t,c];case 90:return[a,n-u,c,t];case 180:return[l,n-u,t,c];case 270:return[l,n-e,c,t];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(h=!1,n=null){(0,y.unreachable)("An editor must be serializable")}static deserialize(h,n,a){const u=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:a});u.rotation=h.rotation;const[l,e]=u.pageDimensions,[t,c,s,f]=u.getRectInCurrentCoords(h.rect,e);return u.x=t/l,u.y=c/e,u.width=s/l,u.height=f/e,u}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(h,n){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(h){this.#f=h,this.parent&&(h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(h,n){this.#o=!0;const a=h/n,{style:u}=this.div;u.aspectRatio=a,u.height="auto"}static get MIN_SIZE(){return 16}}d.AnnotationEditor=T;class z extends T{constructor(h){super(h),this.annotationElementId=h.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.KeyboardManager=d.CommandManager=d.ColorManager=d.AnnotationEditorUIManager=void 0,d.bindEvents=o,d.opacityToHex=T;var m=i(1),y=i(6);function o(l,e,t){for(const c of t)e.addEventListener(c,l[c].bind(l))}function T(l){return Math.round(Math.min(255,Math.max(1,255*l))).toString(16).padStart(2,"0")}class z{#e=0;getId(){return`${m.AnnotationEditorPrefix}${this.#e++}`}}class K{#e=(0,m.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',c=new OffscreenCanvas(1,3).getContext("2d"),s=new Image;s.src=e;const f=s.decode().then(()=>(c.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(c.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,m.shadow)(this,"_isSVGFittingCanvas",f)}async#r(e,t){this.#n||=new Map;let c=this.#n.get(e);if(c===null)return null;if(c?.bitmap)return c.refCounter+=1,c;try{c||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"){c.url=t;const f=await fetch(t);if(!f.ok)throw new Error(f.statusText);s=await f.blob()}else s=c.file=t;if(s.type==="image/svg+xml"){const f=K._isSVGFittingCanvas,x=new FileReader,E=new Image,g=new Promise((A,D)=>{E.onload=()=>{c.bitmap=E,c.isSvg=!0,A()},x.onload=async()=>{const P=c.svgUrl=x.result;E.src=await f?`${P}#svgView(preserveAspectRatio(none))`:P},E.onerror=x.onerror=D});x.readAsDataURL(s),await g}else c.bitmap=await createImageBitmap(s);c.refCounter=1}catch(s){console.error(s),c=null}return this.#n.set(e,c),c&&this.#n.set(c.id,c),c}async getFromFile(e){const{lastModified:t,name:c,size:s,type:f}=e;return this.#r(`${t}_${c}_${s}_${f}`,e)}async getFromUrl(e){return this.#r(e,e)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class h{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,mustExec:c,type:s=NaN,overwriteIfSameType:f=!1,keepUndo:x=!1}){if(c&&e(),this.#t)return;const E={cmd:e,undo:t,type:s};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(E);return}if(f&&this.#e[this.#r].type===s){x&&(E.undo=this.#e[this.#r].undo),this.#e[this.#r]=E;return}const g=this.#r+1;g===this.#n?this.#e.splice(0,1):(this.#r=g,g<this.#e.length&&this.#e.splice(g)),this.#e.push(E)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}d.CommandManager=h;class n{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=m.FeatureTest.platform;for(const[c,s,f={}]of e)for(const x of c){const E=x.startsWith("mac+");t&&E?(this.callbacks.set(x.slice(4),{callback:s,options:f}),this.allKeys.add(x.split("+").at(-1))):!t&&!E&&(this.callbacks.set(x,{callback:s,options:f}),this.allKeys.add(x.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const c=this.callbacks.get(this.#e(t));if(!c)return;const{callback:s,options:{bubbles:f=!1,args:x=[],checker:E=null}}=c;E&&!E(e,t)||(s.bind(e,...x)(),f||(t.stopPropagation(),t.preventDefault()))}}d.KeyboardManager=n;class a{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(e),(0,m.shadow)(this,"_colors",e)}convert(e){const t=(0,y.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[c,s]of this._colors)if(s.every((f,x)=>f===t[x]))return a._colorsMapping.get(c);return t}getHexCode(e){const t=this._colors.get(e);return t?m.Util.makeHexColor(...t):e}}d.ColorManager=a;class u{#e=null;#t=new Map;#n=new Map;#r=null;#s=null;#o=new h;#a=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new z;#p=!1;#v=!1;#g=null;#m=m.AnnotationEditorType.NONE;#u=new Set;#b=null;#w=this.blur.bind(this);#S=this.focus.bind(this);#P=this.copy.bind(this);#M=this.cut.bind(this);#I=this.paste.bind(this);#D=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#F=this.onScaleChanging.bind(this);#T=this.onRotationChanging.bind(this);#x={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#y=[0,0];#k=null;#A=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=u.prototype,t=f=>{const{activeElement:x}=document;return x&&f.#A.contains(x)&&f.hasSomethingToControl()},c=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return(0,m.shadow)(this,"_keyboardManager",new n([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-c,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[c,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-c],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,c],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,c,s,f,x){this.#A=e,this.#N=t,this.#r=c,this._eventBus=s,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#F),this._eventBus._on("rotationchanging",this.#T),this.#s=f.annotationStorage,this.#d=f.filterFactory,this.#b=x,this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#R(),this.#j(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#F),this._eventBus._off("rotationchanging",this.#T);for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,m.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,m.shadow)(this,"direction",getComputedStyle(this.#A).direction)}editAltText(e){this.#r?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#A.focus()}findParent(e,t){for(const c of this.#n.values()){const{x:s,y:f,width:x,height:E}=c.div.getBoundingClientRect();if(e>=s&&e<=s+x&&t>=f&&t<=f+E)return c}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#f.add(e)}removeShouldRescale(e){this.#f.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of this.#f)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}#B(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#w)}#j(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#w)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#u)if(t.div.contains(e)){this.#g=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[e,t]=this.#g;this.#g=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}#z(){window.addEventListener("keydown",this.#D,{capture:!0})}#R(){window.removeEventListener("keydown",this.#D,{capture:!0})}#L(){document.addEventListener("copy",this.#P),document.addEventListener("cut",this.#M),document.addEventListener("paste",this.#I)}#C(){document.removeEventListener("copy",this.#P),document.removeEventListener("cut",this.#M),document.removeEventListener("paste",this.#I)}addEditListeners(){this.#z(),this.#L()}removeEditListeners(){this.#R(),this.#C()}copy(e){if(e.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const c of this.#u){const s=c.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const f of t.items)for(const x of this.#i)if(x.isHandlingMimeForPasting(f.type)){x.paste(f,this.currentLayer);return}let c=t.getData("application/pdfjs");if(!c)return;try{c=JSON.parse(c)}catch(f){(0,m.warn)(`paste: "${f.message}".`);return}if(!Array.isArray(c))return;this.unselectAll();const s=this.currentLayer;try{const f=[];for(const g of c){const A=s.deserialize(g);if(!A)return;f.push(A)}const x=()=>{for(const g of f)this.#V(g);this.#U(f)},E=()=>{for(const g of f)g.remove()};this.addCommands({cmd:x,undo:E,mustExec:!0})}catch(f){(0,m.warn)(`paste: "${f.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||u._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#E(e){Object.entries(e).some(([c,s])=>this.#x[c]!==s)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#x,e)})}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#B(),this.#z(),this.#L(),this.#E({isEditing:this.#m!==m.AnnotationEditorType.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#j(),this.#R(),this.#C(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#i){this.#i=e;for(const t of this.#i)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#n.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,t=null){if(this.#m!==e){if(this.#m=e,e===m.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#W(),this.unselectAll();for(const c of this.#n.values())c.updateMode(e);if(t){for(const c of this.#t.values())if(c.annotationElementId===t){this.setSelected(c),c.enterInEditMode();break}}}}updateToolbar(e){e!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#i){if(e===m.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const c of this.#u)c.updateParams(e,t);for(const c of this.#i)c.updateDefaultParams(e,t)}}enableWaiting(e=!1){if(this.#v!==e){this.#v=e;for(const t of this.#n.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}#W(){if(!this.#p){this.#p=!0;for(const e of this.#n.values())e.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const c of this.#t.values())c.pageIndex===e&&t.push(c);return t}getEditor(e){return this.#t.get(e)}addEditor(e){this.#t.set(e.id,e)}removeEditor(e){this.#t.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#V(e){const t=this.#n.get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#e!==e&&(this.#e=e,e&&this.#H(e.propertiesToUpdate))}toggleSelected(e){if(this.#u.has(e)){this.#u.delete(e),e.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#u.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#u)t!==e&&t.unselect();this.#u.clear(),this.#u.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(e){return this.#u.has(e)}unselect(e){e.unselect(),this.#u.delete(e),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#E({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#o.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(e){this.#o.add(e),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const e of this.#t.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#u],t=()=>{for(const s of e)s.remove()},c=()=>{for(const s of e)this.#V(s)};this.addCommands({cmd:t,undo:c,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#U(e){this.#u.clear();for(const t of e)t.isEmpty()||(this.#u.add(t),t.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const e of this.#u)e.commit();this.#U(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const e of this.#u)e.unselect();this.#u.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,c=!1){if(c||this.commitOrRemove(),!this.hasSelection)return;this.#y[0]+=e,this.#y[1]+=t;const[s,f]=this.#y,x=[...this.#u],E=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#y[0]=this.#y[1]=0,this.addCommands({cmd:()=>{for(const g of x)this.#t.has(g.id)&&g.translateInPage(s,f)},undo:()=>{for(const g of x)this.#t.has(g.id)&&g.translateInPage(-s,-f)},mustExec:!1})},E);for(const g of x)g.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const e of this.#u)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const e=this.#c;this.#c=null;let t=!1;for(const[{x:s,y:f,pageIndex:x},E]of e)E.newX=s,E.newY=f,E.newPageIndex=x,t||=s!==E.savedX||f!==E.savedY||x!==E.savedPageIndex;if(!t)return!1;const c=(s,f,x,E)=>{if(this.#t.has(s.id)){const g=this.#n.get(E);g?s._setParentAndPosition(g,f,x):(s.pageIndex=E,s.x=f,s.y=x)}};return this.addCommands({cmd:()=>{for(const[s,{newX:f,newY:x,newPageIndex:E}]of e)c(s,f,x,E)},undo:()=>{for(const[s,{savedX:f,savedY:x,savedPageIndex:E}]of e)c(s,f,x,E)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#c)for(const c of this.#c.keys())c.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#e===e}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,m.shadow)(this,"imageManager",new K)}}d.AnnotationEditorUIManager=u}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StatTimer=d.RenderingCancelledException=d.PixelsPerInch=d.PageViewport=d.PDFDateString=d.DOMStandardFontDataFactory=d.DOMSVGFactory=d.DOMFilterFactory=d.DOMCanvasFactory=d.DOMCMapReaderFactory=void 0,d.deprecated=D,d.getColorValues=N,d.getCurrentTransform=H,d.getCurrentTransformInverse=X,d.getFilenameFromUrl=s,d.getPdfFilenameFromUrl=f,d.getRGB=w,d.getXfaPageViewport=j,d.isDataScheme=t,d.isPdfFile=c,d.isValidFetchUrl=E,d.loadScript=A,d.noContextMenu=g,d.setLayerDimensions=G;var m=i(7),y=i(1);const o="http://www.w3.org/2000/svg";class T{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}d.PixelsPerInch=T;class z extends m.BaseFilterFactory{#e;#t;#n;#r;#s;#o;#a;#l;#c;#i;#f=0;constructor({docId:k,ownerDocument:_=globalThis.document}={}){super(),this.#n=k,this.#r=_}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const k=this.#r.createElement("div"),{style:_}=k;_.visibility="hidden",_.contain="strict",_.width=_.height=0,_.position="absolute",_.top=_.left=0,_.zIndex=-1;const p=this.#r.createElementNS(o,"svg");p.setAttribute("width",0),p.setAttribute("height",0),this.#t=this.#r.createElementNS(o,"defs"),k.append(p),p.append(this.#t),this.#r.body.append(k)}return this.#t}addFilter(k){if(!k)return"none";let _=this.#d.get(k);if(_)return _;let p,b,M,F;if(k.length===1){const v=k[0],C=new Array(256);for(let L=0;L<256;L++)C[L]=v[L]/255;F=p=b=M=C.join(",")}else{const[v,C,L]=k,V=new Array(256),W=new Array(256),Z=new Array(256);for(let $=0;$<256;$++)V[$]=v[$]/255,W[$]=C[$]/255,Z[$]=L[$]/255;p=V.join(","),b=W.join(","),M=Z.join(","),F=`${p}${b}${M}`}if(_=this.#d.get(F),_)return this.#d.set(k,_),_;const I=`g_${this.#n}_transfer_map_${this.#f++}`,q=`url(#${I})`;this.#d.set(k,q),this.#d.set(F,q);const B=this.#v(I);return this.#m(p,b,M,B),q}addHCMFilter(k,_){const p=`${k}-${_}`;if(this.#o===p)return this.#a;if(this.#o=p,this.#a="none",this.#s?.remove(),!k||!_)return this.#a;const b=this.#u(k);k=y.Util.makeHexColor(...b);const M=this.#u(_);if(_=y.Util.makeHexColor(...M),this.#h.style.color="",k==="#000000"&&_==="#ffffff"||k===_)return this.#a;const F=new Array(256);for(let C=0;C<=255;C++){const L=C/255;F[C]=L<=.03928?L/12.92:((L+.055)/1.055)**2.4}const I=F.join(","),q=`g_${this.#n}_hcm_filter`,B=this.#l=this.#v(q);this.#m(I,I,I,B),this.#p(B);const v=(C,L)=>{const V=b[C]/255,W=M[C]/255,Z=new Array(L+1);for(let $=0;$<=L;$++)Z[$]=V+$/L*(W-V);return Z.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),B),this.#a=`url(#${q})`,this.#a}addHighlightHCMFilter(k,_,p,b){const M=`${k}-${_}-${p}-${b}`;if(this.#c===M)return this.#i;if(this.#c=M,this.#i="none",this.#l?.remove(),!k||!_)return this.#i;const[F,I]=[k,_].map(this.#u.bind(this));let q=Math.round(.2126*F[0]+.7152*F[1]+.0722*F[2]),B=Math.round(.2126*I[0]+.7152*I[1]+.0722*I[2]),[v,C]=[p,b].map(this.#u.bind(this));B<q&&([q,B,v,C]=[B,q,C,v]),this.#h.style.color="";const L=(Z,$,ce)=>{const _e=new Array(256),de=(B-q)/ce,he=Z/255,fe=($-Z)/(255*ce);let re=0;for(let le=0;le<=ce;le++){const Se=Math.round(q+le*de),ve=he+le*fe;for(let be=re;be<=Se;be++)_e[be]=ve;re=Se+1}for(let le=re;le<256;le++)_e[le]=_e[re-1];return _e.join(",")},V=`g_${this.#n}_hcm_highlight_filter`,W=this.#l=this.#v(V);return this.#p(W),this.#m(L(v[0],C[0],5),L(v[1],C[1],5),L(v[2],C[2],5),W),this.#i=`url(#${V})`,this.#i}destroy(k=!1){k&&(this.#a||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(k){const _=this.#r.createElementNS(o,"feColorMatrix");_.setAttribute("type","matrix"),_.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),k.append(_)}#v(k){const _=this.#r.createElementNS(o,"filter");return _.setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("id",k),this.#h.append(_),_}#g(k,_,p){const b=this.#r.createElementNS(o,_);b.setAttribute("type","discrete"),b.setAttribute("tableValues",p),k.append(b)}#m(k,_,p,b){const M=this.#r.createElementNS(o,"feComponentTransfer");b.append(M),this.#g(M,"feFuncR",k),this.#g(M,"feFuncG",_),this.#g(M,"feFuncB",p)}#u(k){return this.#h.style.color=k,w(getComputedStyle(this.#h).getPropertyValue("color"))}}d.DOMFilterFactory=z;class K extends m.BaseCanvasFactory{constructor({ownerDocument:k=globalThis.document}={}){super(),this._document=k}_createCanvas(k,_){const p=this._document.createElement("canvas");return p.width=k,p.height=_,p}}d.DOMCanvasFactory=K;async function h(U,k=!1){if(E(U,document.baseURI)){const _=await fetch(U);if(!_.ok)throw new Error(_.statusText);return k?new Uint8Array(await _.arrayBuffer()):(0,y.stringToBytes)(await _.text())}return new Promise((_,p)=>{const b=new XMLHttpRequest;b.open("GET",U,!0),k&&(b.responseType="arraybuffer"),b.onreadystatechange=()=>{if(b.readyState===XMLHttpRequest.DONE){if(b.status===200||b.status===0){let M;if(k&&b.response?M=new Uint8Array(b.response):!k&&b.responseText&&(M=(0,y.stringToBytes)(b.responseText)),M){_(M);return}}p(new Error(b.statusText))}},b.send(null)})}class n extends m.BaseCMapReaderFactory{_fetchData(k,_){return h(k,this.isCompressed).then(p=>({cMapData:p,compressionType:_}))}}d.DOMCMapReaderFactory=n;class a extends m.BaseStandardFontDataFactory{_fetchData(k){return h(k,!0)}}d.DOMStandardFontDataFactory=a;class u extends m.BaseSVGFactory{_createSVG(k){return document.createElementNS(o,k)}}d.DOMSVGFactory=u;class l{constructor({viewBox:k,scale:_,rotation:p,offsetX:b=0,offsetY:M=0,dontFlip:F=!1}){this.viewBox=k,this.scale=_,this.rotation=p,this.offsetX=b,this.offsetY=M;const I=(k[2]+k[0])/2,q=(k[3]+k[1])/2;let B,v,C,L;switch(p%=360,p<0&&(p+=360),p){case 180:B=-1,v=0,C=0,L=1;break;case 90:B=0,v=1,C=1,L=0;break;case 270:B=0,v=-1,C=-1,L=0;break;case 0:B=1,v=0,C=0,L=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(C=-C,L=-L);let V,W,Z,$;B===0?(V=Math.abs(q-k[1])*_+b,W=Math.abs(I-k[0])*_+M,Z=(k[3]-k[1])*_,$=(k[2]-k[0])*_):(V=Math.abs(I-k[0])*_+b,W=Math.abs(q-k[1])*_+M,Z=(k[2]-k[0])*_,$=(k[3]-k[1])*_),this.transform=[B*_,v*_,C*_,L*_,V-B*_*I-C*_*q,W-v*_*I-L*_*q],this.width=Z,this.height=$}get rawDims(){const{viewBox:k}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:k[2]-k[0],pageHeight:k[3]-k[1],pageX:k[0],pageY:k[1]})}clone({scale:k=this.scale,rotation:_=this.rotation,offsetX:p=this.offsetX,offsetY:b=this.offsetY,dontFlip:M=!1}={}){return new l({viewBox:this.viewBox.slice(),scale:k,rotation:_,offsetX:p,offsetY:b,dontFlip:M})}convertToViewportPoint(k,_){return y.Util.applyTransform([k,_],this.transform)}convertToViewportRectangle(k){const _=y.Util.applyTransform([k[0],k[1]],this.transform),p=y.Util.applyTransform([k[2],k[3]],this.transform);return[_[0],_[1],p[0],p[1]]}convertToPdfPoint(k,_){return y.Util.applyInverseTransform([k,_],this.transform)}}d.PageViewport=l;class e extends y.BaseException{constructor(k,_=0){super(k,"RenderingCancelledException"),this.extraDelay=_}}d.RenderingCancelledException=e;function t(U){const k=U.length;let _=0;for(;_<k&&U[_].trim()==="";)_++;return U.substring(_,_+5).toLowerCase()==="data:"}function c(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function s(U,k=!1){return k||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function f(U,k="document.pdf"){if(typeof U!="string")return k;if(t(U))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),k;const _=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,p=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,b=_.exec(U);let M=p.exec(b[1])||p.exec(b[2])||p.exec(b[3]);if(M&&(M=M[0],M.includes("%")))try{M=p.exec(decodeURIComponent(M))[0]}catch{}return M||k}class x{started=Object.create(null);times=[];time(k){k in this.started&&(0,y.warn)(`Timer is already running for ${k}`),this.started[k]=Date.now()}timeEnd(k){k in this.started||(0,y.warn)(`Timer has not been started for ${k}`),this.times.push({name:k,start:this.started[k],end:Date.now()}),delete this.started[k]}toString(){const k=[];let _=0;for(const{name:p}of this.times)_=Math.max(p.length,_);for(const{name:p,start:b,end:M}of this.times)k.push(`${p.padEnd(_)} ${M-b}ms
`);return k.join("")}}d.StatTimer=x;function E(U,k){try{const{protocol:_}=k?new URL(U,k):new URL(U);return _==="http:"||_==="https:"}catch{return!1}}function g(U){U.preventDefault()}function A(U,k=!1){return new Promise((_,p)=>{const b=document.createElement("script");b.src=U,b.onload=function(M){k&&b.remove(),_(M)},b.onerror=function(){p(new Error(`Cannot load script at: ${b.src}`))},(document.head||document.documentElement).append(b)})}function D(U){console.log("Deprecated API usage: "+U)}let P;class R{static toDateObject(k){if(!k||typeof k!="string")return null;P||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const _=P.exec(k);if(!_)return null;const p=parseInt(_[1],10);let b=parseInt(_[2],10);b=b>=1&&b<=12?b-1:0;let M=parseInt(_[3],10);M=M>=1&&M<=31?M:1;let F=parseInt(_[4],10);F=F>=0&&F<=23?F:0;let I=parseInt(_[5],10);I=I>=0&&I<=59?I:0;let q=parseInt(_[6],10);q=q>=0&&q<=59?q:0;const B=_[7]||"Z";let v=parseInt(_[8],10);v=v>=0&&v<=23?v:0;let C=parseInt(_[9],10)||0;return C=C>=0&&C<=59?C:0,B==="-"?(F+=v,I+=C):B==="+"&&(F-=v,I-=C),new Date(Date.UTC(p,b,M,F,I,q))}}d.PDFDateString=R;function j(U,{scale:k=1,rotation:_=0}){const{width:p,height:b}=U.attributes.style,M=[0,0,parseInt(p),parseInt(b)];return new l({viewBox:M,scale:k,rotation:_})}function w(U){if(U.startsWith("#")){const k=parseInt(U.slice(1),16);return[(k&16711680)>>16,(k&65280)>>8,k&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(k=>parseInt(k)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(k=>parseInt(k)).slice(0,3):((0,y.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function N(U){const k=document.createElement("span");k.style.visibility="hidden",document.body.append(k);for(const _ of U.keys()){k.style.color=_;const p=window.getComputedStyle(k).color;U.set(_,w(p))}k.remove()}function H(U){const{a:k,b:_,c:p,d:b,e:M,f:F}=U.getTransform();return[k,_,p,b,M,F]}function X(U){const{a:k,b:_,c:p,d:b,e:M,f:F}=U.getTransform().invertSelf();return[k,_,p,b,M,F]}function G(U,k,_=!1,p=!0){if(k instanceof l){const{pageWidth:b,pageHeight:M}=k.rawDims,{style:F}=U,I=y.FeatureTest.isCSSRoundSupported,q=`var(--scale-factor) * ${b}px`,B=`var(--scale-factor) * ${M}px`,v=I?`round(${q}, 1px)`:`calc(${q})`,C=I?`round(${B}, 1px)`:`calc(${B})`;!_||k.rotation%180===0?(F.width=v,F.height=C):(F.width=C,F.height=v)}p&&U.setAttribute("data-main-rotation",k.rotation)}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseStandardFontDataFactory=d.BaseSVGFactory=d.BaseFilterFactory=d.BaseCanvasFactory=d.BaseCMapReaderFactory=void 0;var m=i(1);class y{constructor(){this.constructor===y&&(0,m.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(n){return"none"}addHCMFilter(n,a){return"none"}addHighlightHCMFilter(n,a,u,l){return"none"}destroy(n=!1){}}d.BaseFilterFactory=y;class o{constructor(){this.constructor===o&&(0,m.unreachable)("Cannot initialize BaseCanvasFactory.")}create(n,a){if(n<=0||a<=0)throw new Error("Invalid canvas size");const u=this._createCanvas(n,a);return{canvas:u,context:u.getContext("2d")}}reset(n,a,u){if(!n.canvas)throw new Error("Canvas is not specified");if(a<=0||u<=0)throw new Error("Invalid canvas size");n.canvas.width=a,n.canvas.height=u}destroy(n){if(!n.canvas)throw new Error("Canvas is not specified");n.canvas.width=0,n.canvas.height=0,n.canvas=null,n.context=null}_createCanvas(n,a){(0,m.unreachable)("Abstract method `_createCanvas` called.")}}d.BaseCanvasFactory=o;class T{constructor({baseUrl:n=null,isCompressed:a=!0}){this.constructor===T&&(0,m.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=n,this.isCompressed=a}async fetch({name:n}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!n)throw new Error("CMap name must be specified.");const a=this.baseUrl+n+(this.isCompressed?".bcmap":""),u=this.isCompressed?m.CMapCompressionType.BINARY:m.CMapCompressionType.NONE;return this._fetchData(a,u).catch(l=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${a}`)})}_fetchData(n,a){(0,m.unreachable)("Abstract method `_fetchData` called.")}}d.BaseCMapReaderFactory=T;class z{constructor({baseUrl:n=null}){this.constructor===z&&(0,m.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=n}async fetch({filename:n}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!n)throw new Error("Font filename must be specified.");const a=`${this.baseUrl}${n}`;return this._fetchData(a).catch(u=>{throw new Error(`Unable to load font data at: ${a}`)})}_fetchData(n){(0,m.unreachable)("Abstract method `_fetchData` called.")}}d.BaseStandardFontDataFactory=z;class K{constructor(){this.constructor===K&&(0,m.unreachable)("Cannot initialize BaseSVGFactory.")}create(n,a,u=!1){if(n<=0||a<=0)throw new Error("Invalid SVG dimensions");const l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),u||(l.setAttribute("width",`${n}px`),l.setAttribute("height",`${a}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${n} ${a}`),l}createElement(n){if(typeof n!="string")throw new Error("Invalid SVG element type");return this._createSVG(n)}_createSVG(n){(0,m.unreachable)("Abstract method `_createSVG` called.")}}d.BaseSVGFactory=K}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MurmurHash3_64=void 0;var m=i(1);const y=3285377520,o=4294901760,T=65535;class z{constructor(h){this.h1=h?h&4294967295:y,this.h2=h?h&4294967295:y}update(h){let n,a;if(typeof h=="string"){n=new Uint8Array(h.length*2),a=0;for(let D=0,P=h.length;D<P;D++){const R=h.charCodeAt(D);R<=255?n[a++]=R:(n[a++]=R>>>8,n[a++]=R&255)}}else if((0,m.isArrayBuffer)(h))n=h.slice(),a=n.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=a>>2,l=a-u*4,e=new Uint32Array(n.buffer,0,u);let t=0,c=0,s=this.h1,f=this.h2;const x=3432918353,E=461845907,g=x&T,A=E&T;for(let D=0;D<u;D++)D&1?(t=e[D],t=t*x&o|t*g&T,t=t<<15|t>>>17,t=t*E&o|t*A&T,s^=t,s=s<<13|s>>>19,s=s*5+3864292196):(c=e[D],c=c*x&o|c*g&T,c=c<<15|c>>>17,c=c*E&o|c*A&T,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(t=0,l){case 3:t^=n[u*4+2]<<16;case 2:t^=n[u*4+1]<<8;case 1:t^=n[u*4],t=t*x&o|t*g&T,t=t<<15|t>>>17,t=t*E&o|t*A&T,u&1?s^=t:f^=t}this.h1=s,this.h2=f}hexdigest(){let h=this.h1,n=this.h2;return h^=n>>>1,h=h*3981806797&o|h*36045&T,n=n*4283543511&o|((n<<16|h>>>16)*2950163797&o)>>>16,h^=n>>>1,h=h*444984403&o|h*60499&T,n=n*3301882366&o|((n<<16|h>>>16)*3120437893&o)>>>16,h^=n>>>1,(h>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}d.MurmurHash3_64=z}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FontLoader=d.FontFaceObject=void 0;var m=i(1);class y{#e=new Set;constructor({ownerDocument:z=globalThis.document,styleElement:K=null}){this._document=z,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(z){this.nativeFontFaces.add(z),this._document.fonts.add(z)}removeNativeFontFace(z){this.nativeFontFaces.delete(z),this._document.fonts.delete(z)}insertRule(z){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const K=this.styleElement.sheet;K.insertRule(z,K.cssRules.length)}clear(){for(const z of this.nativeFontFaces)this._document.fonts.delete(z);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(z){if(!(!z||this.#e.has(z.loadedName))){if((0,m.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:K,src:h,style:n}=z,a=new FontFace(K,h,n);this.addNativeFontFace(a);try{await a.load(),this.#e.add(K)}catch{(0,m.warn)(`Cannot load system font: ${z.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}(0,m.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(z){if(z.attached||z.missingFile&&!z.systemFontInfo)return;if(z.attached=!0,z.systemFontInfo){await this.loadSystemFont(z.systemFontInfo);return}if(this.isFontLoadingAPISupported){const h=z.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(n){throw(0,m.warn)(`Failed to load font '${h.family}': '${n}'.`),z.disableFontFace=!0,n}}return}const K=z.createFontFaceRule();if(K){if(this.insertRule(K),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const n=this._queueLoadingCallback(h);this._prepareFontLoadEvent(z,n)})}}get isFontLoadingAPISupported(){const z=!!this._document?.fonts;return(0,m.shadow)(this,"isFontLoadingAPISupported",z)}get isSyncFontLoadingSupported(){let z=!1;return(m.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(z=!0),(0,m.shadow)(this,"isSyncFontLoadingSupported",z)}_queueLoadingCallback(z){function K(){for((0,m.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;h.length>0&&h[0].done;){const a=h.shift();setTimeout(a.callback,0)}}const{loadingRequests:h}=this,n={done:!1,complete:K,callback:z};return h.push(n),n}get _loadTestFont(){const z=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,m.shadow)(this,"_loadTestFont",z)}_prepareFontLoadEvent(z,K){function h(j,w){return j.charCodeAt(w)<<24|j.charCodeAt(w+1)<<16|j.charCodeAt(w+2)<<8|j.charCodeAt(w+3)&255}function n(j,w,N,H){const X=j.substring(0,w),G=j.substring(w+N);return X+H+G}let a,u;const l=this._document.createElement("canvas");l.width=1,l.height=1;const e=l.getContext("2d");let t=0;function c(j,w){if(++t>30){(0,m.warn)("Load test font never loaded."),w();return}if(e.font="30px "+j,e.fillText(".",0,20),e.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,j,w))}const s=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=n(f,976,s.length,s);const E=16,g=1482184792;let A=h(f,E);for(a=0,u=s.length-3;a<u;a+=4)A=A-g+h(s,a)|0;a<s.length&&(A=A-g+h(s+"XXX",a)|0),f=n(f,E,4,(0,m.string32)(A));const D=`url(data:font/opentype;base64,${btoa(f)});`,P=`@font-face {font-family:"${s}";src:${D}}`;this.insertRule(P);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const j of[z.loadedName,s]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=j,R.append(w)}this._document.body.append(R),c(s,()=>{R.remove(),K.complete()})}}d.FontLoader=y;class o{constructor(z,{isEvalSupported:K=!0,disableFontFace:h=!1,ignoreErrors:n=!1,inspectFont:a=null}){this.compiledGlyphs=Object.create(null);for(const u in z)this[u]=z[u];this.isEvalSupported=K!==!1,this.disableFontFace=h===!0,this.ignoreErrors=n===!0,this._inspectFont=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let z;if(!this.cssFontInfo)z=new FontFace(this.loadedName,this.data,{});else{const K={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(K.style=`oblique ${this.cssFontInfo.italicAngle}deg`),z=new FontFace(this.cssFontInfo.fontFamily,this.data,K)}return this._inspectFont?.(this),z}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const z=(0,m.bytesToString)(this.data),K=`url(data:${this.mimetype};base64,${btoa(z)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${K}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${K}}`}return this._inspectFont?.(this,K),h}getPathGenerator(z,K){if(this.compiledGlyphs[K]!==void 0)return this.compiledGlyphs[K];let h;try{h=z.get(this.loadedName+"_path_"+K)}catch(n){if(!this.ignoreErrors)throw n;return(0,m.warn)(`getPathGenerator - ignoring character: "${n}".`),this.compiledGlyphs[K]=function(a,u){}}if(this.isEvalSupported&&m.FeatureTest.isEvalSupported){const n=[];for(const a of h){const u=a.args!==void 0?a.args.join(","):"";n.push("c.",a.cmd,"(",u,`);
`)}return this.compiledGlyphs[K]=new Function("c","size",n.join(""))}return this.compiledGlyphs[K]=function(n,a){for(const u of h)u.cmd==="scale"&&(u.args=[a,-a]),n[u.cmd].apply(n,u.args)}}}d.FontFaceObject=o}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NodeStandardFontDataFactory=d.NodeFilterFactory=d.NodeCanvasFactory=d.NodeCMapReaderFactory=void 0;var m=i(7);i(1);const y=function(h){return new Promise((n,a)=>{require$$5.readFile(h,(l,e)=>{if(l||!e){a(new Error(l));return}n(new Uint8Array(e))})})};class o extends m.BaseFilterFactory{}d.NodeFilterFactory=o;class T extends m.BaseCanvasFactory{_createCanvas(n,a){return require$$5.createCanvas(n,a)}}d.NodeCanvasFactory=T;class z extends m.BaseCMapReaderFactory{_fetchData(n,a){return y(n).then(u=>({cMapData:u,compressionType:a}))}}d.NodeCMapReaderFactory=z;class K extends m.BaseStandardFontDataFactory{_fetchData(n){return y(n)}}d.NodeStandardFontDataFactory=K}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CanvasGraphics=void 0;var m=i(1),y=i(6),o=i(12),T=i(13);const z=16,K=100,h=4096,n=15,a=10,u=1e3,l=16;function e(_,p){if(_._removeMirroring)throw new Error("Context is already forwarding operations.");_.__originalSave=_.save,_.__originalRestore=_.restore,_.__originalRotate=_.rotate,_.__originalScale=_.scale,_.__originalTranslate=_.translate,_.__originalTransform=_.transform,_.__originalSetTransform=_.setTransform,_.__originalResetTransform=_.resetTransform,_.__originalClip=_.clip,_.__originalMoveTo=_.moveTo,_.__originalLineTo=_.lineTo,_.__originalBezierCurveTo=_.bezierCurveTo,_.__originalRect=_.rect,_.__originalClosePath=_.closePath,_.__originalBeginPath=_.beginPath,_._removeMirroring=()=>{_.save=_.__originalSave,_.restore=_.__originalRestore,_.rotate=_.__originalRotate,_.scale=_.__originalScale,_.translate=_.__originalTranslate,_.transform=_.__originalTransform,_.setTransform=_.__originalSetTransform,_.resetTransform=_.__originalResetTransform,_.clip=_.__originalClip,_.moveTo=_.__originalMoveTo,_.lineTo=_.__originalLineTo,_.bezierCurveTo=_.__originalBezierCurveTo,_.rect=_.__originalRect,_.closePath=_.__originalClosePath,_.beginPath=_.__originalBeginPath,delete _._removeMirroring},_.save=function(){p.save(),this.__originalSave()},_.restore=function(){p.restore(),this.__originalRestore()},_.translate=function(M,F){p.translate(M,F),this.__originalTranslate(M,F)},_.scale=function(M,F){p.scale(M,F),this.__originalScale(M,F)},_.transform=function(M,F,I,q,B,v){p.transform(M,F,I,q,B,v),this.__originalTransform(M,F,I,q,B,v)},_.setTransform=function(M,F,I,q,B,v){p.setTransform(M,F,I,q,B,v),this.__originalSetTransform(M,F,I,q,B,v)},_.resetTransform=function(){p.resetTransform(),this.__originalResetTransform()},_.rotate=function(M){p.rotate(M),this.__originalRotate(M)},_.clip=function(M){p.clip(M),this.__originalClip(M)},_.moveTo=function(b,M){p.moveTo(b,M),this.__originalMoveTo(b,M)},_.lineTo=function(b,M){p.lineTo(b,M),this.__originalLineTo(b,M)},_.bezierCurveTo=function(b,M,F,I,q,B){p.bezierCurveTo(b,M,F,I,q,B),this.__originalBezierCurveTo(b,M,F,I,q,B)},_.rect=function(b,M,F,I){p.rect(b,M,F,I),this.__originalRect(b,M,F,I)},_.closePath=function(){p.closePath(),this.__originalClosePath()},_.beginPath=function(){p.beginPath(),this.__originalBeginPath()}}class t{constructor(p){this.canvasFactory=p,this.cache=Object.create(null)}getCanvas(p,b,M){let F;return this.cache[p]!==void 0?(F=this.cache[p],this.canvasFactory.reset(F,b,M)):(F=this.canvasFactory.create(b,M),this.cache[p]=F),F}delete(p){delete this.cache[p]}clear(){for(const p in this.cache){const b=this.cache[p];this.canvasFactory.destroy(b),delete this.cache[p]}}}function c(_,p,b,M,F,I,q,B,v,C){const[L,V,W,Z,$,ce]=(0,y.getCurrentTransform)(_);if(V===0&&W===0){const he=q*L+$,fe=Math.round(he),re=B*Z+ce,le=Math.round(re),Se=(q+v)*L+$,ve=Math.abs(Math.round(Se)-fe)||1,be=(B+C)*Z+ce,ke=Math.abs(Math.round(be)-le)||1;return _.setTransform(Math.sign(L),0,0,Math.sign(Z),fe,le),_.drawImage(p,b,M,F,I,0,0,ve,ke),_.setTransform(L,V,W,Z,$,ce),[ve,ke]}if(L===0&&Z===0){const he=B*W+$,fe=Math.round(he),re=q*V+ce,le=Math.round(re),Se=(B+C)*W+$,ve=Math.abs(Math.round(Se)-fe)||1,be=(q+v)*V+ce,ke=Math.abs(Math.round(be)-le)||1;return _.setTransform(0,Math.sign(V),Math.sign(W),0,fe,le),_.drawImage(p,b,M,F,I,0,0,ke,ve),_.setTransform(L,V,W,Z,$,ce),[ke,ve]}_.drawImage(p,b,M,F,I,q,B,v,C);const _e=Math.hypot(L,V),de=Math.hypot(W,Z);return[_e*v,de*C]}function s(_){const{width:p,height:b}=_;if(p>u||b>u)return null;const M=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=p+1;let q=new Uint8Array(I*(b+1)),B,v,C;const L=p+7&-8;let V=new Uint8Array(L*b),W=0;for(const de of _.data){let he=128;for(;he>0;)V[W++]=de&he?0:255,he>>=1}let Z=0;for(W=0,V[W]!==0&&(q[0]=1,++Z),v=1;v<p;v++)V[W]!==V[W+1]&&(q[v]=V[W]?2:1,++Z),W++;for(V[W]!==0&&(q[v]=2,++Z),B=1;B<b;B++){W=B*L,C=B*I,V[W-L]!==V[W]&&(q[C]=V[W]?1:8,++Z);let de=(V[W]?4:0)+(V[W-L]?8:0);for(v=1;v<p;v++)de=(de>>2)+(V[W+1]?4:0)+(V[W-L+1]?8:0),F[de]&&(q[C+v]=F[de],++Z),W++;if(V[W-L]!==V[W]&&(q[C+v]=V[W]?2:4,++Z),Z>M)return null}for(W=L*(b-1),C=B*I,V[W]!==0&&(q[C]=8,++Z),v=1;v<p;v++)V[W]!==V[W+1]&&(q[C+v]=V[W]?4:8,++Z),W++;if(V[W]!==0&&(q[C+v]=4,++Z),Z>M)return null;const $=new Int32Array([0,I,-1,0,-I,0,0,0,1]),ce=new Path2D;for(B=0;Z&&B<=b;B++){let de=B*I;const he=de+p;for(;de<he&&!q[de];)de++;if(de===he)continue;ce.moveTo(de%I,B);const fe=de;let re=q[de];do{const le=$[re];do de+=le;while(!q[de]);const Se=q[de];Se!==5&&Se!==10?(re=Se,q[de]=0):(re=Se&51*re>>4,q[de]&=re>>2|re<<2),ce.lineTo(de%I,de/I|0),q[de]||--Z}while(fe!==de);--B}return V=null,q=null,function(de){de.save(),de.scale(1/p,-1/b),de.translate(0,-b),de.fill(ce),de.beginPath(),de.restore()}}class f{constructor(p,b){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=m.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=m.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=m.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,p,b])}clone(){const p=Object.create(this);return p.clipBox=this.clipBox.slice(),p}setCurrentPoint(p,b){this.x=p,this.y=b}updatePathMinMax(p,b,M){[b,M]=m.Util.applyTransform([b,M],p),this.minX=Math.min(this.minX,b),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,b),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(p,b){const M=m.Util.applyTransform(b,p),F=m.Util.applyTransform(b.slice(2),p);this.minX=Math.min(this.minX,M[0],F[0]),this.minY=Math.min(this.minY,M[1],F[1]),this.maxX=Math.max(this.maxX,M[0],F[0]),this.maxY=Math.max(this.maxY,M[1],F[1])}updateScalingPathMinMax(p,b){m.Util.scaleMinMax(p,b),this.minX=Math.min(this.minX,b[0]),this.maxX=Math.max(this.maxX,b[1]),this.minY=Math.min(this.minY,b[2]),this.maxY=Math.max(this.maxY,b[3])}updateCurvePathMinMax(p,b,M,F,I,q,B,v,C,L){const V=m.Util.bezierBoundingBox(b,M,F,I,q,B,v,C);if(L){L[0]=Math.min(L[0],V[0],V[2]),L[1]=Math.max(L[1],V[0],V[2]),L[2]=Math.min(L[2],V[1],V[3]),L[3]=Math.max(L[3],V[1],V[3]);return}this.updateRectMinMax(p,V)}getPathBoundingBox(p=o.PathType.FILL,b=null){const M=[this.minX,this.minY,this.maxX,this.maxY];if(p===o.PathType.STROKE){b||(0,m.unreachable)("Stroke bounding box must include transform.");const F=m.Util.singularValueDecompose2dScale(b),I=F[0]*this.lineWidth/2,q=F[1]*this.lineWidth/2;M[0]-=I,M[1]-=q,M[2]+=I,M[3]+=q}return M}updateClipFromPath(){const p=m.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(p||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(p){this.clipBox=p,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(p=o.PathType.FILL,b=null){return m.Util.intersect(this.clipBox,this.getPathBoundingBox(p,b))}}function x(_,p){if(typeof ImageData<"u"&&p instanceof ImageData){_.putImageData(p,0,0);return}const b=p.height,M=p.width,F=b%l,I=(b-F)/l,q=F===0?I:I+1,B=_.createImageData(M,l);let v=0,C;const L=p.data,V=B.data;let W,Z,$,ce;if(p.kind===m.ImageKind.GRAYSCALE_1BPP){const _e=L.byteLength,de=new Uint32Array(V.buffer,0,V.byteLength>>2),he=de.length,fe=M+7>>3,re=4294967295,le=m.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<q;W++){for($=W<I?l:F,C=0,Z=0;Z<$;Z++){const Se=_e-v;let ve=0;const be=Se>fe?M:Se*8-7,ke=be&-8;let Le=0,Ue=0;for(;ve<ke;ve+=8)Ue=L[v++],de[C++]=Ue&128?re:le,de[C++]=Ue&64?re:le,de[C++]=Ue&32?re:le,de[C++]=Ue&16?re:le,de[C++]=Ue&8?re:le,de[C++]=Ue&4?re:le,de[C++]=Ue&2?re:le,de[C++]=Ue&1?re:le;for(;ve<be;ve++)Le===0&&(Ue=L[v++],Le=128),de[C++]=Ue&Le?re:le,Le>>=1}for(;C<he;)de[C++]=0;_.putImageData(B,0,W*l)}}else if(p.kind===m.ImageKind.RGBA_32BPP){for(Z=0,ce=M*l*4,W=0;W<I;W++)V.set(L.subarray(v,v+ce)),v+=ce,_.putImageData(B,0,Z),Z+=l;W<q&&(ce=M*F*4,V.set(L.subarray(v,v+ce)),_.putImageData(B,0,Z))}else if(p.kind===m.ImageKind.RGB_24BPP)for($=l,ce=M*$,W=0;W<q;W++){for(W>=I&&($=F,ce=M*$),C=0,Z=ce;Z--;)V[C++]=L[v++],V[C++]=L[v++],V[C++]=L[v++],V[C++]=255;_.putImageData(B,0,W*l)}else throw new Error(`bad image kind: ${p.kind}`)}function E(_,p){if(p.bitmap){_.drawImage(p.bitmap,0,0);return}const b=p.height,M=p.width,F=b%l,I=(b-F)/l,q=F===0?I:I+1,B=_.createImageData(M,l);let v=0;const C=p.data,L=B.data;for(let V=0;V<q;V++){const W=V<I?l:F;({srcPos:v}=(0,T.convertBlackAndWhiteToRGBA)({src:C,srcPos:v,dest:L,width:M,height:W,nonBlackColor:0})),_.putImageData(B,0,V*l)}}function g(_,p){const b=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of b)_[M]!==void 0&&(p[M]=_[M]);_.setLineDash!==void 0&&(p.setLineDash(_.getLineDash()),p.lineDashOffset=_.lineDashOffset)}function A(_){if(_.strokeStyle=_.fillStyle="#000000",_.fillRule="nonzero",_.globalAlpha=1,_.lineWidth=1,_.lineCap="butt",_.lineJoin="miter",_.miterLimit=10,_.globalCompositeOperation="source-over",_.font="10px sans-serif",_.setLineDash!==void 0&&(_.setLineDash([]),_.lineDashOffset=0),!m.isNodeJS){const{filter:p}=_;p!=="none"&&p!==""&&(_.filter="none")}}function D(_,p,b,M){const F=_.length;for(let I=3;I<F;I+=4){const q=_[I];if(q===0)_[I-3]=p,_[I-2]=b,_[I-1]=M;else if(q<255){const B=255-q;_[I-3]=_[I-3]*q+p*B>>8,_[I-2]=_[I-2]*q+b*B>>8,_[I-1]=_[I-1]*q+M*B>>8}}}function P(_,p,b){const M=_.length,F=1/255;for(let I=3;I<M;I+=4){const q=b?b[_[I]]:_[I];p[I]=p[I]*q*F|0}}function R(_,p,b){const M=_.length;for(let F=3;F<M;F+=4){const I=_[F-3]*77+_[F-2]*152+_[F-1]*28;p[F]=b?p[F]*b[I>>8]>>8:p[F]*I>>16}}function j(_,p,b,M,F,I,q,B,v,C,L){const V=!!I,W=V?I[0]:0,Z=V?I[1]:0,$=V?I[2]:0,ce=F==="Luminosity"?R:P,de=Math.min(M,Math.ceil(1048576/b));for(let he=0;he<M;he+=de){const fe=Math.min(de,M-he),re=_.getImageData(B-C,he+(v-L),b,fe),le=p.getImageData(B,he+v,b,fe);V&&D(re.data,W,Z,$),ce(re.data,le.data,q),p.putImageData(le,B,he+v)}}function w(_,p,b,M){const F=M[0],I=M[1],q=M[2]-F,B=M[3]-I;q===0||B===0||(j(p.context,b,q,B,p.subtype,p.backdrop,p.transferMap,F,I,p.offsetX,p.offsetY),_.save(),_.globalAlpha=1,_.globalCompositeOperation="source-over",_.setTransform(1,0,0,1,0,0),_.drawImage(b.canvas,0,0),_.restore())}function N(_,p){const b=m.Util.singularValueDecompose2dScale(_);b[0]=Math.fround(b[0]),b[1]=Math.fround(b[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return p!==void 0?p:b[0]<=M||b[1]<=M}const H=["butt","round","square"],X=["miter","round","bevel"],G={},U={};class k{constructor(p,b,M,F,I,{optionalContentConfig:q,markedContentStack:B=null},v,C){this.ctx=p,this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=M,this.canvasFactory=F,this.filterFactory=I,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=B||[],this.optionalContentConfig=q,this.cachedCanvases=new t(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=v,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=C,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(p,b=null){return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):b}beginDrawing({transform:p,viewport:b,transparency:M=!1,background:F=null}){const I=this.ctx.canvas.width,q=this.ctx.canvas.height,B=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,I,q),this.ctx.fillStyle=B,M){const v=this.cachedCanvases.getCanvas("transparent",I,q);this.compositeCtx=this.ctx,this.transparentCanvas=v.canvas,this.ctx=v.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),p&&(this.ctx.transform(...p),this.outputScaleX=p[0],this.outputScaleY=p[0]),this.ctx.transform(...b.transform),this.viewportScale=b.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(p,b,M,F){const I=p.argsArray,q=p.fnArray;let B=b||0;const v=I.length;if(v===B)return B;const C=v-B>a&&typeof M=="function",L=C?Date.now()+n:0;let V=0;const W=this.commonObjs,Z=this.objs;let $;for(;;){if(F!==void 0&&B===F.nextBreakPoint)return F.breakIt(B,M),B;if($=q[B],$!==m.OPS.dependency)this[$].apply(this,I[B]);else for(const ce of I[B]){const _e=ce.startsWith("g_")?W:Z;if(!_e.has(ce))return _e.get(ce,M),B}if(B++,B===v)return B;if(C&&++V>a){if(Date.now()>L)return M(),B;V=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const b of p.values())typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement&&(b.width=b.height=0);p.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const p=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(p!=="none"){const b=this.ctx.filter;this.ctx.filter=p,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=b}}}_scaleImage(p,b){const M=p.width,F=p.height;let I=Math.max(Math.hypot(b[0],b[1]),1),q=Math.max(Math.hypot(b[2],b[3]),1),B=M,v=F,C="prescale1",L,V;for(;I>2&&B>1||q>2&&v>1;){let W=B,Z=v;I>2&&B>1&&(W=B>=16384?Math.floor(B/2)-1||1:Math.ceil(B/2),I/=B/W),q>2&&v>1&&(Z=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v)/2,q/=v/Z),L=this.cachedCanvases.getCanvas(C,W,Z),V=L.context,V.clearRect(0,0,W,Z),V.drawImage(p,0,0,B,v,0,0,W,Z),p=L.canvas,B=W,v=Z,C=C==="prescale1"?"prescale2":"prescale1"}return{img:p,paintWidth:B,paintHeight:v}}_createMaskCanvas(p){const b=this.ctx,{width:M,height:F}=p,I=this.current.fillColor,q=this.current.patternFill,B=(0,y.getCurrentTransform)(b);let v,C,L,V;if((p.bitmap||p.data)&&p.count>1){const ve=p.bitmap||p.data.buffer;C=JSON.stringify(q?B:[B.slice(0,4),I]),v=this._cachedBitmapsMap.get(ve),v||(v=new Map,this._cachedBitmapsMap.set(ve,v));const be=v.get(C);if(be&&!q){const ke=Math.round(Math.min(B[0],B[2])+B[4]),Le=Math.round(Math.min(B[1],B[3])+B[5]);return{canvas:be,offsetX:ke,offsetY:Le}}L=be}L||(V=this.cachedCanvases.getCanvas("maskCanvas",M,F),E(V.context,p));let W=m.Util.transform(B,[1/M,0,0,-1/F,0,0]);W=m.Util.transform(W,[1,0,0,1,0,-F]);const Z=m.Util.applyTransform([0,0],W),$=m.Util.applyTransform([M,F],W),ce=m.Util.normalizeRect([Z[0],Z[1],$[0],$[1]]),_e=Math.round(ce[2]-ce[0])||1,de=Math.round(ce[3]-ce[1])||1,he=this.cachedCanvases.getCanvas("fillCanvas",_e,de),fe=he.context,re=Math.min(Z[0],$[0]),le=Math.min(Z[1],$[1]);fe.translate(-re,-le),fe.transform(...W),L||(L=this._scaleImage(V.canvas,(0,y.getCurrentTransformInverse)(fe)),L=L.img,v&&q&&v.set(C,L)),fe.imageSmoothingEnabled=N((0,y.getCurrentTransform)(fe),p.interpolate),c(fe,L,0,0,L.width,L.height,0,0,M,F),fe.globalCompositeOperation="source-in";const Se=m.Util.transform((0,y.getCurrentTransformInverse)(fe),[1,0,0,1,-re,-le]);return fe.fillStyle=q?I.getPattern(b,this,Se,o.PathType.FILL):I,fe.fillRect(0,0,M,F),v&&!q&&(this.cachedCanvases.delete("fillCanvas"),v.set(C,he.canvas)),{canvas:he.canvas,offsetX:Math.round(re),offsetY:Math.round(le)}}setLineWidth(p){p!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=p,this.ctx.lineWidth=p}setLineCap(p){this.ctx.lineCap=H[p]}setLineJoin(p){this.ctx.lineJoin=X[p]}setMiterLimit(p){this.ctx.miterLimit=p}setDash(p,b){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(p),M.lineDashOffset=b)}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[b,M]of p)switch(b){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const p=this.inSMaskMode;this.current.activeSMask&&!p?this.beginSMaskMode():!this.current.activeSMask&&p&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const p=this.ctx.canvas.width,b=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(M,p,b);this.suspendedCtx=this.ctx,this.ctx=F.context;const I=this.ctx;I.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),g(this.suspendedCtx,I),e(I,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(p){if(!this.current.activeSMask)return;p?(p[0]=Math.floor(p[0]),p[1]=Math.floor(p[1]),p[2]=Math.ceil(p[2]),p[3]=Math.ceil(p[3])):p=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const b=this.current.activeSMask,M=this.suspendedCtx;w(M,b,this.ctx,p),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(g(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const p=this.current;this.stateStack.push(p),this.current=p.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),g(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(p,b,M,F,I,q){this.ctx.transform(p,b,M,F,I,q),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(p,b,M){const F=this.ctx,I=this.current;let q=I.x,B=I.y,v,C;const L=(0,y.getCurrentTransform)(F),V=L[0]===0&&L[3]===0||L[1]===0&&L[2]===0,W=V?M.slice(0):null;for(let Z=0,$=0,ce=p.length;Z<ce;Z++)switch(p[Z]|0){case m.OPS.rectangle:q=b[$++],B=b[$++];const _e=b[$++],de=b[$++],he=q+_e,fe=B+de;F.moveTo(q,B),_e===0||de===0?F.lineTo(he,fe):(F.lineTo(he,B),F.lineTo(he,fe),F.lineTo(q,fe)),V||I.updateRectMinMax(L,[q,B,he,fe]),F.closePath();break;case m.OPS.moveTo:q=b[$++],B=b[$++],F.moveTo(q,B),V||I.updatePathMinMax(L,q,B);break;case m.OPS.lineTo:q=b[$++],B=b[$++],F.lineTo(q,B),V||I.updatePathMinMax(L,q,B);break;case m.OPS.curveTo:v=q,C=B,q=b[$+4],B=b[$+5],F.bezierCurveTo(b[$],b[$+1],b[$+2],b[$+3],q,B),I.updateCurvePathMinMax(L,v,C,b[$],b[$+1],b[$+2],b[$+3],q,B,W),$+=6;break;case m.OPS.curveTo2:v=q,C=B,F.bezierCurveTo(q,B,b[$],b[$+1],b[$+2],b[$+3]),I.updateCurvePathMinMax(L,v,C,q,B,b[$],b[$+1],b[$+2],b[$+3],W),q=b[$+2],B=b[$+3],$+=4;break;case m.OPS.curveTo3:v=q,C=B,q=b[$+2],B=b[$+3],F.bezierCurveTo(b[$],b[$+1],q,B,q,B),I.updateCurvePathMinMax(L,v,C,b[$],b[$+1],q,B,q,B,W),$+=4;break;case m.OPS.closePath:F.closePath();break}V&&I.updateScalingPathMinMax(L,W),I.setCurrentPoint(q,B)}closePath(){this.ctx.closePath()}stroke(p=!0){const b=this.ctx,M=this.current.strokeColor;b.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&M?.getPattern?(b.save(),b.strokeStyle=M.getPattern(b,this,(0,y.getCurrentTransformInverse)(b),o.PathType.STROKE),this.rescaleAndStroke(!1),b.restore()):this.rescaleAndStroke(!0)),p&&this.consumePath(this.current.getClippedPathBoundingBox()),b.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(p=!0){const b=this.ctx,M=this.current.fillColor,F=this.current.patternFill;let I=!1;F&&(b.save(),b.fillStyle=M.getPattern(b,this,(0,y.getCurrentTransformInverse)(b),o.PathType.FILL),I=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill()),I&&b.restore(),p&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=U}beginText(){this.current.textMatrix=m.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const p=this.pendingTextPaths,b=this.ctx;if(p===void 0){b.beginPath();return}b.save(),b.beginPath();for(const M of p)b.setTransform(...M.transform),b.translate(M.x,M.y),M.addToPath(b,M.fontSize);b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths}setCharSpacing(p){this.current.charSpacing=p}setWordSpacing(p){this.current.wordSpacing=p}setHScale(p){this.current.textHScale=p/100}setLeading(p){this.current.leading=-p}setFont(p,b){const M=this.commonObjs.get(p),F=this.current;if(!M)throw new Error(`Can't find font for ${p}`);if(F.fontMatrix=M.fontMatrix||m.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,m.warn)("Invalid font matrix for font "+p),b<0?(b=-b,F.fontDirection=-1):F.fontDirection=1,this.current.font=M,this.current.fontSize=b,M.isType3Font)return;const I=M.loadedName||"sans-serif",q=M.systemFontInfo?.css||`"${I}", ${M.fallbackName}`;let B="normal";M.black?B="900":M.bold&&(B="bold");const v=M.italic?"italic":"normal";let C=b;b<z?C=z:b>K&&(C=K),this.current.fontSizeScale=b/C,this.ctx.font=`${v} ${B} ${C}px ${q}`}setTextRenderingMode(p){this.current.textRenderingMode=p}setTextRise(p){this.current.textRise=p}moveText(p,b){this.current.x=this.current.lineX+=p,this.current.y=this.current.lineY+=b}setLeadingMoveText(p,b){this.setLeading(-b),this.moveText(p,b)}setTextMatrix(p,b,M,F,I,q){this.current.textMatrix=[p,b,M,F,I,q],this.current.textMatrixScale=Math.hypot(p,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(p,b,M,F){const I=this.ctx,q=this.current,B=q.font,v=q.textRenderingMode,C=q.fontSize/q.fontSizeScale,L=v&m.TextRenderingMode.FILL_STROKE_MASK,V=!!(v&m.TextRenderingMode.ADD_TO_PATH_FLAG),W=q.patternFill&&!B.missingFile;let Z;(B.disableFontFace||V||W)&&(Z=B.getPathGenerator(this.commonObjs,p)),B.disableFontFace||W?(I.save(),I.translate(b,M),I.beginPath(),Z(I,C),F&&I.setTransform(...F),(L===m.TextRenderingMode.FILL||L===m.TextRenderingMode.FILL_STROKE)&&I.fill(),(L===m.TextRenderingMode.STROKE||L===m.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((L===m.TextRenderingMode.FILL||L===m.TextRenderingMode.FILL_STROKE)&&I.fillText(p,b,M),(L===m.TextRenderingMode.STROKE||L===m.TextRenderingMode.FILL_STROKE)&&I.strokeText(p,b,M)),V&&(this.pendingTextPaths||=[]).push({transform:(0,y.getCurrentTransform)(I),x:b,y:M,fontSize:C,addToPath:Z})}get isFontSubpixelAAEnabled(){const{context:p}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);p.scale(1.5,1),p.fillText("I",0,10);const b=p.getImageData(0,0,10,10).data;let M=!1;for(let F=3;F<b.length;F+=4)if(b[F]>0&&b[F]<255){M=!0;break}return(0,m.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(p){const b=this.current,M=b.font;if(M.isType3Font)return this.showType3Text(p);const F=b.fontSize;if(F===0)return;const I=this.ctx,q=b.fontSizeScale,B=b.charSpacing,v=b.wordSpacing,C=b.fontDirection,L=b.textHScale*C,V=p.length,W=M.vertical,Z=W?1:-1,$=M.defaultVMetrics,ce=F*b.fontMatrix[0],_e=b.textRenderingMode===m.TextRenderingMode.FILL&&!M.disableFontFace&&!b.patternFill;I.save(),I.transform(...b.textMatrix),I.translate(b.x,b.y+b.textRise),C>0?I.scale(L,-1):I.scale(L,1);let de;if(b.patternFill){I.save();const Se=b.fillColor.getPattern(I,this,(0,y.getCurrentTransformInverse)(I),o.PathType.FILL);de=(0,y.getCurrentTransform)(I),I.restore(),I.fillStyle=Se}let he=b.lineWidth;const fe=b.textMatrixScale;if(fe===0||he===0){const Se=b.textRenderingMode&m.TextRenderingMode.FILL_STROKE_MASK;(Se===m.TextRenderingMode.STROKE||Se===m.TextRenderingMode.FILL_STROKE)&&(he=this.getSinglePixelWidth())}else he/=fe;if(q!==1&&(I.scale(q,q),he/=q),I.lineWidth=he,M.isInvalidPDFjsFont){const Se=[];let ve=0;for(const be of p)Se.push(be.unicode),ve+=be.width;I.fillText(Se.join(""),0,0),b.x+=ve*ce*L,I.restore(),this.compose();return}let re=0,le;for(le=0;le<V;++le){const Se=p[le];if(typeof Se=="number"){re+=Z*Se*F/1e3;continue}let ve=!1;const be=(Se.isSpace?v:0)+B,ke=Se.fontChar,Le=Se.accent;let Ue,tt,Je=Se.width;if(W){const rt=Se.vmetric||$,ft=-(Se.vmetric?rt[1]:Je*.5)*ce,st=rt[2]*ce;Je=rt?-rt[0]:Je,Ue=ft/q,tt=(re+st)/q}else Ue=re/q,tt=0;if(M.remeasure&&Je>0){const rt=I.measureText(ke).width*1e3/F*q;if(Je<rt&&this.isFontSubpixelAAEnabled){const ft=Je/rt;ve=!0,I.save(),I.scale(ft,1),Ue/=ft}else Je!==rt&&(Ue+=(Je-rt)/2e3*F/q)}if(this.contentVisible&&(Se.isInFont||M.missingFile)){if(_e&&!Le)I.fillText(ke,Ue,tt);else if(this.paintChar(ke,Ue,tt,de),Le){const rt=Ue+F*Le.offset.x/q,ft=tt-F*Le.offset.y/q;this.paintChar(Le.fontChar,rt,ft,de)}}const gt=W?Je*ce-be*C:Je*ce+be*C;re+=gt,ve&&I.restore()}W?b.y-=re:b.x+=re*L,I.restore(),this.compose()}showType3Text(p){const b=this.ctx,M=this.current,F=M.font,I=M.fontSize,q=M.fontDirection,B=F.vertical?1:-1,v=M.charSpacing,C=M.wordSpacing,L=M.textHScale*q,V=M.fontMatrix||m.FONT_IDENTITY_MATRIX,W=p.length,Z=M.textRenderingMode===m.TextRenderingMode.INVISIBLE;let $,ce,_e,de;if(!(Z||I===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,b.save(),b.transform(...M.textMatrix),b.translate(M.x,M.y),b.scale(L,q),$=0;$<W;++$){if(ce=p[$],typeof ce=="number"){de=B*ce*I/1e3,this.ctx.translate(de,0),M.x+=de*L;continue}const he=(ce.isSpace?C:0)+v,fe=F.charProcOperatorList[ce.operatorListId];if(!fe){(0,m.warn)(`Type3 character "${ce.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ce,this.save(),b.scale(I,I),b.transform(...V),this.executeOperatorList(fe),this.restore()),_e=m.Util.applyTransform([ce.width,0],V)[0]*I+he,b.translate(_e,0),M.x+=_e*L}b.restore(),this.processingType3=null}}setCharWidth(p,b){}setCharWidthAndBounds(p,b,M,F,I,q){this.ctx.rect(M,F,I-M,q-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(p){let b;if(p[0]==="TilingPattern"){const M=p[1],F=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),I={createCanvasGraphics:q=>new k(q,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};b=new o.TilingPattern(p,M,this.ctx,I,F)}else b=this._getPattern(p[1],p[2]);return b}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(p,b,M){const F=m.Util.makeHexColor(p,b,M);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(p,b,M){const F=m.Util.makeHexColor(p,b,M);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(p,b=null){let M;return this.cachedPatterns.has(p)?M=this.cachedPatterns.get(p):(M=(0,o.getShadingPattern)(this.getObject(p)),this.cachedPatterns.set(p,M)),b&&(M.matrix=b),M}shadingFill(p){if(!this.contentVisible)return;const b=this.ctx;this.save();const M=this._getPattern(p);b.fillStyle=M.getPattern(b,this,(0,y.getCurrentTransformInverse)(b),o.PathType.SHADING);const F=(0,y.getCurrentTransformInverse)(b);if(F){const{width:I,height:q}=b.canvas,[B,v,C,L]=m.Util.getAxialAlignedBoundingBox([0,0,I,q],F);this.ctx.fillRect(B,v,C-B,L-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,m.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,m.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(p,b){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(p)&&p.length===6&&this.transform(...p),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),b)){const M=b[2]-b[0],F=b[3]-b[1];this.ctx.rect(b[0],b[1],M,F),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),b),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(p){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const b=this.ctx;p.isolated||(0,m.info)("TODO: Support non-isolated groups."),p.knockout&&(0,m.warn)("Knockout groups not supported.");const M=(0,y.getCurrentTransform)(b);if(p.matrix&&b.transform(...p.matrix),!p.bbox)throw new Error("Bounding box is required.");let F=m.Util.getAxialAlignedBoundingBox(p.bbox,(0,y.getCurrentTransform)(b));const I=[0,0,b.canvas.width,b.canvas.height];F=m.Util.intersect(F,I)||[0,0,0,0];const q=Math.floor(F[0]),B=Math.floor(F[1]);let v=Math.max(Math.ceil(F[2])-q,1),C=Math.max(Math.ceil(F[3])-B,1),L=1,V=1;v>h&&(L=v/h,v=h),C>h&&(V=C/h,C=h),this.current.startNewPathAndClipBox([0,0,v,C]);let W="groupAt"+this.groupLevel;p.smask&&(W+="_smask_"+this.smaskCounter++%2);const Z=this.cachedCanvases.getCanvas(W,v,C),$=Z.context;$.scale(1/L,1/V),$.translate(-q,-B),$.transform(...M),p.smask?this.smaskStack.push({canvas:Z.canvas,context:$,offsetX:q,offsetY:B,scaleX:L,scaleY:V,subtype:p.smask.subtype,backdrop:p.smask.backdrop,transferMap:p.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(q,B),b.scale(L,V),b.save()),g(b,$),this.ctx=$,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++}endGroup(p){if(!this.contentVisible)return;this.groupLevel--;const b=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,p.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const I=m.Util.getAxialAlignedBoundingBox([0,0,b.canvas.width,b.canvas.height],F);this.ctx.drawImage(b.canvas,0,0),this.ctx.restore(),this.compose(I)}}beginAnnotation(p,b,M,F,I){if(this.#e(),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(b)&&b.length===4){const q=b[2]-b[0],B=b[3]-b[1];if(I&&this.annotationCanvasMap){M=M.slice(),M[4]-=b[0],M[5]-=b[1],b=b.slice(),b[0]=b[1]=0,b[2]=q,b[3]=B;const[v,C]=m.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:L}=this,V=Math.ceil(q*this.outputScaleX*L),W=Math.ceil(B*this.outputScaleY*L);this.annotationCanvas=this.canvasFactory.create(V,W);const{canvas:Z,context:$}=this.annotationCanvas;this.annotationCanvasMap.set(p,Z),this.annotationCanvas.savedCtx=this.ctx,this.ctx=$,this.ctx.save(),this.ctx.setTransform(v,0,0,-C,0,B*C),A(this.ctx)}else A(this.ctx),this.ctx.rect(b[0],b[1],q,B),this.ctx.clip(),this.endPath()}this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(p){if(!this.contentVisible)return;const b=p.count;p=this.getObject(p.data,p),p.count=b;const M=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=s(p)),F.compiled)){F.compiled(M);return}const I=this._createMaskCanvas(p),q=I.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(q,I.offsetX,I.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(p,b,M=0,F=0,I,q){if(!this.contentVisible)return;p=this.getObject(p.data,p);const B=this.ctx;B.save();const v=(0,y.getCurrentTransform)(B);B.transform(b,M,F,I,0,0);const C=this._createMaskCanvas(p);B.setTransform(1,0,0,1,C.offsetX-v[4],C.offsetY-v[5]);for(let L=0,V=q.length;L<V;L+=2){const W=m.Util.transform(v,[b,M,F,I,q[L],q[L+1]]),[Z,$]=m.Util.applyTransform([0,0],W);B.drawImage(C.canvas,Z,$)}B.restore(),this.compose()}paintImageMaskXObjectGroup(p){if(!this.contentVisible)return;const b=this.ctx,M=this.current.fillColor,F=this.current.patternFill;for(const I of p){const{data:q,width:B,height:v,transform:C}=I,L=this.cachedCanvases.getCanvas("maskCanvas",B,v),V=L.context;V.save();const W=this.getObject(q,I);E(V,W),V.globalCompositeOperation="source-in",V.fillStyle=F?M.getPattern(V,this,(0,y.getCurrentTransformInverse)(b),o.PathType.FILL):M,V.fillRect(0,0,B,v),V.restore(),b.save(),b.transform(...C),b.scale(1,-1),c(b,L.canvas,0,0,B,v,0,-1,1,1),b.restore()}this.compose()}paintImageXObject(p){if(!this.contentVisible)return;const b=this.getObject(p);if(!b){(0,m.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(b)}paintImageXObjectRepeat(p,b,M,F){if(!this.contentVisible)return;const I=this.getObject(p);if(!I){(0,m.warn)("Dependent image isn't ready yet");return}const q=I.width,B=I.height,v=[];for(let C=0,L=F.length;C<L;C+=2)v.push({transform:[b,0,0,M,F[C],F[C+1]],x:0,y:0,w:q,h:B});this.paintInlineImageXObjectGroup(I,v)}applyTransferMapsToCanvas(p){return this.current.transferMaps!=="none"&&(p.filter=this.current.transferMaps,p.drawImage(p.canvas,0,0),p.filter="none"),p.canvas}applyTransferMapsToBitmap(p){if(this.current.transferMaps==="none")return p.bitmap;const{bitmap:b,width:M,height:F}=p,I=this.cachedCanvases.getCanvas("inlineImage",M,F),q=I.context;return q.filter=this.current.transferMaps,q.drawImage(b,0,0),q.filter="none",I.canvas}paintInlineImageXObject(p){if(!this.contentVisible)return;const b=p.width,M=p.height,F=this.ctx;if(this.save(),!m.isNodeJS){const{filter:B}=F;B!=="none"&&B!==""&&(F.filter="none")}F.scale(1/b,-1/M);let I;if(p.bitmap)I=this.applyTransferMapsToBitmap(p);else if(typeof HTMLElement=="function"&&p instanceof HTMLElement||!p.data)I=p;else{const v=this.cachedCanvases.getCanvas("inlineImage",b,M).context;x(v,p),I=this.applyTransferMapsToCanvas(v)}const q=this._scaleImage(I,(0,y.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=N((0,y.getCurrentTransform)(F),p.interpolate),c(F,q.img,0,0,q.paintWidth,q.paintHeight,0,-M,b,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(p,b){if(!this.contentVisible)return;const M=this.ctx;let F;if(p.bitmap)F=p.bitmap;else{const I=p.width,q=p.height,v=this.cachedCanvases.getCanvas("inlineImage",I,q).context;x(v,p),F=this.applyTransferMapsToCanvas(v)}for(const I of b)M.save(),M.transform(...I.transform),M.scale(1,-1),c(M,F,I.x,I.y,I.w,I.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(p){}markPointProps(p,b){}beginMarkedContent(p){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(p,b){p==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(b)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(p){const b=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(p);const M=this.ctx;this.pendingClip&&(b||(this.pendingClip===U?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const p=(0,y.getCurrentTransform)(this.ctx);if(p[1]===0&&p[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(p[0]),Math.abs(p[3]));else{const b=Math.abs(p[0]*p[3]-p[2]*p[1]),M=Math.hypot(p[0],p[2]),F=Math.hypot(p[1],p[3]);this._cachedGetSinglePixelWidth=Math.max(M,F)/b}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:p}=this.current,{a:b,b:M,c:F,d:I}=this.ctx.getTransform();let q,B;if(M===0&&F===0){const v=Math.abs(b),C=Math.abs(I);if(v===C)if(p===0)q=B=1/v;else{const L=v*p;q=B=L<1?1/L:1}else if(p===0)q=1/v,B=1/C;else{const L=v*p,V=C*p;q=L<1?1/L:1,B=V<1?1/V:1}}else{const v=Math.abs(b*I-M*F),C=Math.hypot(b,M),L=Math.hypot(F,I);if(p===0)q=L/v,B=C/v;else{const V=p*v;q=L>V?L/V:1,B=C>V?C/V:1}}this._cachedScaleForStroking[0]=q,this._cachedScaleForStroking[1]=B}return this._cachedScaleForStroking}rescaleAndStroke(p){const{ctx:b}=this,{lineWidth:M}=this.current,[F,I]=this.getScaleForStroking();if(b.lineWidth=M||1,F===1&&I===1){b.stroke();return}const q=b.getLineDash();if(p&&b.save(),b.scale(F,I),q.length>0){const B=Math.max(F,I);b.setLineDash(q.map(v=>v/B)),b.lineDashOffset/=B}b.stroke(),p&&b.restore()}isContentVisible(){for(let p=this.markedContentStack.length-1;p>=0;p--)if(!this.markedContentStack[p].visible)return!1;return!0}}d.CanvasGraphics=k;for(const _ in m.OPS)k.prototype[_]!==void 0&&(k.prototype[m.OPS[_]]=k.prototype[_])}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TilingPattern=d.PathType=void 0,d.getShadingPattern=l;var m=i(1),y=i(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};d.PathType=o;function T(c,s){if(!s)return;const f=s[2]-s[0],x=s[3]-s[1],E=new Path2D;E.rect(s[0],s[1],f,x),c.clip(E)}class z{constructor(){this.constructor===z&&(0,m.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,m.unreachable)("Abstract method `getPattern` called.")}}class K extends z{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let f;this._type==="axial"?f=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(f=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)f.addColorStop(x[0],x[1]);return f}getPattern(s,f,x,E){let g;if(E===o.STROKE||E===o.FILL){const A=f.current.getClippedPathBoundingBox(E,(0,y.getCurrentTransform)(s))||[0,0,0,0],D=Math.ceil(A[2]-A[0])||1,P=Math.ceil(A[3]-A[1])||1,R=f.cachedCanvases.getCanvas("pattern",D,P,!0),j=R.context;j.clearRect(0,0,j.canvas.width,j.canvas.height),j.beginPath(),j.rect(0,0,j.canvas.width,j.canvas.height),j.translate(-A[0],-A[1]),x=m.Util.transform(x,[1,0,0,1,A[0],A[1]]),j.transform(...f.baseTransform),this.matrix&&j.transform(...this.matrix),T(j,this._bbox),j.fillStyle=this._createGradient(j),j.fill(),g=s.createPattern(R.canvas,"no-repeat");const w=new DOMMatrix(x);g.setTransform(w)}else T(s,this._bbox),g=this._createGradient(s);return g}}function h(c,s,f,x,E,g,A,D){const P=s.coords,R=s.colors,j=c.data,w=c.width*4;let N;P[f+1]>P[x+1]&&(N=f,f=x,x=N,N=g,g=A,A=N),P[x+1]>P[E+1]&&(N=x,x=E,E=N,N=A,A=D,D=N),P[f+1]>P[x+1]&&(N=f,f=x,x=N,N=g,g=A,A=N);const H=(P[f]+s.offsetX)*s.scaleX,X=(P[f+1]+s.offsetY)*s.scaleY,G=(P[x]+s.offsetX)*s.scaleX,U=(P[x+1]+s.offsetY)*s.scaleY,k=(P[E]+s.offsetX)*s.scaleX,_=(P[E+1]+s.offsetY)*s.scaleY;if(X>=_)return;const p=R[g],b=R[g+1],M=R[g+2],F=R[A],I=R[A+1],q=R[A+2],B=R[D],v=R[D+1],C=R[D+2],L=Math.round(X),V=Math.round(_);let W,Z,$,ce,_e,de,he,fe;for(let re=L;re<=V;re++){if(re<U){const ke=re<X?0:(X-re)/(X-U);W=H-(H-G)*ke,Z=p-(p-F)*ke,$=b-(b-I)*ke,ce=M-(M-q)*ke}else{let ke;re>_?ke=1:U===_?ke=0:ke=(U-re)/(U-_),W=G-(G-k)*ke,Z=F-(F-B)*ke,$=I-(I-v)*ke,ce=q-(q-C)*ke}let le;re<X?le=0:re>_?le=1:le=(X-re)/(X-_),_e=H-(H-k)*le,de=p-(p-B)*le,he=b-(b-v)*le,fe=M-(M-C)*le;const Se=Math.round(Math.min(W,_e)),ve=Math.round(Math.max(W,_e));let be=w*re+Se*4;for(let ke=Se;ke<=ve;ke++)le=(W-ke)/(W-_e),le<0?le=0:le>1&&(le=1),j[be++]=Z-(Z-de)*le|0,j[be++]=$-($-he)*le|0,j[be++]=ce-(ce-fe)*le|0,j[be++]=255}}function n(c,s,f){const x=s.coords,E=s.colors;let g,A;switch(s.type){case"lattice":const D=s.verticesPerRow,P=Math.floor(x.length/D)-1,R=D-1;for(g=0;g<P;g++){let j=g*D;for(let w=0;w<R;w++,j++)h(c,f,x[j],x[j+1],x[j+D],E[j],E[j+1],E[j+D]),h(c,f,x[j+D+1],x[j+1],x[j+D],E[j+D+1],E[j+1],E[j+D])}break;case"triangles":for(g=0,A=x.length;g<A;g+=3)h(c,f,x[g],x[g+1],x[g+2],E[g],E[g+1],E[g+2]);break;default:throw new Error("illegal figure")}}class a extends z{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,f,x){const D=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),R=Math.ceil(this._bounds[2])-D,j=Math.ceil(this._bounds[3])-P,w=Math.min(Math.ceil(Math.abs(R*s[0]*1.1)),3e3),N=Math.min(Math.ceil(Math.abs(j*s[1]*1.1)),3e3),H=R/w,X=j/N,G={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-P,scaleX:1/H,scaleY:1/X},U=w+4,k=N+4,_=x.getCanvas("mesh",U,k,!1),p=_.context,b=p.createImageData(w,N);if(f){const F=b.data;for(let I=0,q=F.length;I<q;I+=4)F[I]=f[0],F[I+1]=f[1],F[I+2]=f[2],F[I+3]=255}for(const F of this._figures)n(b,F,G);return p.putImageData(b,2,2),{canvas:_.canvas,offsetX:D-2*H,offsetY:P-2*X,scaleX:H,scaleY:X}}getPattern(s,f,x,E){T(s,this._bbox);let g;if(E===o.SHADING)g=m.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(s));else if(g=m.Util.singularValueDecompose2dScale(f.baseTransform),this.matrix){const D=m.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*D[0],g[1]*D[1]]}const A=this._createMeshCanvas(g,E===o.SHADING?null:this._background,f.cachedCanvases);return E!==o.SHADING&&(s.setTransform(...f.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(A.offsetX,A.offsetY),s.scale(A.scaleX,A.scaleY),s.createPattern(A.canvas,"no-repeat")}}class u extends z{getPattern(){return"hotpink"}}function l(c){switch(c[0]){case"RadialAxial":return new K(c);case"Mesh":return new a(c);case"Dummy":return new u}throw new Error(`Unknown IR type: ${c[0]}`)}const e={COLORED:1,UNCOLORED:2};class t{static MAX_PATTERN_SIZE=3e3;constructor(s,f,x,E,g){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=f,this.ctx=x,this.canvasGraphicsFactory=E,this.baseTransform=g}createPatternCanvas(s){const f=this.operatorList,x=this.bbox,E=this.xstep,g=this.ystep,A=this.paintType,D=this.tilingType,P=this.color,R=this.canvasGraphicsFactory;(0,m.info)("TilingType: "+D);const j=x[0],w=x[1],N=x[2],H=x[3],X=m.Util.singularValueDecompose2dScale(this.matrix),G=m.Util.singularValueDecompose2dScale(this.baseTransform),U=[X[0]*G[0],X[1]*G[1]],k=this.getSizeAndScale(E,this.ctx.canvas.width,U[0]),_=this.getSizeAndScale(g,this.ctx.canvas.height,U[1]),p=s.cachedCanvases.getCanvas("pattern",k.size,_.size,!0),b=p.context,M=R.createCanvasGraphics(b);M.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(M,A,P);let F=j,I=w,q=N,B=H;return j<0&&(F=0,q+=Math.abs(j)),w<0&&(I=0,B+=Math.abs(w)),b.translate(-(k.scale*F),-(_.scale*I)),M.transform(k.scale,0,0,_.scale,0,0),b.save(),this.clipBbox(M,F,I,q,B),M.baseTransform=(0,y.getCurrentTransform)(M.ctx),M.executeOperatorList(f),M.endDrawing(),{canvas:p.canvas,scaleX:k.scale,scaleY:_.scale,offsetX:F,offsetY:I}}getSizeAndScale(s,f,x){s=Math.abs(s);const E=Math.max(t.MAX_PATTERN_SIZE,f);let g=Math.ceil(s*x);return g>=E?g=E:x=g/s,{scale:x,size:g}}clipBbox(s,f,x,E,g){const A=E-f,D=g-x;s.ctx.rect(f,x,A,D),s.current.updateRectMinMax((0,y.getCurrentTransform)(s.ctx),[f,x,E,g]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,f,x){const E=s.ctx,g=s.current;switch(f){case e.COLORED:const A=this.ctx;E.fillStyle=A.fillStyle,E.strokeStyle=A.strokeStyle,g.fillColor=A.fillStyle,g.strokeColor=A.strokeStyle;break;case e.UNCOLORED:const D=m.Util.makeHexColor(x[0],x[1],x[2]);E.fillStyle=D,E.strokeStyle=D,g.fillColor=D,g.strokeColor=D;break;default:throw new m.FormatError(`Unsupported paint type: ${f}`)}}getPattern(s,f,x,E){let g=x;E!==o.SHADING&&(g=m.Util.transform(g,f.baseTransform),this.matrix&&(g=m.Util.transform(g,this.matrix)));const A=this.createPatternCanvas(f);let D=new DOMMatrix(g);D=D.translate(A.offsetX,A.offsetY),D=D.scale(1/A.scaleX,1/A.scaleY);const P=s.createPattern(A.canvas,"repeat");return P.setTransform(D),P}}d.TilingPattern=t}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.convertBlackAndWhiteToRGBA=o,d.convertToRGBA=y,d.grayToRGBA=z;var m=i(1);function y(K){switch(K.kind){case m.ImageKind.GRAYSCALE_1BPP:return o(K);case m.ImageKind.RGB_24BPP:return T(K)}return null}function o({src:K,srcPos:h=0,dest:n,width:a,height:u,nonBlackColor:l=4294967295,inverseDecode:e=!1}){const t=m.FeatureTest.isLittleEndian?4278190080:255,[c,s]=e?[l,t]:[t,l],f=a>>3,x=a&7,E=K.length;n=new Uint32Array(n.buffer);let g=0;for(let A=0;A<u;A++){for(const P=h+f;h<P;h++){const R=h<E?K[h]:255;n[g++]=R&128?s:c,n[g++]=R&64?s:c,n[g++]=R&32?s:c,n[g++]=R&16?s:c,n[g++]=R&8?s:c,n[g++]=R&4?s:c,n[g++]=R&2?s:c,n[g++]=R&1?s:c}if(x===0)continue;const D=h<E?K[h++]:255;for(let P=0;P<x;P++)n[g++]=D&1<<7-P?s:c}return{srcPos:h,destPos:g}}function T({src:K,srcPos:h=0,dest:n,destPos:a=0,width:u,height:l}){let e=0;const t=K.length>>2,c=new Uint32Array(K.buffer,h,t);if(m.FeatureTest.isLittleEndian){for(;e<t-2;e+=3,a+=4){const s=c[e],f=c[e+1],x=c[e+2];n[a]=s|4278190080,n[a+1]=s>>>24|f<<8|4278190080,n[a+2]=f>>>16|x<<16|4278190080,n[a+3]=x>>>8|4278190080}for(let s=e*4,f=K.length;s<f;s+=3)n[a++]=K[s]|K[s+1]<<8|K[s+2]<<16|4278190080}else{for(;e<t-2;e+=3,a+=4){const s=c[e],f=c[e+1],x=c[e+2];n[a]=s|255,n[a+1]=s<<24|f>>>8|255,n[a+2]=f<<16|x>>>16|255,n[a+3]=x<<8|255}for(let s=e*4,f=K.length;s<f;s+=3)n[a++]=K[s]<<24|K[s+1]<<16|K[s+2]<<8|255}return{srcPos:h,destPos:a}}function z(K,h){if(m.FeatureTest.isLittleEndian)for(let n=0,a=K.length;n<a;n++)h[n]=K[n]*65793|4278190080;else for(let n=0,a=K.length;n<a;n++)h[n]=K[n]*16843008|255}}),((r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GlobalWorkerOptions=void 0;const i=Object.create(null);d.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MessageHandler=void 0;var m=i(1);const y={DATA:1,ERROR:2},o={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function T(K){switch(K instanceof Error||typeof K=="object"&&K!==null||(0,m.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),K.name){case"AbortException":return new m.AbortException(K.message);case"MissingPDFException":return new m.MissingPDFException(K.message);case"PasswordException":return new m.PasswordException(K.message,K.code);case"UnexpectedResponseException":return new m.UnexpectedResponseException(K.message,K.status);case"UnknownErrorException":return new m.UnknownErrorException(K.message,K.details);default:return new m.UnknownErrorException(K.message,K.toString())}}class z{constructor(h,n,a){this.sourceName=h,this.targetName=n,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const l=u.data;if(l.targetName!==this.sourceName)return;if(l.stream){this.#t(l);return}if(l.callback){const t=l.callbackId,c=this.callbackCapabilities[t];if(!c)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],l.callback===y.DATA)c.resolve(l.data);else if(l.callback===y.ERROR)c.reject(T(l.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[l.action];if(!e)throw new Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){const t=this.sourceName,c=l.sourceName;new Promise(function(s){s(e(l.data))}).then(function(s){a.postMessage({sourceName:t,targetName:c,callback:y.DATA,callbackId:l.callbackId,data:s})},function(s){a.postMessage({sourceName:t,targetName:c,callback:y.ERROR,callbackId:l.callbackId,reason:T(s)})});return}if(l.streamId){this.#e(l);return}e(l.data)},a.addEventListener("message",this._onComObjOnMessage)}on(h,n){const a=this.actionHandler;if(a[h])throw new Error(`There is already an actionName called "${h}"`);a[h]=n}send(h,n,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:n},a)}sendWithPromise(h,n,a){const u=this.callbackId++,l=new m.PromiseCapability;this.callbackCapabilities[u]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:u,data:n},a)}catch(e){l.reject(e)}return l.promise}sendWithStream(h,n,a,u){const l=this.streamId++,e=this.sourceName,t=this.targetName,c=this.comObj;return new ReadableStream({start:s=>{const f=new m.PromiseCapability;return this.streamControllers[l]={controller:s,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:e,targetName:t,action:h,streamId:l,data:n,desiredSize:s.desiredSize},u),f.promise},pull:s=>{const f=new m.PromiseCapability;return this.streamControllers[l].pullCall=f,c.postMessage({sourceName:e,targetName:t,stream:o.PULL,streamId:l,desiredSize:s.desiredSize}),f.promise},cancel:s=>{(0,m.assert)(s instanceof Error,"cancel must have a valid reason");const f=new m.PromiseCapability;return this.streamControllers[l].cancelCall=f,this.streamControllers[l].isClosed=!0,c.postMessage({sourceName:e,targetName:t,stream:o.CANCEL,streamId:l,reason:T(s)}),f.promise}},a)}#e(h){const n=h.streamId,a=this.sourceName,u=h.sourceName,l=this.comObj,e=this,t=this.actionHandler[h.action],c={enqueue(s,f=1,x){if(this.isCancelled)return;const E=this.desiredSize;this.desiredSize-=f,E>0&&this.desiredSize<=0&&(this.sinkCapability=new m.PromiseCapability,this.ready=this.sinkCapability.promise),l.postMessage({sourceName:a,targetName:u,stream:o.ENQUEUE,streamId:n,chunk:s},x)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:a,targetName:u,stream:o.CLOSE,streamId:n}),delete e.streamSinks[n])},error(s){(0,m.assert)(s instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:a,targetName:u,stream:o.ERROR,streamId:n,reason:T(s)}))},sinkCapability:new m.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,new Promise(function(s){s(t(h.data,c))}).then(function(){l.postMessage({sourceName:a,targetName:u,stream:o.START_COMPLETE,streamId:n,success:!0})},function(s){l.postMessage({sourceName:a,targetName:u,stream:o.START_COMPLETE,streamId:n,reason:T(s)})})}#t(h){const n=h.streamId,a=this.sourceName,u=h.sourceName,l=this.comObj,e=this.streamControllers[n],t=this.streamSinks[n];switch(h.stream){case o.START_COMPLETE:h.success?e.startCall.resolve():e.startCall.reject(T(h.reason));break;case o.PULL_COMPLETE:h.success?e.pullCall.resolve():e.pullCall.reject(T(h.reason));break;case o.PULL:if(!t){l.postMessage({sourceName:a,targetName:u,stream:o.PULL_COMPLETE,streamId:n,success:!0});break}t.desiredSize<=0&&h.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=h.desiredSize,new Promise(function(c){c(t.onPull?.())}).then(function(){l.postMessage({sourceName:a,targetName:u,stream:o.PULL_COMPLETE,streamId:n,success:!0})},function(c){l.postMessage({sourceName:a,targetName:u,stream:o.PULL_COMPLETE,streamId:n,reason:T(c)})});break;case o.ENQUEUE:if((0,m.assert)(e,"enqueue should have stream controller"),e.isClosed)break;e.controller.enqueue(h.chunk);break;case o.CLOSE:if((0,m.assert)(e,"close should have stream controller"),e.isClosed)break;e.isClosed=!0,e.controller.close(),this.#n(e,n);break;case o.ERROR:(0,m.assert)(e,"error should have stream controller"),e.controller.error(T(h.reason)),this.#n(e,n);break;case o.CANCEL_COMPLETE:h.success?e.cancelCall.resolve():e.cancelCall.reject(T(h.reason)),this.#n(e,n);break;case o.CANCEL:if(!t)break;new Promise(function(c){c(t.onCancel?.(T(h.reason)))}).then(function(){l.postMessage({sourceName:a,targetName:u,stream:o.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){l.postMessage({sourceName:a,targetName:u,stream:o.CANCEL_COMPLETE,streamId:n,reason:T(c)})}),t.sinkCapability.reject(T(h.reason)),t.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#n(h,n){await Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}d.MessageHandler=z}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Metadata=void 0;var m=i(1);class y{#e;#t;constructor({parsedData:T,rawData:z}){this.#e=T,this.#t=z}getRaw(){return this.#t}get(T){return this.#e.get(T)??null}getAll(){return(0,m.objectFromMap)(this.#e)}has(T){return this.#e.has(T)}}d.Metadata=y}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OptionalContentConfig=void 0;var m=i(1),y=i(8);const o=Symbol("INTERNAL");class T{#e=!0;constructor(h,n){this.name=h,this.intent=n}get visible(){return this.#e}_setVisible(h,n){h!==o&&(0,m.unreachable)("Internal method `_setVisible` called."),this.#e=n}}class z{#e=null;#t=new Map;#n=null;#r=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#r=h.order;for(const n of h.groups)this.#t.set(n.id,new T(n.name,n.intent));if(h.baseState==="OFF")for(const n of this.#t.values())n._setVisible(o,!1);for(const n of h.on)this.#t.get(n)._setVisible(o,!0);for(const n of h.off)this.#t.get(n)._setVisible(o,!1);this.#n=this.getHash()}}#s(h){const n=h.length;if(n<2)return!0;const a=h[0];for(let u=1;u<n;u++){const l=h[u];let e;if(Array.isArray(l))e=this.#s(l);else if(this.#t.has(l))e=this.#t.get(l).visible;else return(0,m.warn)(`Optional content group not found: ${l}`),!0;switch(a){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return a==="And"}isVisible(h){if(this.#t.size===0)return!0;if(!h)return(0,m.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#t.has(h.id)?this.#t.get(h.id).visible:((0,m.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#s(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const n of h.ids){if(!this.#t.has(n))return(0,m.warn)(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const n of h.ids){if(!this.#t.has(n))return(0,m.warn)(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const n of h.ids){if(!this.#t.has(n))return(0,m.warn)(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const n of h.ids){if(!this.#t.has(n))return(0,m.warn)(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return(0,m.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,m.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,n=!0){if(!this.#t.has(h)){(0,m.warn)(`Optional content group not found: ${h}`);return}this.#t.get(h)._setVisible(o,!!n),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,m.objectFromMap)(this.#t):null}getGroup(h){return this.#t.get(h)||null}getHash(){if(this.#e!==null)return this.#e;const h=new y.MurmurHash3_64;for(const[n,a]of this.#t)h.update(`${n}:${a.visible}`);return this.#e=h.hexdigest()}}d.OptionalContentConfig=z}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFDataTransportStream=void 0;var m=i(1),y=i(6);class o{constructor({length:h,initialData:n,progressiveDone:a=!1,contentDispositionFilename:u=null,disableRange:l=!1,disableStream:e=!1},t){if((0,m.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=u,n?.length>0){const c=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!e,this._isRangeSupported=!l,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((c,s)=>{this._onReceiveData({begin:c,chunk:s})}),this._pdfDataRangeTransport.addProgressListener((c,s)=>{this._onProgress({loaded:c,total:s})}),this._pdfDataRangeTransport.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:n}){const a=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(a):this._queuedChunks.push(a);else{const u=this._rangeReaders.some(function(l){return l._begin!==h?!1:(l._enqueue(a),!0)});(0,m.assert)(u,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const n=this._rangeReaders.indexOf(h);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){(0,m.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new T(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,n){if(n<=this._progressiveDataLength)return null;const a=new z(this,h,n);return this._pdfDataRangeTransport.requestDataRange(h,n),this._rangeReaders.push(a),a}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const n of this._rangeReaders.slice(0))n.cancel(h);this._pdfDataRangeTransport.abort()}}d.PDFDataTransportStream=o;class T{constructor(h,n,a=!1,u=null){this._stream=h,this._done=a||!1,this._filename=(0,y.isPdfFile)(u)?u:null,this._queuedChunks=n||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new m.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class z{constructor(h,n,a){this._stream=h,this._begin=n,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new m.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFetchStream=void 0;var m=i(1),y=i(20);function o(a,u,l){return{method:"GET",headers:a,signal:l.signal,mode:"cors",credentials:u?"include":"same-origin",redirect:"follow"}}function T(a){const u=new Headers;for(const l in a){const e=a[l];e!==void 0&&u.append(l,e)}return u}function z(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:((0,m.warn)(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class K{constructor(u){this.source=u,this.isHttp=/^https?:/i.test(u.url),this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,m.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(u,l){if(l<=this._progressiveDataLength)return null;const e=new n(this,u,l);return this._rangeRequestReaders.push(e),e}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(const l of this._rangeRequestReaders.slice(0))l.cancel(u)}}d.PDFFetchStream=K;class h{constructor(u){this._stream=u,this._reader=null,this._loaded=0,this._filename=null;const l=u.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=new m.PromiseCapability,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=T(this._stream.httpHeaders);const e=l.url;fetch(e,o(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,y.validateResponseStatus)(t.status))throw(0,y.createResponseStatusError)(t.status,e);this._reader=t.body.getReader(),this._headersCapability.resolve();const c=x=>t.headers.get(x),{allowRangeRequests:s,suggestedLength:f}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=f||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new m.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:u,done:l}=await this._reader.read();return l?{value:u,done:l}:(this._loaded+=u.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:z(u),done:!1})}cancel(u){this._reader?.cancel(u),this._abortController.abort()}}class n{constructor(u,l,e){this._stream=u,this._reader=null,this._loaded=0;const t=u.source;this._withCredentials=t.withCredentials||!1,this._readCapability=new m.PromiseCapability,this._isStreamingSupported=!t.disableStream,this._abortController=new AbortController,this._headers=T(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${e-1}`);const c=t.url;fetch(c,o(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!(0,y.validateResponseStatus)(s.status))throw(0,y.createResponseStatusError)(s.status,c);this._readCapability.resolve(),this._reader=s.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:u,done:l}=await this._reader.read();return l?{value:u,done:l}:(this._loaded+=u.byteLength,this.onProgress?.({loaded:this._loaded}),{value:z(u),done:!1})}cancel(u){this._reader?.cancel(u),this._abortController.abort()}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.createResponseStatusError=K,d.extractFilenameFromHeader=z,d.validateRangeRequestCapabilities=T,d.validateResponseStatus=h;var m=i(1),y=i(21),o=i(6);function T({getResponseHeader:n,isHttp:a,rangeChunkSize:u,disableRange:l}){const e={allowRangeRequests:!1,suggestedLength:void 0},t=parseInt(n("Content-Length"),10);return!Number.isInteger(t)||(e.suggestedLength=t,t<=2*u)||l||!a||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(e.allowRangeRequests=!0),e}function z(n){const a=n("Content-Disposition");if(a){let u=(0,y.getFilenameFromContentDispositionHeader)(a);if(u.includes("%"))try{u=decodeURIComponent(u)}catch{}if((0,o.isPdfFile)(u))return u}return null}function K(n,a){return n===404||n===0&&a.startsWith("file:")?new m.MissingPDFException('Missing PDF "'+a+'".'):new m.UnexpectedResponseException(`Unexpected server response (${n}) while retrieving PDF "${a}".`,n)}function h(n){return n===200||n===206}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getFilenameFromContentDispositionHeader=y;var m=i(1);function y(o){let T=!0,z=K("filename\\*","i").exec(o);if(z){z=z[1];let t=u(z);return t=unescape(t),t=l(t),t=e(t),n(t)}if(z=a(o),z){const t=e(z);return n(t)}if(z=K("filename","i").exec(o),z){z=z[1];let t=u(z);return t=e(t),n(t)}function K(t,c){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',c)}function h(t,c){if(t){if(!/^[\x00-\xFF]+$/.test(c))return c;try{const s=new TextDecoder(t,{fatal:!0}),f=(0,m.stringToBytes)(c);c=s.decode(f),T=!1}catch{}}return c}function n(t){return T&&/[\x80-\xff]/.test(t)&&(t=h("utf-8",t),T&&(t=h("iso-8859-1",t))),t}function a(t){const c=[];let s;const f=K("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(s=f.exec(t))!==null;){let[,E,g,A]=s;if(E=parseInt(E,10),E in c){if(E===0)break;continue}c[E]=[g,A]}const x=[];for(let E=0;E<c.length&&E in c;++E){let[g,A]=c[E];A=u(A),g&&(A=unescape(A),E===0&&(A=l(A))),x.push(A)}return x.join("")}function u(t){if(t.startsWith('"')){const c=t.slice(1).split('\\"');for(let s=0;s<c.length;++s){const f=c[s].indexOf('"');f!==-1&&(c[s]=c[s].slice(0,f),c.length=s+1),c[s]=c[s].replaceAll(/\\(.)/g,"$1")}t=c.join('"')}return t}function l(t){const c=t.indexOf("'");if(c===-1)return t;const s=t.slice(0,c),x=t.slice(c+1).replace(/^[^']*'/,"");return h(s,x)}function e(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(c,s,f,x){if(f==="q"||f==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,g){return String.fromCharCode(parseInt(g,16))}),h(s,x);try{x=atob(x)}catch{}return h(s,x)})}return""}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNetworkStream=void 0;var m=i(1),y=i(20);const o=200,T=206;function z(u){const l=u.response;return typeof l!="string"?l:(0,m.stringToBytes)(l).buffer}class K{constructor(l,e={}){this.url=l,this.isHttp=/^https?:/i.test(l),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(l,e,t){const c={begin:l,end:e};for(const s in t)c[s]=t[s];return this.request(c)}requestFull(l){return this.request(l)}request(l){const e=new XMLHttpRequest,t=this.currXhrId++,c=this.pendingRequests[t]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const f=this.httpHeaders[s];f!==void 0&&e.setRequestHeader(s,f)}return this.isHttp&&"begin"in l&&"end"in l?(e.setRequestHeader("Range",`bytes=${l.begin}-${l.end-1}`),c.expectedStatus=T):c.expectedStatus=o,e.responseType="arraybuffer",l.onError&&(e.onerror=function(s){l.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,t),e.onprogress=this.onProgress.bind(this,t),c.onHeadersReceived=l.onHeadersReceived,c.onDone=l.onDone,c.onError=l.onError,c.onProgress=l.onProgress,e.send(null),t}onProgress(l,e){const t=this.pendingRequests[l];t&&t.onProgress?.(e)}onStateChange(l,e){const t=this.pendingRequests[l];if(!t)return;const c=t.xhr;if(c.readyState>=2&&t.onHeadersReceived&&(t.onHeadersReceived(),delete t.onHeadersReceived),c.readyState!==4||!(l in this.pendingRequests))return;if(delete this.pendingRequests[l],c.status===0&&this.isHttp){t.onError?.(c.status);return}const s=c.status||o;if(!(s===o&&t.expectedStatus===T)&&s!==t.expectedStatus){t.onError?.(c.status);return}const x=z(c);if(s===T){const E=c.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);t.onDone({begin:parseInt(g[1],10),chunk:x})}else x?t.onDone({begin:0,chunk:x}):t.onError?.(c.status)}getRequestXhr(l){return this.pendingRequests[l].xhr}isPendingRequest(l){return l in this.pendingRequests}abortRequest(l){const e=this.pendingRequests[l].xhr;delete this.pendingRequests[l],e.abort()}}class h{constructor(l){this._source=l,this._manager=new K(l.url,{httpHeaders:l.httpHeaders,withCredentials:l.withCredentials}),this._rangeChunkSize=l.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(l){const e=this._rangeRequestReaders.indexOf(l);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,m.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new n(this._manager,this._source),this._fullRequestReader}getRangeReader(l,e){const t=new a(this._manager,l,e);return t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(l){this._fullRequestReader?.cancel(l);for(const e of this._rangeRequestReaders.slice(0))e.cancel(l)}}d.PDFNetworkStream=h;class n{constructor(l,e){this._manager=l;const t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=l.requestFull(t),this._headersReceivedCapability=new m.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const l=this._fullRequestId,e=this._manager.getRequestXhr(l),t=f=>e.getResponseHeader(f),{allowRangeRequests:c,suggestedLength:s}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(t),this._isRangeSupported&&this._manager.abortRequest(l),this._headersReceivedCapability.resolve()}_onDone(l){if(l&&(this._requests.length>0?this._requests.shift().resolve({value:l.chunk,done:!1}):this._cachedChunks.push(l.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(l){this._storedError=(0,y.createResponseStatusError)(l,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(l){this.onProgress?.({loaded:l.loaded,total:l.lengthComputable?l.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=new m.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0,this._headersReceivedCapability.reject(l);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(l,e,t){this._manager=l;const c={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._requestId=l.requestRange(e,t,c),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(l){const e=l.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(l){this._storedError=(0,y.createResponseStatusError)(l,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(l){this.isStreamingSupported||this.onProgress?.({loaded:l.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const l=new m.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNodeStream=void 0;var m=i(1),y=i(20);const o=/^file:\/\/\/[a-zA-Z]:\//;function T(t){const c=require$$5,s=c.parse(t);return s.protocol==="file:"||s.host?s:/^[a-z]:[/\\]/i.test(t)?c.parse(`file:///${t}`):(s.host||(s.protocol="file:"),s)}class z{constructor(c){this.source=c,this.url=T(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,m.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new a(this),this._fullRequestReader}getRangeReader(c,s){if(s<=this._progressiveDataLength)return null;const f=this.isFsUrl?new e(this,c,s):new u(this,c,s);return this._rangeRequestReaders.push(f),f}cancelAllRequests(c){this._fullRequestReader?.cancel(c);for(const s of this._rangeRequestReaders.slice(0))s.cancel(c)}}d.PDFNodeStream=z;class K{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=c.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=new m.PromiseCapability,this._headersCapability=new m.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=new m.PromiseCapability,this.read()):(this._loaded+=c.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new m.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new m.PromiseCapability;const s=c.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=new m.PromiseCapability,this.read()):(this._loaded+=c.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function n(t,c){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:c}}class a extends K{constructor(c){super(c);const s=f=>{if(f.statusCode===404){const A=new m.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(f);const x=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:E,suggestedLength:g}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=g||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const f=require$$5;this._request=f.request(n(this._url,c.httpHeaders),s)}else{const f=require$$5;this._request=f.request(n(this._url,c.httpHeaders),s)}this._request.on("error",f=>{this._storedError=f,this._headersCapability.reject(f)}),this._request.end()}}class u extends h{constructor(c,s,f){super(c),this._httpHeaders={};for(const E in c.httpHeaders){const g=c.httpHeaders[E];g!==void 0&&(this._httpHeaders[E]=g)}this._httpHeaders.Range=`bytes=${s}-${f-1}`;const x=E=>{if(E.statusCode===404){const g=new m.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g;return}this._setReadableStream(E)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(n(this._url,this._httpHeaders),x)}else{const E=require$$5;this._request=E.request(n(this._url,this._httpHeaders),x)}this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class l extends K{constructor(c){super(c);let s=decodeURIComponent(this._url.path);o.test(this._url.href)&&(s=s.replace(/^\//,""));const f=require$$5;f.lstat(s,(x,E)=>{if(x){x.code==="ENOENT"&&(x=new m.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=E.size,this._setReadableStream(f.createReadStream(s)),this._headersCapability.resolve()})}}class e extends h{constructor(c,s,f){super(c);let x=decodeURIComponent(this._url.path);o.test(this._url.href)&&(x=x.replace(/^\//,""));const E=require$$5;this._setReadableStream(E.createReadStream(x,{start:s,end:f-1}))}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SVGGraphics=void 0;var m=i(6),y=i(1);const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/1999/xlink",K=["butt","round","square"],h=["miter","round","bevel"],n=function(E,g="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([E],{type:g}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P=`data:${g};base64,`;for(let R=0,j=E.length;R<j;R+=3){const w=E[R]&255,N=E[R+1]&255,H=E[R+2]&255,X=w>>2,G=(w&3)<<4|N>>4,U=R+1<j?(N&15)<<2|H>>6:64,k=R+2<j?H&63:64;P+=D[X]+D[G]+D[U]+D[k]}return P},a=(function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),g=12,A=new Int32Array(256);for(let H=0;H<256;H++){let X=H;for(let G=0;G<8;G++)X=X&1?3988292384^X>>1&2147483647:X>>1&2147483647;A[H]=X}function D(H,X,G){let U=-1;for(let k=X;k<G;k++){const _=(U^H[k])&255,p=A[_];U=U>>>8^p}return U^-1}function P(H,X,G,U){let k=U;const _=X.length;G[k]=_>>24&255,G[k+1]=_>>16&255,G[k+2]=_>>8&255,G[k+3]=_&255,k+=4,G[k]=H.charCodeAt(0)&255,G[k+1]=H.charCodeAt(1)&255,G[k+2]=H.charCodeAt(2)&255,G[k+3]=H.charCodeAt(3)&255,k+=4,G.set(X,k),k+=X.length;const p=D(G,U+4,k);G[k]=p>>24&255,G[k+1]=p>>16&255,G[k+2]=p>>8&255,G[k+3]=p&255}function R(H,X,G){let U=1,k=0;for(let _=X;_<G;++_)U=(U+(H[_]&255))%65521,k=(k+U)%65521;return k<<16|U}function j(H){if(!y.isNodeJS)return w(H);try{const X=parseInt(process.versions.node)>=8?H:Buffer.from(H),G=require$$5.deflateSync(X,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(X){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return w(H)}function w(H){let X=H.length;const G=65535,U=Math.ceil(X/G),k=new Uint8Array(2+X+U*5+4);let _=0;k[_++]=120,k[_++]=156;let p=0;for(;X>G;)k[_++]=0,k[_++]=255,k[_++]=255,k[_++]=0,k[_++]=0,k.set(H.subarray(p,p+G),_),_+=G,p+=G,X-=G;k[_++]=1,k[_++]=X&255,k[_++]=X>>8&255,k[_++]=~X&65535&255,k[_++]=(~X&65535)>>8&255,k.set(H.subarray(p),_),_+=H.length-p;const b=R(H,0,H.length);return k[_++]=b>>24&255,k[_++]=b>>16&255,k[_++]=b>>8&255,k[_++]=b&255,k}function N(H,X,G,U){const k=H.width,_=H.height;let p,b,M;const F=H.data;switch(X){case y.ImageKind.GRAYSCALE_1BPP:b=0,p=1,M=k+7>>3;break;case y.ImageKind.RGB_24BPP:b=2,p=8,M=k*3;break;case y.ImageKind.RGBA_32BPP:b=6,p=8,M=k*4;break;default:throw new Error("invalid format")}const I=new Uint8Array((1+M)*_);let q=0,B=0;for(let Z=0;Z<_;++Z)I[q++]=0,I.set(F.subarray(B,B+M),q),B+=M,q+=M;if(X===y.ImageKind.GRAYSCALE_1BPP&&U){q=0;for(let Z=0;Z<_;Z++){q++;for(let $=0;$<M;$++)I[q++]^=255}}const v=new Uint8Array([k>>24&255,k>>16&255,k>>8&255,k&255,_>>24&255,_>>16&255,_>>8&255,_&255,p,b,0,0,0]),C=j(I),L=E.length+g*3+v.length+C.length,V=new Uint8Array(L);let W=0;return V.set(E,W),W+=E.length,P("IHDR",v,V,W),W+=g+v.length,P("IDATA",C,V,W),W+=g+C.length,P("IEND",new Uint8Array(0),V,W),n(V,"image/png",G)}return function(X,G,U){const k=X.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:X.kind;return N(X,k,G,U)}})();class u{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,A){this.x=g,this.y=A}}function l(E){let g=[];const A=[];for(const D of E){if(D.fn==="save"){g.push({fnId:92,fn:"group",items:[]}),A.push(g),g=g.at(-1).items;continue}D.fn==="restore"?g=A.pop():g.push(D)}return g}function e(E){if(Number.isInteger(E))return E.toString();const g=E.toFixed(10);let A=g.length-1;if(g[A]!=="0")return g;do A--;while(g[A]==="0");return g.substring(0,g[A]==="."?A:A+1)}function t(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${e(E[0])} ${e(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const g=Math.acos(E[0])*180/Math.PI;return`rotate(${e(g)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${e(E[4])} ${e(E[5])})`;return`matrix(${e(E[0])} ${e(E[1])} ${e(E[2])} ${e(E[3])} ${e(E[4])} ${e(E[5])})`}let c=0,s=0,f=0;class x{constructor(g,A,D=!1){(0,m.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new m.DOMSVGFactory,this.current=new u,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=g,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const P in y.OPS)this._operatorIdMapping[y.OPS[P]]=P}getObject(g,A=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):A}save(){this.transformStack.push(this.transformMatrix);const g=this.current;this.extraStack.push(g),this.current=g.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(g){this.save(),this.executeOpTree(g),this.restore()}loadDependencies(g){const A=g.fnArray,D=g.argsArray;for(let P=0,R=A.length;P<R;P++)if(A[P]===y.OPS.dependency)for(const j of D[P]){const w=j.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(H=>{w.get(j,H)});this.current.dependencies.push(N)}return Promise.all(this.current.dependencies)}transform(g,A,D,P,R,j){const w=[g,A,D,P,R,j];this.transformMatrix=y.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(g,A){this.viewport=A;const D=this._initialize(A);return this.loadDependencies(g).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(g)),D))}convertOpList(g){const A=this._operatorIdMapping,D=g.argsArray,P=g.fnArray,R=[];for(let j=0,w=P.length;j<w;j++){const N=P[j];R.push({fnId:N,fn:A[N],args:D[j]})}return l(R)}executeOpTree(g){for(const A of g){const D=A.fn,P=A.fnId,R=A.args;switch(P|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(R);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case y.OPS.setFont:this.setFont(R);break;case y.OPS.showText:this.showText(R[0]);break;case y.OPS.showSpacedText:this.showText(R[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(R[0],R[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case y.OPS.setHScale:this.setHScale(R[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case y.OPS.setTextRise:this.setTextRise(R[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case y.OPS.setLineWidth:this.setLineWidth(R[0]);break;case y.OPS.setLineJoin:this.setLineJoin(R[0]);break;case y.OPS.setLineCap:this.setLineCap(R[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case y.OPS.setFillColorN:this.setFillColorN(R);break;case y.OPS.shadingFill:this.shadingFill(R[0]);break;case y.OPS.setDash:this.setDash(R[0],R[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case y.OPS.setFlatness:this.setFlatness(R[0]);break;case y.OPS.setGState:this.setGState(R[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case y.OPS.constructPath:this.constructPath(R[0],R[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,y.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(g){this.current.wordSpacing=g}setCharSpacing(g){this.current.charSpacing=g}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(g,A,D,P,R,j){const w=this.current;w.textMatrix=w.lineMatrix=[g,A,D,P,R,j],w.textMatrixScale=Math.hypot(g,A),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${e(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",e(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const g=this.current;g.x=g.lineX=0,g.y=g.lineY=0,g.textMatrix=y.IDENTITY_MATRIX,g.lineMatrix=y.IDENTITY_MATRIX,g.textMatrixScale=1,g.tspan=this.svgFactory.createElement("svg:tspan"),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtgrp=this.svgFactory.createElement("svg:g"),g.xcoords=[],g.ycoords=[]}moveText(g,A){const D=this.current;D.x=D.lineX+=g,D.y=D.lineY+=A,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${e(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",e(-D.y))}showText(g){const A=this.current,D=A.font,P=A.fontSize;if(P===0)return;const R=A.fontSizeScale,j=A.charSpacing,w=A.wordSpacing,N=A.fontDirection,H=A.textHScale*N,X=D.vertical,G=X?1:-1,U=D.defaultVMetrics,k=P*A.fontMatrix[0];let _=0;for(const M of g){if(M===null){_+=N*w;continue}else if(typeof M=="number"){_+=G*M*P/1e3;continue}const F=(M.isSpace?w:0)+j,I=M.fontChar;let q,B,v=M.width;if(X){let L;const V=M.vmetric||U;L=M.vmetric?V[1]:v*.5,L=-L*k;const W=V[2]*k;v=V?-V[0]:v,q=L/R,B=(_+W)/R}else q=_/R,B=0;(M.isInFont||D.missingFile)&&(A.xcoords.push(A.x+q),X&&A.ycoords.push(-A.y+B),A.tspan.textContent+=I);const C=X?v*k-F*N:v*k+F*N;_+=C}A.tspan.setAttributeNS(null,"x",A.xcoords.map(e).join(" ")),X?A.tspan.setAttributeNS(null,"y",A.ycoords.map(e).join(" ")):A.tspan.setAttributeNS(null,"y",e(-A.y)),X?A.y-=_:A.x+=_*H,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${e(A.fontSize)}px`),A.fontStyle!==o.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==o.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const p=A.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(p===y.TextRenderingMode.FILL||p===y.TextRenderingMode.FILL_STROKE?(A.fillColor!==o.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),p===y.TextRenderingMode.STROKE||p===y.TextRenderingMode.FILL_STROKE){const M=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,M)}let b=A.textMatrix;A.textRise!==0&&(b=b.slice(),b[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${t(b)} scale(${e(H)}, -1)`),A.txtElement.setAttributeNS(T,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(g,A){this.setLeading(-A),this.moveText(g,A)}addFontStyle(g){if(!g.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=n(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${g.loadedName}"; src: url(${A}); }
`}setFont(g){const A=this.current,D=this.commonObjs.get(g[0]);let P=g[1];A.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),A.fontMatrix=D.fontMatrix||y.FONT_IDENTITY_MATRIX;let R="normal";D.black?R="900":D.bold&&(R="bold");const j=D.italic?"italic":"normal";P<0?(P=-P,A.fontDirection=-1):A.fontDirection=1,A.fontSize=P,A.fontFamily=D.loadedName,A.fontWeight=R,A.fontStyle=j,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",e(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){const g=this.current;g.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&g.txtElement?.hasChildNodes()&&(g.element=g.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(g){g>0&&(this.current.lineWidth=g)}setLineCap(g){this.current.lineCap=K[g]}setLineJoin(g){this.current.lineJoin=h[g]}setMiterLimit(g){this.current.miterLimit=g}setStrokeAlpha(g){this.current.strokeAlpha=g}setStrokeRGBColor(g,A,D){this.current.strokeColor=y.Util.makeHexColor(g,A,D)}setFillAlpha(g){this.current.fillAlpha=g}setFillRGBColor(g,A,D){this.current.fillColor=y.Util.makeHexColor(g,A,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(g){this.current.strokeColor=this._makeColorN_Pattern(g)}setFillColorN(g){this.current.fillColor=this._makeColorN_Pattern(g)}shadingFill(g){const{width:A,height:D}=this.viewport,P=y.Util.inverseTransform(this.transformMatrix),[R,j,w,N]=y.Util.getAxialAlignedBoundingBox([0,0,A,D],P),H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x",R),H.setAttributeNS(null,"y",j),H.setAttributeNS(null,"width",w-R),H.setAttributeNS(null,"height",N-j),H.setAttributeNS(null,"fill",this._makeShadingPattern(g)),this.current.fillAlpha<1&&H.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(H)}_makeColorN_Pattern(g){return g[0]==="TilingPattern"?this._makeTilingPattern(g):this._makeShadingPattern(g)}_makeTilingPattern(g){const A=g[1],D=g[2],P=g[3]||y.IDENTITY_MATRIX,[R,j,w,N]=g[4],H=g[5],X=g[6],G=g[7],U=`shading${f++}`,[k,_,p,b]=y.Util.normalizeRect([...y.Util.applyTransform([R,j],P),...y.Util.applyTransform([w,N],P)]),[M,F]=y.Util.singularValueDecompose2dScale(P),I=H*M,q=X*F,B=this.svgFactory.createElement("svg:pattern");B.setAttributeNS(null,"id",U),B.setAttributeNS(null,"patternUnits","userSpaceOnUse"),B.setAttributeNS(null,"width",I),B.setAttributeNS(null,"height",q),B.setAttributeNS(null,"x",`${k}`),B.setAttributeNS(null,"y",`${_}`);const v=this.svg,C=this.transformMatrix,L=this.current.fillColor,V=this.current.strokeColor,W=this.svgFactory.create(p-k,b-_);if(this.svg=W,this.transformMatrix=P,G===2){const Z=y.Util.makeHexColor(...A);this.current.fillColor=Z,this.current.strokeColor=Z}return this.executeOpTree(this.convertOpList(D)),this.svg=v,this.transformMatrix=C,this.current.fillColor=L,this.current.strokeColor=V,B.append(W.childNodes[0]),this.defs.append(B),`url(#${U})`}_makeShadingPattern(g){switch(typeof g=="string"&&(g=this.objs.get(g)),g[0]){case"RadialAxial":const A=`shading${f++}`,D=g[3];let P;switch(g[1]){case"axial":const R=g[4],j=g[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",A),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",R[0]),P.setAttributeNS(null,"y1",R[1]),P.setAttributeNS(null,"x2",j[0]),P.setAttributeNS(null,"y2",j[1]);break;case"radial":const w=g[4],N=g[5],H=g[6],X=g[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",A),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",N[0]),P.setAttributeNS(null,"cy",N[1]),P.setAttributeNS(null,"r",X),P.setAttributeNS(null,"fx",w[0]),P.setAttributeNS(null,"fy",w[1]),P.setAttributeNS(null,"fr",H);break;default:throw new Error(`Unknown RadialAxial type: ${g[1]}`)}for(const R of D){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",R[0]),j.setAttributeNS(null,"stop-color",R[1]),P.append(j)}return this.defs.append(P),`url(#${A})`;case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${g[0]}`)}}setDash(g,A){this.current.dashArray=g,this.current.dashPhase=A}constructPath(g,A){const D=this.current;let P=D.x,R=D.y,j=[],w=0;for(const N of g)switch(N|0){case y.OPS.rectangle:P=A[w++],R=A[w++];const H=A[w++],X=A[w++],G=P+H,U=R+X;j.push("M",e(P),e(R),"L",e(G),e(R),"L",e(G),e(U),"L",e(P),e(U),"Z");break;case y.OPS.moveTo:P=A[w++],R=A[w++],j.push("M",e(P),e(R));break;case y.OPS.lineTo:P=A[w++],R=A[w++],j.push("L",e(P),e(R));break;case y.OPS.curveTo:P=A[w+4],R=A[w+5],j.push("C",e(A[w]),e(A[w+1]),e(A[w+2]),e(A[w+3]),e(P),e(R)),w+=6;break;case y.OPS.curveTo2:j.push("C",e(P),e(R),e(A[w]),e(A[w+1]),e(A[w+2]),e(A[w+3])),P=A[w+2],R=A[w+3],w+=4;break;case y.OPS.curveTo3:P=A[w+2],R=A[w+3],j.push("C",e(A[w]),e(A[w+1]),e(P),e(R),e(P),e(R)),w+=4;break;case y.OPS.closePath:j.push("Z");break}j=j.join(" "),D.path&&g.length>0&&g[0]!==y.OPS.rectangle&&g[0]!==y.OPS.moveTo?j=D.path.getAttributeNS(null,"d")+j:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",j),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(P,R)}endPath(){const g=this.current;if(g.path=null,!this.pendingClip)return;if(!g.element){this.pendingClip=null;return}const A=`clippath${c++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",A),D.setAttributeNS(null,"transform",t(this.transformMatrix));const P=g.element.cloneNode(!0);if(this.pendingClip==="evenodd"?P.setAttributeNS(null,"clip-rule","evenodd"):P.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(P),this.defs.append(D),g.activeClipUrl){g.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;D.setAttributeNS(null,"clip-path",g.activeClipUrl)}g.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(g){this.pendingClip=g}closePath(){const g=this.current;if(g.path){const A=`${g.path.getAttributeNS(null,"d")}Z`;g.path.setAttributeNS(null,"d",A)}}setLeading(g){this.current.leading=-g}setTextRise(g){this.current.textRise=g}setTextRenderingMode(g){this.current.textRenderingMode=g}setHScale(g){this.current.textHScale=g/100}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[A,D]of g)switch(A){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,y.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const g=this.current;g.element&&(g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha),this.endPath())}stroke(){const g=this.current;g.element&&(this._setStrokeAttributes(g.element),g.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(g,A=1){const D=this.current;let P=D.dashArray;A!==1&&P.length>0&&(P=P.map(function(R){return A*R})),g.setAttributeNS(null,"stroke",D.strokeColor),g.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),g.setAttributeNS(null,"stroke-miterlimit",e(D.miterLimit)),g.setAttributeNS(null,"stroke-linecap",D.lineCap),g.setAttributeNS(null,"stroke-linejoin",D.lineJoin),g.setAttributeNS(null,"stroke-width",e(A*D.lineWidth)+"px"),g.setAttributeNS(null,"stroke-dasharray",P.map(e).join(" ")),g.setAttributeNS(null,"stroke-dashoffset",e(A*D.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width","1px"),g.setAttributeNS(null,"height","1px"),g.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(g)}paintImageXObject(g){const A=this.getObject(g);if(!A){(0,y.warn)(`Dependent image with object ID ${g} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(g,A){const D=g.width,P=g.height,R=a(g,this.forceDataSchema,!!A),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",e(D)),j.setAttributeNS(null,"height",e(P)),this.current.element=j,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(z,"xlink:href",R),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",e(-P)),w.setAttributeNS(null,"width",e(D)+"px"),w.setAttributeNS(null,"height",e(P)+"px"),w.setAttributeNS(null,"transform",`scale(${e(1/D)} ${e(-1/P)})`),A?A.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(g){const A=this.getObject(g.data,g);if(A.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,P=A.width,R=A.height,j=D.fillColor;D.maskId=`mask${s++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",D.maskId);const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",e(P)),N.setAttributeNS(null,"height",e(R)),N.setAttributeNS(null,"fill",j),N.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(N),this.paintInlineImageXObject(A,w)}paintFormXObjectBegin(g,A){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),A){const D=A[2]-A[0],P=A[3]-A[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",A[0]),R.setAttributeNS(null,"y",A[1]),R.setAttributeNS(null,"width",e(D)),R.setAttributeNS(null,"height",e(P)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(g){const A=this.svgFactory.create(g.width,g.height),D=this.svgFactory.createElement("svg:defs");A.append(D),this.defs=D;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",t(g.transform)),A.append(P),this.svg=P,A}_ensureClipGroup(){if(!this.current.clipGroup){const g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(g),this.current.clipGroup=g}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",t(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}d.SVGGraphics=x}),((r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaText=void 0;class i{static textContent(y){const o=[],T={items:o,styles:Object.create(null)};function z(K){if(!K)return;let h=null;const n=K.name;if(n==="#text")h=K.value;else if(i.shouldBuildText(n))K?.attributes?.textContent?h=K.attributes.textContent:K.value&&(h=K.value);else return;if(h!==null&&o.push({str:h}),!!K.children)for(const a of K.children)z(a)}return z(y),T}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}d.XfaText=i}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerRenderTask=void 0,d.renderTextLayer=t,d.updateTextLayer=c;var m=i(1),y=i(6);const o=1e5,T=30,z=.8,K=new Map;function h(s,f){let x;if(f&&m.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(s,s).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=s,x=E.getContext("2d",{alpha:!1})}return x}function n(s,f){const x=K.get(s);if(x)return x;const E=h(T,f);E.font=`${T}px ${s}`;const g=E.measureText("");let A=g.fontBoundingBoxAscent,D=Math.abs(g.fontBoundingBoxDescent);if(A){const R=A/(A+D);return K.set(s,R),E.canvas.width=E.canvas.height=0,R}E.strokeStyle="red",E.clearRect(0,0,T,T),E.strokeText("g",0,0);let P=E.getImageData(0,0,T,T).data;D=0;for(let R=P.length-1-3;R>=0;R-=4)if(P[R]>0){D=Math.ceil(R/4/T);break}E.clearRect(0,0,T,T),E.strokeText("A",0,T),P=E.getImageData(0,0,T,T).data,A=0;for(let R=0,j=P.length;R<j;R+=4)if(P[R]>0){A=T-Math.floor(R/4/T);break}if(E.canvas.width=E.canvas.height=0,A){const R=A/(A+D);return K.set(s,R),R}return K.set(s,z),z}function a(s,f,x){const E=document.createElement("span"),g={angle:0,canvasWidth:0,hasText:f.str!=="",hasEOL:f.hasEOL,fontSize:0};s._textDivs.push(E);const A=m.Util.transform(s._transform,f.transform);let D=Math.atan2(A[1],A[0]);const P=x[f.fontName];P.vertical&&(D+=Math.PI/2);const R=Math.hypot(A[2],A[3]),j=R*n(P.fontFamily,s._isOffscreenCanvasSupported);let w,N;D===0?(w=A[4],N=A[5]-j):(w=A[4]+j*Math.sin(D),N=A[5]-j*Math.cos(D));const H="calc(var(--scale-factor)*",X=E.style;s._container===s._rootContainer?(X.left=`${(100*w/s._pageWidth).toFixed(2)}%`,X.top=`${(100*N/s._pageHeight).toFixed(2)}%`):(X.left=`${H}${w.toFixed(2)}px)`,X.top=`${H}${N.toFixed(2)}px)`),X.fontSize=`${H}${R.toFixed(2)}px)`,X.fontFamily=P.fontFamily,g.fontSize=R,E.setAttribute("role","presentation"),E.textContent=f.str,E.dir=f.dir,s._fontInspectorEnabled&&(E.dataset.fontName=f.fontName),D!==0&&(g.angle=D*(180/Math.PI));let G=!1;if(f.str.length>1)G=!0;else if(f.str!==" "&&f.transform[0]!==f.transform[3]){const U=Math.abs(f.transform[0]),k=Math.abs(f.transform[3]);U!==k&&Math.max(U,k)/Math.min(U,k)>1.5&&(G=!0)}G&&(g.canvasWidth=P.vertical?f.height:f.width),s._textDivProperties.set(E,g),s._isReadableStream&&s._layoutText(E)}function u(s){const{div:f,scale:x,properties:E,ctx:g,prevFontSize:A,prevFontFamily:D}=s,{style:P}=f;let R="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:j}=P,{canvasWidth:w,fontSize:N}=E;(A!==N||D!==j)&&(g.font=`${N*x}px ${j}`,s.prevFontSize=N,s.prevFontFamily=j);const{width:H}=g.measureText(f.textContent);H>0&&(R=`scaleX(${w*x/H})`)}E.angle!==0&&(R=`rotate(${E.angle}deg) ${R}`),R.length>0&&(P.transform=R)}function l(s){if(s._canceled)return;const f=s._textDivs,x=s._capability;if(f.length>o){x.resolve();return}if(!s._isReadableStream)for(const g of f)s._layoutText(g);x.resolve()}class e{constructor({textContentSource:f,container:x,viewport:E,textDivs:g,textDivProperties:A,textContentItemsStr:D,isOffscreenCanvasSupported:P}){this._textContentSource=f,this._isReadableStream=f instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=g||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=P,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new m.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,P)};const{pageWidth:R,pageHeight:j,pageX:w,pageY:N}=E.rawDims;this._transform=[1,0,0,-1,-w,N+j],this._pageWidth=R,this._pageHeight=j,(0,y.setLayerDimensions)(x,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new m.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new m.AbortException("TextLayer task cancelled."))}_processItems(f,x){for(const E of f){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const g=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),g.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),a(this,E,x)}}_layoutText(f){const x=this._layoutTextParams.properties=this._textDivProperties.get(f);if(this._layoutTextParams.div=f,u(this._layoutTextParams),x.hasText&&this._container.append(f),x.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const f=new m.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:g,done:A})=>{if(A){f.resolve();return}Object.assign(x,g.styles),this._processItems(g.items,x),E()},f.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:g}=this._textContentSource;this._processItems(E,g),f.resolve()}else throw new Error('No "textContentSource" parameter specified.');f.promise.then(()=>{x=null,l(this)},this._capability.reject)}}d.TextLayerRenderTask=e;function t(s){!s.textContentSource&&(s.textContent||s.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),s.textContentSource=s.textContent||s.textContentStream);const{container:f,viewport:x}=s,E=getComputedStyle(f),g=E.getPropertyValue("visibility"),A=parseFloat(E.getPropertyValue("--scale-factor"));g==="visible"&&(!A||Math.abs(A-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new e(s);return D._render(),D}function c({container:s,viewport:f,textDivs:x,textDivProperties:E,isOffscreenCanvasSupported:g,mustRotate:A=!0,mustRescale:D=!0}){if(A&&(0,y.setLayerDimensions)(s,{rotation:f.rotation}),D){const P=h(0,g),j={prevFontSize:null,prevFontFamily:null,div:null,scale:f.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P};for(const w of x)j.properties=E.get(w),j.div=w,u(j)}}}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditorLayer=void 0;var m=i(1),y=i(4),o=i(28),T=i(33),z=i(6),K=i(34);class h{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#s=this.pointerdown.bind(this);#o=new Map;#a=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:a,pageIndex:u,div:l,accessibilityManager:e,annotationLayer:t,viewport:c,l10n:s}){const f=[o.FreeTextEditor,T.InkEditor,K.StampEditor];if(!h._initialized){h._initialized=!0;for(const x of f)x.initialize(s)}a.registerEditorTypes(f),this.#i=a,this.pageIndex=u,this.div=l,this.#e=e,this.#n=t,this.viewport=c,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(a){this.#i.updateToolbar(a)}updateMode(a=this.#i.getMode()){this.#p(),a===m.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),a!==m.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===m.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===m.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",a===m.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&this.#i.getMode()!==m.AnnotationEditorType.INK)return;if(!a){for(const l of this.#o.values())if(l.isEmpty()){l.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(a){this.#i.setEditingState(a)}addCommands(a){this.#i.addCommands(a)}enable(){this.div.style.pointerEvents="auto";const a=new Set;for(const l of this.#o.values())l.enableEditing(),l.annotationElementId&&a.add(l.annotationElementId);if(!this.#n)return;const u=this.#n.getEditableAnnotations();for(const l of u){if(l.hide(),this.#i.isDeletedAnnotationElement(l.data.id)||a.has(l.data.id))continue;const e=this.deserialize(l);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const a=new Set;for(const u of this.#o.values()){if(u.disableEditing(),!u.annotationElementId||u.serialize()!==null){a.add(u.annotationElementId);continue}this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}if(this.#n){const u=this.#n.getEditableAnnotations();for(const l of u){const{id:e}=l.data;a.has(e)||this.#i.isDeletedAnnotationElement(e)||l.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(a){return this.#n?.getEditableAnnotation(a)||null}setActiveEditor(a){this.#i.getActive()!==a&&this.#i.setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",this.#s),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#s),this.div.removeEventListener("pointerup",this.#r)}attach(a){this.#o.set(a.id,a);const{annotationElementId:u}=a;u&&this.#i.isDeletedAnnotationElement(u)&&this.#i.removeDeletedAnnotationElement(a)}detach(a){this.#o.delete(a.id),this.#e?.removePointerInTextLayer(a.contentDiv),!this.#c&&a.annotationElementId&&this.#i.addDeletedAnnotationElement(a)}remove(a){this.detach(a),this.#i.removeEditor(a),a.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),a.div.remove(),a.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(a){a.parent!==this&&(a.annotationElementId&&(this.#i.addDeletedAnnotationElement(a.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(a),a.annotationElementId=null),this.attach(a),a.parent?.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(this.changeParent(a),this.#i.addEditor(a),this.attach(a),!a.isAttachedToDOM){const u=a.render();this.div.append(u),a.isAttachedToDOM=!0}a.fixAndSetPosition(),a.onceAdded(),this.#i.addToAnnotationStorage(a)}moveEditorInDOM(a){if(!a.isAttachedToDOM)return;const{activeElement:u}=document;a.div.contains(u)&&(a._focusEventsAllowed=!1,setTimeout(()=>{a.div.contains(document.activeElement)?a._focusEventsAllowed=!0:(a.div.addEventListener("focusin",()=>{a._focusEventsAllowed=!0},{once:!0}),u.focus())},0)),a._structTreeParentId=this.#e?.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addUndoableEditor(a){const u=()=>a._uiManager.rebuild(a),l=()=>{a.remove()};this.addCommands({cmd:u,undo:l,mustExec:!1})}getNextId(){return this.#i.getId()}#f(a){switch(this.#i.getMode()){case m.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(a);case m.AnnotationEditorType.INK:return new T.InkEditor(a);case m.AnnotationEditorType.STAMP:return new K.StampEditor(a)}return null}pasteEditor(a,u){this.#i.updateToolbar(a),this.#i.updateMode(a);const{offsetX:l,offsetY:e}=this.#h(),t=this.getNextId(),c=this.#f({parent:this,id:t,x:l,y:e,uiManager:this.#i,isCentered:!0,...u});c&&this.add(c)}deserialize(a){switch(a.annotationType??a.annotationEditorType){case m.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(a,this,this.#i);case m.AnnotationEditorType.INK:return T.InkEditor.deserialize(a,this,this.#i);case m.AnnotationEditorType.STAMP:return K.StampEditor.deserialize(a,this,this.#i)}return null}#d(a,u){const l=this.getNextId(),e=this.#f({parent:this,id:l,x:a.offsetX,y:a.offsetY,uiManager:this.#i,isCentered:u});return e&&this.add(e),e}#h(){const{x:a,y:u,width:l,height:e}=this.div.getBoundingClientRect(),t=Math.max(0,a),c=Math.max(0,u),s=Math.min(window.innerWidth,a+l),f=Math.min(window.innerHeight,u+e),x=(t+s)/2-a,E=(c+f)/2-u,[g,A]=this.viewport.rotation%180===0?[x,E]:[E,x];return{offsetX:g,offsetY:A}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(a){this.#i.setSelected(a)}toggleSelected(a){this.#i.toggleSelected(a)}isSelected(a){return this.#i.isSelected(a)}unselect(a){this.#i.unselect(a)}pointerup(a){const{isMac:u}=m.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&u)&&a.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===m.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(a,!1)}}pointerdown(a){if(this.#a){this.#a=!1;return}const{isMac:u}=m.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&u||a.target!==this.div)return;this.#a=!0;const l=this.#i.getActive();this.#t=!l||l.isEmpty()}findNewParent(a,u,l){const e=this.#i.findParent(u,l);return e===null||e===this?!1:(e.changeParent(a),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const a of this.#o.values())this.#e?.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const a of this.#o.values())a.isEmpty()&&a.remove();this.#l=!1}render({viewport:a}){this.viewport=a,(0,z.setLayerDimensions)(this.div,a);for(const u of this.#i.getEditors(this.pageIndex))this.add(u);this.updateMode()}update({viewport:a}){this.#i.commitOrRemove(),this.viewport=a,(0,z.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:u}=this.viewport.rawDims;return[a,u]}}d.AnnotationEditorLayer=h}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FreeTextEditor=void 0;var m=i(1),y=i(5),o=i(4),T=i(29);class z extends o.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#s;#o="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const h=z.prototype,n=l=>l.isEmpty(),a=y.AnnotationEditorUIManager.TRANSLATE_SMALL,u=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,m.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],h.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],h.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],h._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h._translateEmpty,{args:[-u,0],checker:n}],[["ArrowRight","mac+ArrowRight"],h._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h._translateEmpty,{args:[u,0],checker:n}],[["ArrowUp","mac+ArrowUp"],h._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h._translateEmpty,{args:[0,-u],checker:n}],[["ArrowDown","mac+ArrowDown"],h._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h._translateEmpty,{args:[0,u],checker:n}]]))}static _type="freetext";constructor(h){super({...h,name:"freeTextEditor"}),this.#s=h.color||z._defaultColor||o.AnnotationEditor._defaultLineColor,this.#l=h.fontSize||z._defaultFontSize}static initialize(h){o.AnnotationEditor.initialize(h,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,n){switch(h){case m.AnnotationEditorParamsType.FREETEXT_SIZE:z._defaultFontSize=n;break;case m.AnnotationEditorParamsType.FREETEXT_COLOR:z._defaultColor=n;break}}updateParams(h,n){switch(h){case m.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(n);break;case m.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(n);break}}static get defaultPropertiesToUpdate(){return[[m.AnnotationEditorParamsType.FREETEXT_SIZE,z._defaultFontSize],[m.AnnotationEditorParamsType.FREETEXT_COLOR,z._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[m.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[m.AnnotationEditorParamsType.FREETEXT_COLOR,this.#s]]}#i(h){const n=u=>{this.editorDiv.style.fontSize=`calc(${u}px * var(--scale-factor))`,this.translate(0,-(u-this.#l)*this.parentScale),this.#l=u,this.#h()},a=this.#l;this.addCommands({cmd:()=>{n(h)},undo:()=>{n(a)},mustExec:!0,type:m.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(h){const n=this.#s;this.addCommands({cmd:()=>{this.#s=this.editorDiv.style.color=h},undo:()=>{this.#s=this.editorDiv.style.color=n},mustExec:!0,type:m.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(h,n){this._uiManager.translateSelectedEditors(h,n,!0)}getInitialTranslation(){const h=this.parentScale;return[-z._internalPadding*h,-(z._internalPadding+this.#l)*h]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(m.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(h){this._focusEventsAllowed&&(super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const n=[];for(const a of h)n.push(a.innerText.replace(/\r\n?|\n/,""));return n.join(`
`)}#h(){const[h,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:u,div:l}=this,e=l.style.display;l.style.display="hidden",u.div.append(this.div),a=l.getBoundingClientRect(),l.remove(),l.style.display=e}this.rotation%180===this.parentRotation%180?(this.width=a.width/h,this.height=a.height/n):(this.width=a.height/h,this.height=a.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const h=this.#o,n=this.#o=this.#d().trimEnd();if(h===n)return;const a=u=>{if(this.#o=u,!u){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(h)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(h){this.enterInEditMode()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enterInEditMode(),h.preventDefault())}editorDivKeydown(h){z._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}editorDivInput(h){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,n;this.width&&(h=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(u=>this.editorDiv?.setAttribute("aria-label",u)),o.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(u=>this.editorDiv?.setAttribute("default-content",u)),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${this.#l}px * var(--scale-factor))`,a.color=this.#s,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[u,l]=this.parentDimensions;if(this.annotationElementId){const{position:e}=this.#c;let[t,c]=this.getInitialTranslation();[t,c]=this.pageTranslationToScreen(t,c);const[s,f]=this.pageDimensions,[x,E]=this.pageTranslation;let g,A;switch(this.rotation){case 0:g=h+(e[0]-x)/s,A=n+this.height-(e[1]-E)/f;break;case 90:g=h+(e[0]-x)/s,A=n-(e[1]-E)/f,[t,c]=[c,-t];break;case 180:g=h-this.width+(e[0]-x)/s,A=n-(e[1]-E)/f,[t,c]=[-t,-c];break;case 270:g=h+(e[0]-x-this.height*f)/s,A=n+(e[1]-E-this.width*s)/f,[t,c]=[-c,t];break}this.setAt(g*u,A*l,t,c)}else this.setAt(h*u,n*l,this.width*u,this.height*l);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const h of this.#o.split(`
`)){const n=document.createElement("div");n.append(h?document.createTextNode(h):document.createElement("br")),this.editorDiv.append(n)}}get contentDiv(){return this.editorDiv}static deserialize(h,n,a){let u=null;if(h instanceof T.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:t},rect:c,rotation:s,id:f},textContent:x,textPosition:E,parent:{page:{pageNumber:g}}}=h;if(!x||x.length===0)return null;u=h={annotationType:m.AnnotationEditorType.FREETEXT,color:Array.from(t),fontSize:e,value:x.join(`
`),position:E,pageIndex:g-1,rect:c,rotation:s,id:f,deleted:!1}}const l=super.deserialize(h,n,a);return l.#l=h.fontSize,l.#s=m.Util.makeHexColor(...h.color),l.#o=h.value,l.annotationElementId=h.id||null,l.#c=u,l}serialize(h=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=z._internalPadding*this.parentScale,a=this.getRect(n,n),u=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#s),l={annotationType:m.AnnotationEditorType.FREETEXT,color:u,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return h?l:this.annotationElementId&&!this.#v(l)?null:(l.id=this.annotationElementId,l)}#v(h){const{value:n,fontSize:a,color:u,rect:l,pageIndex:e}=this.#c;return h.value!==n||h.fontSize!==a||h.rect.some((t,c)=>Math.abs(t-l[c])>=1)||h.color.some((t,c)=>t!==u[c])||h.pageIndex!==e}#g(h=!1){if(!this.annotationElementId)return;if(this.#h(),!h&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const n=z._internalPadding*this.parentScale;this.#c.rect=this.getRect(n,n)}}d.FreeTextEditor=z}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StampAnnotationElement=d.InkAnnotationElement=d.FreeTextAnnotationElement=d.AnnotationLayer=void 0;var m=i(1),y=i(6),o=i(3),T=i(30),z=i(31),K=i(32);const h=1e3,n=9,a=new WeakSet;function u(B){return{width:B[2]-B[0],height:B[3]-B[1]}}class l{static create(v){switch(v.data.annotationType){case m.AnnotationType.LINK:return new t(v);case m.AnnotationType.TEXT:return new c(v);case m.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new f(v);case"Btn":return v.data.radioButton?new g(v):v.data.checkBox?new E(v):new A(v);case"Ch":return new D(v);case"Sig":return new x(v)}return new s(v);case m.AnnotationType.POPUP:return new P(v);case m.AnnotationType.FREETEXT:return new j(v);case m.AnnotationType.LINE:return new w(v);case m.AnnotationType.SQUARE:return new N(v);case m.AnnotationType.CIRCLE:return new H(v);case m.AnnotationType.POLYLINE:return new X(v);case m.AnnotationType.CARET:return new U(v);case m.AnnotationType.INK:return new k(v);case m.AnnotationType.POLYGON:return new G(v);case m.AnnotationType.HIGHLIGHT:return new _(v);case m.AnnotationType.UNDERLINE:return new p(v);case m.AnnotationType.SQUIGGLY:return new b(v);case m.AnnotationType.STRIKEOUT:return new M(v);case m.AnnotationType.STAMP:return new F(v);case m.AnnotationType.FILEATTACHMENT:return new I(v);default:return new e(v)}}}class e{#e=!1;constructor(v,{isRenderable:C=!1,ignoreBorder:L=!1,createQuadrilaterals:V=!1}={}){this.isRenderable=C,this.data=v.data,this.layer=v.layer,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this.parent=v.parent,C&&(this.container=this._createContainer(L)),V&&this._createQuadrilaterals()}static _hasPopupData({titleObj:v,contentsObj:C,richText:L}){return!!(v?.str||C?.str||L?.str)}get hasPopupData(){return e._hasPopupData(this.data)}_createContainer(v){const{data:C,parent:{page:L,viewport:V}}=this,W=document.createElement("section");W.setAttribute("data-annotation-id",C.id),this instanceof s||(W.tabIndex=h),W.style.zIndex=this.parent.zIndex++,this.data.popupRef&&W.setAttribute("aria-haspopup","dialog"),C.noRotate&&W.classList.add("norotate");const{pageWidth:Z,pageHeight:$,pageX:ce,pageY:_e}=V.rawDims;if(!C.rect||this instanceof P){const{rotation:le}=C;return!C.hasOwnCanvas&&le!==0&&this.setRotation(le,W),W}const{width:de,height:he}=u(C.rect),fe=m.Util.normalizeRect([C.rect[0],L.view[3]-C.rect[1]+L.view[1],C.rect[2],L.view[3]-C.rect[3]+L.view[1]]);if(!v&&C.borderStyle.width>0){W.style.borderWidth=`${C.borderStyle.width}px`;const le=C.borderStyle.horizontalCornerRadius,Se=C.borderStyle.verticalCornerRadius;if(le>0||Se>0){const be=`calc(${le}px * var(--scale-factor)) / calc(${Se}px * var(--scale-factor))`;W.style.borderRadius=be}else if(this instanceof g){const be=`calc(${de}px * var(--scale-factor)) / calc(${he}px * var(--scale-factor))`;W.style.borderRadius=be}switch(C.borderStyle.style){case m.AnnotationBorderStyleType.SOLID:W.style.borderStyle="solid";break;case m.AnnotationBorderStyleType.DASHED:W.style.borderStyle="dashed";break;case m.AnnotationBorderStyleType.BEVELED:(0,m.warn)("Unimplemented border style: beveled");break;case m.AnnotationBorderStyleType.INSET:(0,m.warn)("Unimplemented border style: inset");break;case m.AnnotationBorderStyleType.UNDERLINE:W.style.borderBottomStyle="solid";break}const ve=C.borderColor||null;ve?(this.#e=!0,W.style.borderColor=m.Util.makeHexColor(ve[0]|0,ve[1]|0,ve[2]|0)):W.style.borderWidth=0}W.style.left=`${100*(fe[0]-ce)/Z}%`,W.style.top=`${100*(fe[1]-_e)/$}%`;const{rotation:re}=C;return C.hasOwnCanvas||re===0?(W.style.width=`${100*de/Z}%`,W.style.height=`${100*he/$}%`):this.setRotation(re,W),W}setRotation(v,C=this.container){if(!this.data.rect)return;const{pageWidth:L,pageHeight:V}=this.parent.viewport.rawDims,{width:W,height:Z}=u(this.data.rect);let $,ce;v%180===0?($=100*W/L,ce=100*Z/V):($=100*Z/L,ce=100*W/V),C.style.width=`${$}%`,C.style.height=`${ce}%`,C.setAttribute("data-main-rotation",(360-v)%360)}get _commonActions(){const v=(C,L,V)=>{const W=V.detail[C],Z=W[0],$=W.slice(1);V.target.style[L]=T.ColorConverters[`${Z}_HTML`]($),this.annotationStorage.setValue(this.data.id,{[L]:T.ColorConverters[`${Z}_rgb`]($)})};return(0,m.shadow)(this,"_commonActions",{display:C=>{const{display:L}=C.detail,V=L%2===1;this.container.style.visibility=V?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:V,noPrint:L===1||L===2})},print:C=>{this.annotationStorage.setValue(this.data.id,{noPrint:!C.detail.print})},hidden:C=>{const{hidden:L}=C.detail;this.container.style.visibility=L?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:L,noView:L})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.target.disabled=C.detail.readonly},required:C=>{this._setRequired(C.target,C.detail.required)},bgColor:C=>{v("bgColor","backgroundColor",C)},fillColor:C=>{v("fillColor","backgroundColor",C)},fgColor:C=>{v("fgColor","color",C)},textColor:C=>{v("textColor","color",C)},borderColor:C=>{v("borderColor","borderColor",C)},strokeColor:C=>{v("strokeColor","borderColor",C)},rotation:C=>{const L=C.detail.rotation;this.setRotation(L),this.annotationStorage.setValue(this.data.id,{rotation:L})}})}_dispatchEventFromSandbox(v,C){const L=this._commonActions;for(const V of Object.keys(C.detail))(v[V]||L[V])?.(C)}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const L=this._commonActions;for(const[V,W]of Object.entries(C)){const Z=L[V];if(Z){const $={detail:{[V]:W},target:v};Z($),delete C[V]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:v}=this.data;if(!v)return;const[C,L,V,W]=this.data.rect;if(v.length===1){const[,{x:Se,y:ve},{x:be,y:ke}]=v[0];if(V===Se&&W===ve&&C===be&&L===ke)return}const{style:Z}=this.container;let $;if(this.#e){const{borderColor:Se,borderWidth:ve}=Z;Z.borderWidth=0,$=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Se}" stroke-width="${ve}">`],this.container.classList.add("hasBorder")}const ce=V-C,_e=W-L,{svgFactory:de}=this,he=de.createElement("svg");he.classList.add("quadrilateralsContainer"),he.setAttribute("width",0),he.setAttribute("height",0);const fe=de.createElement("defs");he.append(fe);const re=de.createElement("clipPath"),le=`clippath_${this.data.id}`;re.setAttribute("id",le),re.setAttribute("clipPathUnits","objectBoundingBox"),fe.append(re);for(const[,{x:Se,y:ve},{x:be,y:ke}]of v){const Le=de.createElement("rect"),Ue=(be-C)/ce,tt=(W-ve)/_e,Je=(Se-be)/ce,gt=(ve-ke)/_e;Le.setAttribute("x",Ue),Le.setAttribute("y",tt),Le.setAttribute("width",Je),Le.setAttribute("height",gt),re.append(Le),$?.push(`<rect vector-effect="non-scaling-stroke" x="${Ue}" y="${tt}" width="${Je}" height="${gt}"/>`)}this.#e&&($.push("</g></svg>')"),Z.backgroundImage=$.join("")),this.container.append(he),this.container.style.clipPath=`url(#${le})`}_createPopup(){const{container:v,data:C}=this;v.setAttribute("aria-haspopup","dialog");const L=new P({data:{color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,parentRect:C.rect,borderStyle:0,id:`popup_${C.id}`,rotation:C.rotation},parent:this.parent,elements:[this]});this.parent.div.append(L.render())}render(){(0,m.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v,C=null){const L=[];if(this._fieldObjects){const V=this._fieldObjects[v];if(V)for(const{page:W,id:Z,exportValues:$}of V){if(W===-1||Z===C)continue;const ce=typeof $=="string"?$:null,_e=document.querySelector(`[data-element-id="${Z}"]`);if(_e&&!a.has(_e)){(0,m.warn)(`_getElementsByName - element not allowed: ${Z}`);continue}L.push({id:Z,exportValue:ce,domElement:_e})}return L}for(const V of document.getElementsByName(v)){const{exportValue:W}=V,Z=V.getAttribute("data-element-id");Z!==C&&a.has(V)&&L.push({id:Z,exportValue:W,domElement:V})}return L}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const v=this.getElementsToTriggerPopup();if(Array.isArray(v))for(const C of v)C.classList.add("highlightArea");else v.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:v,data:{id:C}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:v,editId:C})})}}class t extends e{constructor(v,C=null){super(v,{isRenderable:!0,ignoreBorder:!!C?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=v.data.isTooltipOnly}render(){const{data:v,linkService:C}=this,L=document.createElement("a");L.setAttribute("data-element-id",v.id);let V=!1;return v.url?(C.addLinkAttributes(L,v.url,v.newWindow),V=!0):v.action?(this._bindNamedAction(L,v.action),V=!0):v.attachment?(this._bindAttachment(L,v.attachment),V=!0):v.setOCGState?(this.#t(L,v.setOCGState),V=!0):v.dest?(this._bindLink(L,v.dest),V=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,v),V=!0),v.resetForm?(this._bindResetFormAction(L,v.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(L,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(L),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(v,C){v.href=this.linkService.getDestinationHash(C),v.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||C==="")&&this.#e()}_bindNamedAction(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(C),!1),this.#e()}_bindAttachment(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,C.content,C.filename),!1),this.#e()}#t(v,C){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeSetOCGState(C),!1),this.#e()}_bindJSAction(v,C){v.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(C.actions)){const W=L.get(V);W&&(v[W]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:V}}),!1))}v.onclick||(v.onclick=()=>!1),this.#e()}_bindResetFormAction(v,C){const L=v.onclick;if(L||(v.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,m.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(v.onclick=()=>!1);return}v.onclick=()=>{L?.();const{fields:V,refs:W,include:Z}=C,$=[];if(V.length!==0||W.length!==0){const de=new Set(W);for(const he of V){const fe=this._fieldObjects[he]||[];for(const{id:re}of fe)de.add(re)}for(const he of Object.values(this._fieldObjects))for(const fe of he)de.has(fe.id)===Z&&$.push(fe)}else for(const de of Object.values(this._fieldObjects))$.push(...de);const ce=this.annotationStorage,_e=[];for(const de of $){const{id:he}=de;switch(_e.push(he),de.type){case"text":{const re=de.defaultValue||"";ce.setValue(he,{value:re});break}case"checkbox":case"radiobutton":{const re=de.defaultValue===de.exportValues;ce.setValue(he,{value:re});break}case"combobox":case"listbox":{const re=de.defaultValue||"";ce.setValue(he,{value:re});break}default:continue}const fe=document.querySelector(`[data-element-id="${he}"]`);if(fe){if(!a.has(fe)){(0,m.warn)(`_bindResetFormAction - element not allowed: ${he}`);continue}}else continue;fe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_e,name:"ResetForm"}}),!1}}}class c extends e{constructor(v){super(v,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const v=document.createElement("img");return v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(v),this.container}}class s extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(v){this.data.hasOwnCanvas&&(v.previousSibling?.nodeName==="CANVAS"&&(v.previousSibling.hidden=!0),v.hidden=!1)}_getKeyModifier(v){const{isWin:C,isMac:L}=m.FeatureTest.platform;return C&&v.ctrlKey||L&&v.metaKey}_setEventListener(v,C,L,V,W){L.includes("mouse")?v.addEventListener(L,Z=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:W(Z),shift:Z.shiftKey,modifier:this._getKeyModifier(Z)}})}):v.addEventListener(L,Z=>{if(L==="blur"){if(!C.focused||!Z.relatedTarget)return;C.focused=!1}else if(L==="focus"){if(C.focused)return;C.focused=!0}W&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:W(Z)}})})}_setEventListeners(v,C,L,V){for(const[W,Z]of L)(Z==="Action"||this.data.actions?.[Z])&&((Z==="Focus"||Z==="Blur")&&(C||={focused:!1}),this._setEventListener(v,C,W,Z,V),Z==="Focus"&&!this.data.actions?.Blur?this._setEventListener(v,C,"blur","Blur",null):Z==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(v,C,"focus","Focus",null))}_setBackgroundColor(v){const C=this.data.backgroundColor||null;v.style.backgroundColor=C===null?"transparent":m.Util.makeHexColor(C[0],C[1],C[2])}_setTextStyle(v){const C=["left","center","right"],{fontColor:L}=this.data.defaultAppearanceData,V=this.data.defaultAppearanceData.fontSize||n,W=v.style;let Z;const $=2,ce=_e=>Math.round(10*_e)/10;if(this.data.multiLine){const _e=Math.abs(this.data.rect[3]-this.data.rect[1]-$),de=Math.round(_e/(m.LINE_FACTOR*V))||1,he=_e/de;Z=Math.min(V,ce(he/m.LINE_FACTOR))}else{const _e=Math.abs(this.data.rect[3]-this.data.rect[1]-$);Z=Math.min(V,ce(_e/m.LINE_FACTOR))}W.fontSize=`calc(${Z}px * var(--scale-factor))`,W.color=m.Util.makeHexColor(L[0],L[1],L[2]),this.data.textAlignment!==null&&(W.textAlign=C[this.data.textAlignment])}_setRequired(v,C){C?v.setAttribute("required",!0):v.removeAttribute("required"),v.setAttribute("aria-required",C)}}class f extends s{constructor(v){const C=v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue;super(v,{isRenderable:C})}setPropertyOnSiblings(v,C,L,V){const W=this.annotationStorage;for(const Z of this._getElementsByName(v.name,v.id))Z.domElement&&(Z.domElement[C]=L),W.setValue(Z.id,{[V]:L})}render(){const v=this.annotationStorage,C=this.data.id;this.container.classList.add("textWidgetAnnotation");let L=null;if(this.renderForms){const V=v.getValue(C,{value:this.data.fieldValue});let W=V.value||"";const Z=v.getValue(C,{charLimit:this.data.maxLen}).charLimit;Z&&W.length>Z&&(W=W.slice(0,Z));let $=V.formattedValue||this.data.textContent?.join(`
`)||null;$&&this.data.comb&&($=$.replaceAll(/\s+/g,""));const ce={userValue:W,formattedValue:$,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(L=document.createElement("textarea"),L.textContent=$??W,this.data.doNotScroll&&(L.style.overflowY="hidden")):(L=document.createElement("input"),L.type="text",L.setAttribute("value",$??W),this.data.doNotScroll&&(L.style.overflowX="hidden")),this.data.hasOwnCanvas&&(L.hidden=!0),a.add(L),L.setAttribute("data-element-id",C),L.disabled=this.data.readOnly,L.name=this.data.fieldName,L.tabIndex=h,this._setRequired(L,this.data.required),Z&&(L.maxLength=Z),L.addEventListener("input",de=>{v.setValue(C,{value:de.target.value}),this.setPropertyOnSiblings(L,"value",de.target.value,"value"),ce.formattedValue=null}),L.addEventListener("resetform",de=>{const he=this.data.defaultFieldValue??"";L.value=ce.userValue=he,ce.formattedValue=null});let _e=de=>{const{formattedValue:he}=ce;he!=null&&(de.target.value=he),de.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){L.addEventListener("focus",he=>{if(ce.focused)return;const{target:fe}=he;ce.userValue&&(fe.value=ce.userValue),ce.lastCommittedValue=fe.value,ce.commitKey=1,ce.focused=!0}),L.addEventListener("updatefromsandbox",he=>{this.showElementAndHideCanvas(he.target);const fe={value(re){ce.userValue=re.detail.value??"",v.setValue(C,{value:ce.userValue.toString()}),re.target.value=ce.userValue},formattedValue(re){const{formattedValue:le}=re.detail;ce.formattedValue=le,le!=null&&re.target!==document.activeElement&&(re.target.value=le),v.setValue(C,{formattedValue:le})},selRange(re){re.target.setSelectionRange(...re.detail.selRange)},charLimit:re=>{const{charLimit:le}=re.detail,{target:Se}=re;if(le===0){Se.removeAttribute("maxLength");return}Se.setAttribute("maxLength",le);let ve=ce.userValue;!ve||ve.length<=le||(ve=ve.slice(0,le),Se.value=ce.userValue=ve,v.setValue(C,{value:ve}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:Se.selectionStart,selEnd:Se.selectionEnd}}))}};this._dispatchEventFromSandbox(fe,he)}),L.addEventListener("keydown",he=>{ce.commitKey=1;let fe=-1;if(he.key==="Escape"?fe=0:he.key==="Enter"&&!this.data.multiLine?fe=2:he.key==="Tab"&&(ce.commitKey=3),fe===-1)return;const{value:re}=he.target;ce.lastCommittedValue!==re&&(ce.lastCommittedValue=re,ce.userValue=re,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:re,willCommit:!0,commitKey:fe,selStart:he.target.selectionStart,selEnd:he.target.selectionEnd}}))});const de=_e;_e=null,L.addEventListener("blur",he=>{if(!ce.focused||!he.relatedTarget)return;ce.focused=!1;const{value:fe}=he.target;ce.userValue=fe,ce.lastCommittedValue!==fe&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:fe,willCommit:!0,commitKey:ce.commitKey,selStart:he.target.selectionStart,selEnd:he.target.selectionEnd}}),de(he)}),this.data.actions?.Keystroke&&L.addEventListener("beforeinput",he=>{ce.lastCommittedValue=null;const{data:fe,target:re}=he,{value:le,selectionStart:Se,selectionEnd:ve}=re;let be=Se,ke=ve;switch(he.inputType){case"deleteWordBackward":{const Le=le.substring(0,Se).match(/\w*[^\w]*$/);Le&&(be-=Le[0].length);break}case"deleteWordForward":{const Le=le.substring(Se).match(/^[^\w]*\w*/);Le&&(ke+=Le[0].length);break}case"deleteContentBackward":Se===ve&&(be-=1);break;case"deleteContentForward":Se===ve&&(ke+=1);break}he.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:le,change:fe||"",willCommit:!1,selStart:be,selEnd:ke}})}),this._setEventListeners(L,ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],he=>he.target.value)}if(_e&&L.addEventListener("blur",_e),this.data.comb){const he=(this.data.rect[2]-this.data.rect[0])/Z;L.classList.add("comb"),L.style.letterSpacing=`calc(${he}px * var(--scale-factor) - 1ch)`}}else L=document.createElement("div"),L.textContent=this.data.fieldValue,L.style.verticalAlign="middle",L.style.display="table-cell";return this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class x extends s{constructor(v){super(v,{isRenderable:!!v.data.hasOwnCanvas})}}class E extends s{constructor(v){super(v,{isRenderable:v.renderForms})}render(){const v=this.annotationStorage,C=this.data,L=C.id;let V=v.getValue(L,{value:C.exportValue===C.fieldValue}).value;typeof V=="string"&&(V=V!=="Off",v.setValue(L,{value:V})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const W=document.createElement("input");return a.add(W),W.setAttribute("data-element-id",L),W.disabled=C.readOnly,this._setRequired(W,this.data.required),W.type="checkbox",W.name=C.fieldName,V&&W.setAttribute("checked",!0),W.setAttribute("exportValue",C.exportValue),W.tabIndex=h,W.addEventListener("change",Z=>{const{name:$,checked:ce}=Z.target;for(const _e of this._getElementsByName($,L)){const de=ce&&_e.exportValue===C.exportValue;_e.domElement&&(_e.domElement.checked=de),v.setValue(_e.id,{value:de})}v.setValue(L,{value:ce})}),W.addEventListener("resetform",Z=>{const $=C.defaultFieldValue||"Off";Z.target.checked=$===C.exportValue}),this.enableScripting&&this.hasJSActions&&(W.addEventListener("updatefromsandbox",Z=>{const $={value(ce){ce.target.checked=ce.detail.value!=="Off",v.setValue(L,{value:ce.target.checked})}};this._dispatchEventFromSandbox($,Z)}),this._setEventListeners(W,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class g extends s{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const v=this.annotationStorage,C=this.data,L=C.id;let V=v.getValue(L,{value:C.fieldValue===C.buttonValue}).value;typeof V=="string"&&(V=V!==C.buttonValue,v.setValue(L,{value:V}));const W=document.createElement("input");if(a.add(W),W.setAttribute("data-element-id",L),W.disabled=C.readOnly,this._setRequired(W,this.data.required),W.type="radio",W.name=C.fieldName,V&&W.setAttribute("checked",!0),W.tabIndex=h,W.addEventListener("change",Z=>{const{name:$,checked:ce}=Z.target;for(const _e of this._getElementsByName($,L))v.setValue(_e.id,{value:!1});v.setValue(L,{value:ce})}),W.addEventListener("resetform",Z=>{const $=C.defaultFieldValue;Z.target.checked=$!=null&&$===C.buttonValue}),this.enableScripting&&this.hasJSActions){const Z=C.buttonValue;W.addEventListener("updatefromsandbox",$=>{const ce={value:_e=>{const de=Z===_e.detail.value;for(const he of this._getElementsByName(_e.target.name)){const fe=de&&he.id===L;he.domElement&&(he.domElement.checked=fe),v.setValue(he.id,{value:fe})}}};this._dispatchEventFromSandbox(ce,$)}),this._setEventListeners(W,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)}return this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class A extends t{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){const v=super.render();v.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(v.title=this.data.alternativeText);const C=v.lastChild;return this.enableScripting&&this.hasJSActions&&C&&(this._setDefaultPropertiesFromJS(C),C.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({},L)})),v}}class D extends s{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const v=this.annotationStorage,C=this.data.id,L=v.getValue(C,{value:this.data.fieldValue}),V=document.createElement("select");a.add(V),V.setAttribute("data-element-id",C),V.disabled=this.data.readOnly,this._setRequired(V,this.data.required),V.name=this.data.fieldName,V.tabIndex=h;let W=this.data.combo&&this.data.options.length>0;this.data.combo||(V.size=this.data.options.length,this.data.multiSelect&&(V.multiple=!0)),V.addEventListener("resetform",de=>{const he=this.data.defaultFieldValue;for(const fe of V.options)fe.selected=fe.value===he});for(const de of this.data.options){const he=document.createElement("option");he.textContent=de.displayValue,he.value=de.exportValue,L.value.includes(de.exportValue)&&(he.setAttribute("selected",!0),W=!1),V.append(he)}let Z=null;if(W){const de=document.createElement("option");de.value=" ",de.setAttribute("hidden",!0),de.setAttribute("selected",!0),V.prepend(de),Z=()=>{de.remove(),V.removeEventListener("input",Z),Z=null},V.addEventListener("input",Z)}const $=de=>{const he=de?"value":"textContent",{options:fe,multiple:re}=V;return re?Array.prototype.filter.call(fe,le=>le.selected).map(le=>le[he]):fe.selectedIndex===-1?null:fe[fe.selectedIndex][he]};let ce=$(!1);const _e=de=>{const he=de.target.options;return Array.prototype.map.call(he,fe=>({displayValue:fe.textContent,exportValue:fe.value}))};return this.enableScripting&&this.hasJSActions?(V.addEventListener("updatefromsandbox",de=>{const he={value(fe){Z?.();const re=fe.detail.value,le=new Set(Array.isArray(re)?re:[re]);for(const Se of V.options)Se.selected=le.has(Se.value);v.setValue(C,{value:$(!0)}),ce=$(!1)},multipleSelection(fe){V.multiple=!0},remove(fe){const re=V.options,le=fe.detail.remove;re[le].selected=!1,V.remove(le),re.length>0&&Array.prototype.findIndex.call(re,ve=>ve.selected)===-1&&(re[0].selected=!0),v.setValue(C,{value:$(!0),items:_e(fe)}),ce=$(!1)},clear(fe){for(;V.length!==0;)V.remove(0);v.setValue(C,{value:null,items:[]}),ce=$(!1)},insert(fe){const{index:re,displayValue:le,exportValue:Se}=fe.detail.insert,ve=V.children[re],be=document.createElement("option");be.textContent=le,be.value=Se,ve?ve.before(be):V.append(be),v.setValue(C,{value:$(!0),items:_e(fe)}),ce=$(!1)},items(fe){const{items:re}=fe.detail;for(;V.length!==0;)V.remove(0);for(const le of re){const{displayValue:Se,exportValue:ve}=le,be=document.createElement("option");be.textContent=Se,be.value=ve,V.append(be)}V.options.length>0&&(V.options[0].selected=!0),v.setValue(C,{value:$(!0),items:_e(fe)}),ce=$(!1)},indices(fe){const re=new Set(fe.detail.indices);for(const le of fe.target.options)le.selected=re.has(le.index);v.setValue(C,{value:$(!0)}),ce=$(!1)},editable(fe){fe.target.disabled=!fe.detail.editable}};this._dispatchEventFromSandbox(he,de)}),V.addEventListener("input",de=>{const he=$(!0);v.setValue(C,{value:he}),de.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ce,changeEx:he,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(V,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],de=>de.target.value)):V.addEventListener("input",function(de){v.setValue(C,{value:$(!0)})}),this.data.combo&&this._setTextStyle(V),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class P extends e{constructor(v){const{data:C,elements:L}=v;super(v,{isRenderable:e._hasPopupData(C)}),this.elements=L}render(){this.container.classList.add("popupAnnotation");const v=new R({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),C=[];for(const L of this.elements)L.popup=v,C.push(L.data.id),L.addHighlightArea();return this.container.setAttribute("aria-controls",C.map(L=>`${m.AnnotationPrefix}${L}`).join(",")),this.container}}class R{#e=null;#t=this.#u.bind(this);#n=this.#S.bind(this);#r=this.#w.bind(this);#s=this.#b.bind(this);#o=null;#a=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#g=null;#m=!1;constructor({container:v,color:C,elements:L,titleObj:V,modificationDate:W,contentsObj:Z,richText:$,parent:ce,rect:_e,parentRect:de,open:he}){this.#a=v,this.#g=V,this.#l=Z,this.#v=$,this.#i=ce,this.#o=C,this.#p=_e,this.#f=de,this.#c=L;const fe=y.PDFDateString.toDateObject(W);fe&&(this.#e=ce.l10n.get("annotation_date_string",{date:fe.toLocaleDateString(),time:fe.toLocaleTimeString()})),this.trigger=L.flatMap(re=>re.getElementsToTriggerPopup());for(const re of this.trigger)re.addEventListener("click",this.#s),re.addEventListener("mouseenter",this.#r),re.addEventListener("mouseleave",this.#n),re.classList.add("popupTriggerArea");for(const re of L)re.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,he&&this.#b()}render(){if(this.#h)return;const{page:{view:v},viewport:{rawDims:{pageWidth:C,pageHeight:L,pageX:V,pageY:W}}}=this.#i,Z=this.#h=document.createElement("div");if(Z.className="popup",this.#o){const Le=Z.style.outlineColor=m.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Z.style.backgroundColor=`color-mix(in srgb, ${Le} 30%, white)`:Z.style.backgroundColor=m.Util.makeHexColor(...this.#o.map(tt=>Math.floor(.7*(255-tt)+tt)))}const $=document.createElement("span");$.className="header";const ce=document.createElement("h1");if($.append(ce),{dir:ce.dir,str:ce.textContent}=this.#g,Z.append($),this.#e){const Le=document.createElement("span");Le.classList.add("popupDate"),this.#e.then(Ue=>{Le.textContent=Ue}),$.append(Le)}const _e=this.#l,de=this.#v;if(de?.str&&(!_e?.str||_e.str===de.str))K.XfaLayer.render({xfaHtml:de.html,intent:"richText",div:Z}),Z.lastChild.classList.add("richText","popupContent");else{const Le=this._formatContents(_e);Z.append(Le)}let he=!!this.#f,fe=he?this.#f:this.#p;for(const Le of this.#c)if(!fe||m.Util.intersect(Le.data.rect,fe)!==null){fe=Le.data.rect,he=!0;break}const re=m.Util.normalizeRect([fe[0],v[3]-fe[1]+v[1],fe[2],v[3]-fe[3]+v[1]]),Se=he?fe[2]-fe[0]+5:0,ve=re[0]+Se,be=re[1],{style:ke}=this.#a;ke.left=`${100*(ve-V)/C}%`,ke.top=`${100*(be-W)/L}%`,this.#a.append(Z)}_formatContents({str:v,dir:C}){const L=document.createElement("p");L.classList.add("popupContent"),L.dir=C;const V=v.split(/(?:\r\n?|\n)/);for(let W=0,Z=V.length;W<Z;++W){const $=V[W];L.append(document.createTextNode($)),W<Z-1&&L.append(document.createElement("br"))}return L}#u(v){v.altKey||v.shiftKey||v.ctrlKey||v.metaKey||(v.key==="Enter"||v.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#w(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#t)):(this.#S(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#t))}#w(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#S(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class j extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.textContent=v.data.textContent,this.textPosition=v.data.textPosition,this.annotationEditorType=m.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const v=document.createElement("div");v.classList.add("annotationTextContent"),v.setAttribute("role","comment");for(const C of this.textContent){const L=document.createElement("span");L.textContent=C,v.append(L)}this.container.append(v)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}d.FreeTextAnnotationElement=j;class w extends e{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const v=this.data,{width:C,height:L}=u(v.rect),V=this.svgFactory.create(C,L,!0),W=this.#e=this.svgFactory.createElement("svg:line");return W.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),W.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),W.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),W.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),W.setAttribute("stroke-width",v.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),V.append(W),this.container.append(V),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class N extends e{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const v=this.data,{width:C,height:L}=u(v.rect),V=this.svgFactory.create(C,L,!0),W=v.borderStyle.width,Z=this.#e=this.svgFactory.createElement("svg:rect");return Z.setAttribute("x",W/2),Z.setAttribute("y",W/2),Z.setAttribute("width",C-W),Z.setAttribute("height",L-W),Z.setAttribute("stroke-width",W||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),V.append(Z),this.container.append(V),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class H extends e{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const v=this.data,{width:C,height:L}=u(v.rect),V=this.svgFactory.create(C,L,!0),W=v.borderStyle.width,Z=this.#e=this.svgFactory.createElement("svg:ellipse");return Z.setAttribute("cx",C/2),Z.setAttribute("cy",L/2),Z.setAttribute("rx",C/2-W/2),Z.setAttribute("ry",L/2-W/2),Z.setAttribute("stroke-width",W||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),V.append(Z),this.container.append(V),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class X extends e{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:C,height:L}=u(v.rect),V=this.svgFactory.create(C,L,!0);let W=[];for(const $ of v.vertices){const ce=$.x-v.rect[0],_e=v.rect[3]-$.y;W.push(ce+","+_e)}W=W.join(" ");const Z=this.#e=this.svgFactory.createElement(this.svgElementName);return Z.setAttribute("points",W),Z.setAttribute("stroke-width",v.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),V.append(Z),this.container.append(V),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class G extends X{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class k extends e{#e=[];constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=m.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const v=this.data,{width:C,height:L}=u(v.rect),V=this.svgFactory.create(C,L,!0);for(const W of v.inkLists){let Z=[];for(const ce of W){const _e=ce.x-v.rect[0],de=v.rect[3]-ce.y;Z.push(`${_e},${de}`)}Z=Z.join(" ");const $=this.svgFactory.createElement(this.svgElementName);this.#e.push($),$.setAttribute("points",Z),$.setAttribute("stroke-width",v.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),!v.popupRef&&this.hasPopupData&&this._createPopup(),V.append($)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}d.InkAnnotationElement=k;class _ extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class p extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class b extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class M extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class F extends e{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}d.StampAnnotationElement=F;class I extends e{#e=null;constructor(v){super(v,{isRenderable:!0});const{filename:C,content:L}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(C,!0),this.content=L,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:C,content:L})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:v,data:C}=this;let L;C.hasAppearance||C.fillAlpha===0?L=document.createElement("div"):(L=document.createElement("img"),L.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(C.name)?"paperclip":"pushpin"}.svg`,C.fillAlpha&&C.fillAlpha<1&&(L.style=`filter: opacity(${Math.round(C.fillAlpha*100)}%);`)),L.addEventListener("dblclick",this.#t.bind(this)),this.#e=L;const{isMac:V}=m.FeatureTest.platform;return v.addEventListener("keydown",W=>{W.key==="Enter"&&(V?W.metaKey:W.ctrlKey)&&this.#t()}),!C.popupRef&&this.hasPopupData?this._createPopup():L.classList.add("popupTriggerArea"),v.append(L),v}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class q{#e=null;#t=null;#n=new Map;constructor({div:v,accessibilityManager:C,annotationCanvasMap:L,l10n:V,page:W,viewport:Z}){this.div=v,this.#e=C,this.#t=L,this.l10n=V,this.page=W,this.viewport=Z,this.zIndex=0,this.l10n||=z.NullL10n}#r(v,C){const L=v.firstChild||v;L.id=`${m.AnnotationPrefix}${C}`,this.div.append(v),this.#e?.moveElementInDOM(this.div,v,L,!1)}async render(v){const{annotations:C}=v,L=this.div;(0,y.setLayerDimensions)(L,this.viewport);const V=new Map,W={data:null,layer:L,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:v.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:v.annotationStorage||new o.AnnotationStorage,enableScripting:v.enableScripting===!0,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,parent:this,elements:null};for(const Z of C){if(Z.noHTML)continue;const $=Z.annotationType===m.AnnotationType.POPUP;if($){const de=V.get(Z.id);if(!de)continue;W.elements=de}else{const{width:de,height:he}=u(Z.rect);if(de<=0||he<=0)continue}W.data=Z;const ce=l.create(W);if(!ce.isRenderable)continue;if(!$&&Z.popupRef){const de=V.get(Z.popupRef);de?de.push(ce):V.set(Z.popupRef,[ce])}ce.annotationEditorType>0&&this.#n.set(ce.data.id,ce);const _e=ce.render();Z.hidden&&(_e.style.visibility="hidden"),this.#r(_e,Z.id)}this.#s(),await this.l10n.translate(L)}update({viewport:v}){const C=this.div;this.viewport=v,(0,y.setLayerDimensions)(C,{rotation:v.rotation}),this.#s(),C.hidden=!1}#s(){if(!this.#t)return;const v=this.div;for(const[C,L]of this.#t){const V=v.querySelector(`[data-annotation-id="${C}"]`);if(!V)continue;const{firstChild:W}=V;W?W.nodeName==="CANVAS"?W.replaceWith(L):W.before(L):V.append(L)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(v){return this.#n.get(v)}}d.AnnotationLayer=q}),((r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorConverters=void 0;function i(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function m(o){return Math.max(0,Math.min(255,255*o))}class y{static CMYK_G([T,z,K,h]){return["G",1-Math.min(1,.3*T+.59*K+.11*z+h)]}static G_CMYK([T]){return["CMYK",0,0,0,1-T]}static G_RGB([T]){return["RGB",T,T,T]}static G_rgb([T]){return T=m(T),[T,T,T]}static G_HTML([T]){const z=i(T);return`#${z}${z}${z}`}static RGB_G([T,z,K]){return["G",.3*T+.59*z+.11*K]}static RGB_rgb(T){return T.map(m)}static RGB_HTML(T){return`#${T.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([T,z,K,h]){return["RGB",1-Math.min(1,T+h),1-Math.min(1,K+h),1-Math.min(1,z+h)]}static CMYK_rgb([T,z,K,h]){return[m(1-Math.min(1,T+h)),m(1-Math.min(1,K+h)),m(1-Math.min(1,z+h))]}static CMYK_HTML(T){const z=this.CMYK_RGB(T).slice(1);return this.RGB_HTML(z)}static RGB_CMYK([T,z,K]){const h=1-T,n=1-z,a=1-K,u=Math.min(h,n,a);return["CMYK",h,n,a,u]}}d.ColorConverters=y}),((r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NullL10n=void 0,d.getL10nFallback=m;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function m(T,z){switch(T){case"find_match_count":T=`find_match_count[${z.total===1?"one":"other"}]`;break;case"find_match_count_limit":T=`find_match_count_limit[${z.limit===1?"one":"other"}]`;break}return i[T]||""}function y(T,z){return z?T.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(K,h)=>h in z?z[h]:"{{"+h+"}}"):T}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(T,z=null,K=m(T,z)){return y(K,z)},async translate(T){}};d.NullL10n=o}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayer=void 0;var m=i(25);class y{static setupStorage(T,z,K,h,n){const a=h.getValue(z,{value:null});switch(K.name){case"textarea":if(a.value!==null&&(T.textContent=a.value),n==="print")break;T.addEventListener("input",u=>{h.setValue(z,{value:u.target.value})});break;case"input":if(K.attributes.type==="radio"||K.attributes.type==="checkbox"){if(a.value===K.attributes.xfaOn?T.setAttribute("checked",!0):a.value===K.attributes.xfaOff&&T.removeAttribute("checked"),n==="print")break;T.addEventListener("change",u=>{h.setValue(z,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&T.setAttribute("value",a.value),n==="print")break;T.addEventListener("input",u=>{h.setValue(z,{value:u.target.value})})}break;case"select":if(a.value!==null){T.setAttribute("value",a.value);for(const u of K.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}T.addEventListener("input",u=>{const l=u.target.options,e=l.selectedIndex===-1?"":l[l.selectedIndex].value;h.setValue(z,{value:e})});break}}static setAttributes({html:T,element:z,storage:K=null,intent:h,linkService:n}){const{attributes:a}=z,u=T instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${h}`);for(const[l,e]of Object.entries(a))if(e!=null)switch(l){case"class":e.length&&T.setAttribute(l,e.join(" "));break;case"dataId":break;case"id":T.setAttribute("data-element-id",e);break;case"style":Object.assign(T.style,e);break;case"textContent":T.textContent=e;break;default:(!u||l!=="href"&&l!=="newWindow")&&T.setAttribute(l,e)}u&&n.addLinkAttributes(T,a.href,a.newWindow),K&&a.dataId&&this.setupStorage(T,a.dataId,z,K)}static render(T){const z=T.annotationStorage,K=T.linkService,h=T.xfaHtml,n=T.intent||"display",a=document.createElement(h.name);h.attributes&&this.setAttributes({html:a,element:h,intent:n,linkService:K});const u=[[h,-1,a]],l=T.div;if(l.append(a),T.viewport){const t=`matrix(${T.viewport.transform.join(",")})`;l.style.transform=t}n!=="richText"&&l.setAttribute("class","xfaLayer xfaFont");const e=[];for(;u.length>0;){const[t,c,s]=u.at(-1);if(c+1===t.children.length){u.pop();continue}const f=t.children[++u.at(-1)[1]];if(f===null)continue;const{name:x}=f;if(x==="#text"){const g=document.createTextNode(f.value);e.push(g),s.append(g);continue}const E=f?.attributes?.xmlns?document.createElementNS(f.attributes.xmlns,x):document.createElement(x);if(s.append(E),f.attributes&&this.setAttributes({html:E,element:f,storage:z,intent:n,linkService:K}),f.children&&f.children.length>0)u.push([f,-1,E]);else if(f.value){const g=document.createTextNode(f.value);m.XfaText.shouldBuildText(x)&&e.push(g),E.append(g)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:e}}static update(T){const z=`matrix(${T.viewport.transform.join(",")})`;T.div.style.transform=z,T.div.hidden=!1}}d.XfaLayer=y}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InkEditor=void 0;var m=i(1),y=i(4),o=i(29),T=i(6),z=i(5);class K extends y.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#s=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(n){super({...n,name:"inkEditor"}),this.color=n.color||null,this.thickness=n.thickness||null,this.opacity=n.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(n){y.AnnotationEditor.initialize(n,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(n,a){switch(n){case m.AnnotationEditorParamsType.INK_THICKNESS:K._defaultThickness=a;break;case m.AnnotationEditorParamsType.INK_COLOR:K._defaultColor=a;break;case m.AnnotationEditorParamsType.INK_OPACITY:K._defaultOpacity=a/100;break}}updateParams(n,a){switch(n){case m.AnnotationEditorParamsType.INK_THICKNESS:this.#v(a);break;case m.AnnotationEditorParamsType.INK_COLOR:this.#g(a);break;case m.AnnotationEditorParamsType.INK_OPACITY:this.#m(a);break}}static get defaultPropertiesToUpdate(){return[[m.AnnotationEditorParamsType.INK_THICKNESS,K._defaultThickness],[m.AnnotationEditorParamsType.INK_COLOR,K._defaultColor||y.AnnotationEditor._defaultLineColor],[m.AnnotationEditorParamsType.INK_OPACITY,Math.round(K._defaultOpacity*100)]]}get propertiesToUpdate(){return[[m.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||K._defaultThickness],[m.AnnotationEditorParamsType.INK_COLOR,this.color||K._defaultColor||y.AnnotationEditor._defaultLineColor],[m.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??K._defaultOpacity))]]}#v(n){const a=this.thickness;this.addCommands({cmd:()=>{this.thickness=n,this.#C()},undo:()=>{this.thickness=a,this.#C()},mustExec:!0,type:m.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(n){const a=this.color;this.addCommands({cmd:()=>{this.color=n,this.#_()},undo:()=>{this.color=a,this.#_()},mustExec:!0,type:m.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(n){n/=100;const a=this.opacity;this.addCommands({cmd:()=>{this.opacity=n,this.#_()},undo:()=>{this.opacity=a,this.#_()},mustExec:!0,type:m.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#T(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#C()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(n){!this.parent&&n?this._uiManager.removeShouldRescale(this):this.parent&&n===null&&this._uiManager.addShouldRescale(this),super.setParent(n)}onScaleChanging(){const[n,a]=this.parentDimensions,u=this.width*n,l=this.height*a;this.setDimensions(u,l)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:n,parentDimensions:[a,u]}=this;switch(n){case 90:return[0,u,u,a];case 180:return[a,u,a,u];case 270:return[a,0,u,a];default:return[0,0,a,u]}}#b(){const{ctx:n,color:a,opacity:u,thickness:l,parentScale:e,scaleFactor:t}=this;n.lineWidth=l*e/t,n.lineCap="round",n.lineJoin="round",n.miterLimit=10,n.strokeStyle=`${a}${(0,z.opacityToHex)(u)}`}#w(n,a){this.canvas.addEventListener("contextmenu",T.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#s),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#y(),this.thickness||=K._defaultThickness,this.color||=K._defaultColor||y.AnnotationEditor._defaultLineColor,this.opacity??=K._defaultOpacity),this.currentPath.push([n,a]),this.#c=!1,this.#b(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(n,a){const[u,l]=this.currentPath.at(-1);if(this.currentPath.length>1&&n===u&&a===l)return;const e=this.currentPath;let t=this.#a;if(e.push([n,a]),this.#c=!0,e.length<=2){t.moveTo(...e[0]),t.lineTo(n,a);return}e.length===3&&(this.#a=t=new Path2D,t.moveTo(...e[0])),this.#D(t,...e.at(-3),...e.at(-2),n,a)}#P(){if(this.currentPath.length===0)return;const n=this.currentPath.at(-1);this.#a.lineTo(...n)}#M(n,a){this.#p=null,n=Math.min(Math.max(n,0),this.canvas.width),a=Math.min(Math.max(a,0),this.canvas.height),this.#S(n,a),this.#P();let u;if(this.currentPath.length!==1)u=this.#O();else{const s=[n,a];u=[[s,s.slice(),s.slice(),s]]}const l=this.#a,e=this.currentPath;this.currentPath=[],this.#a=new Path2D;const t=()=>{this.allRawPaths.push(e),this.paths.push(u),this.bezierPath2D.push(l),this.rebuild()},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#T(),this.#x()),this.#C())};this.addCommands({cmd:t,undo:c,mustExec:!0})}#I(){if(!this.#c)return;this.#c=!1;const n=Math.ceil(this.thickness*this.parentScale),a=this.currentPath.slice(-3),u=a.map(t=>t[0]),l=a.map(t=>t[1]);Math.min(...u)-n,Math.max(...u)+n,Math.min(...l)-n,Math.max(...l)+n;const{ctx:e}=this;e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.bezierPath2D)e.stroke(t);e.stroke(this.#a),e.restore()}#D(n,a,u,l,e,t,c){const s=(a+l)/2,f=(u+e)/2,x=(l+t)/2,E=(e+c)/2;n.bezierCurveTo(s+2*(l-s)/3,f+2*(e-f)/3,x+2*(l-x)/3,E+2*(e-E)/3,x,E)}#O(){const n=this.currentPath;if(n.length<=2)return[[n[0],n[0],n.at(-1),n.at(-1)]];const a=[];let u,[l,e]=n[0];for(u=1;u<n.length-2;u++){const[g,A]=n[u],[D,P]=n[u+1],R=(g+D)/2,j=(A+P)/2,w=[l+2*(g-l)/3,e+2*(A-e)/3],N=[R+2*(g-R)/3,j+2*(A-j)/3];a.push([[l,e],w,N,[R,j]]),[l,e]=[R,j]}const[t,c]=n[u],[s,f]=n[u+1],x=[l+2*(t-l)/3,e+2*(c-e)/3],E=[s+2*(t-s)/3,f+2*(c-f)/3];return a.push([[l,e],x,E,[s,f]]),a}#_(){if(this.isEmpty()){this.#A();return}this.#b();const{canvas:n,ctx:a}=this;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,n.width,n.height),this.#A();for(const u of this.bezierPath2D)a.stroke(u)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#C(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),this.enableEditMode())}canvasPointerdown(n){n.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),n.preventDefault(),n.type!=="mouse"&&this.div.focus(),this.#w(n.offsetX,n.offsetY))}canvasPointermove(n){n.preventDefault(),this.#S(n.offsetX,n.offsetY)}canvasPointerup(n){n.preventDefault(),this.#F(n)}canvasPointerleave(n){this.#F(n)}#F(n){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#s),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",T.noContextMenu)},10),this.#M(n.offsetX,n.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#T(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(n=>this.canvas?.setAttribute("aria-label",n)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#f=new ResizeObserver(n=>{const a=n[0].contentRect;a.width&&a.height&&this.setDimensions(a.width,a.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let n,a;this.width&&(n=this.x,a=this.y),super.render(),y.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(c=>this.div?.setAttribute("aria-label",c));const[u,l,e,t]=this.#u();if(this.setAt(u,l,0,0),this.setDims(e,t),this.#T(),this.width){const[c,s]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*s),this.setAt(n*c,a*s,this.width*c,this.height*s),this.#i=!0,this.#y(),this.setDims(this.width*c,this.height*s),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#y(){if(!this.#i)return;const[n,a]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*a),this.#A()}setDimensions(n,a){const u=Math.round(n),l=Math.round(a);if(this.#d===u&&this.#h===l)return;this.#d=u,this.#h=l,this.canvas.style.visibility="hidden";const[e,t]=this.parentDimensions;this.width=n/e,this.height=a/t,this.fixAndSetPosition(),this.#l&&this.#k(n,a),this.#y(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#k(n,a){const u=this.#L(),l=(n-u)/this.#t,e=(a-u)/this.#e;this.scaleFactor=Math.min(l,e)}#A(){const n=this.#L()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+n,this.translationY*this.scaleFactor+n)}static#N(n){const a=new Path2D;for(let u=0,l=n.length;u<l;u++){const[e,t,c,s]=n[u];u===0&&a.moveTo(...e),a.bezierCurveTo(t[0],t[1],c[0],c[1],s[0],s[1])}return a}static#B(n,a,u){const[l,e,t,c]=a;switch(u){case 0:for(let s=0,f=n.length;s<f;s+=2)n[s]+=l,n[s+1]=c-n[s+1];break;case 90:for(let s=0,f=n.length;s<f;s+=2){const x=n[s];n[s]=n[s+1]+l,n[s+1]=x+e}break;case 180:for(let s=0,f=n.length;s<f;s+=2)n[s]=t-n[s],n[s+1]+=e;break;case 270:for(let s=0,f=n.length;s<f;s+=2){const x=n[s];n[s]=t-n[s+1],n[s+1]=c-x}break;default:throw new Error("Invalid rotation")}return n}static#j(n,a,u){const[l,e,t,c]=a;switch(u){case 0:for(let s=0,f=n.length;s<f;s+=2)n[s]-=l,n[s+1]=c-n[s+1];break;case 90:for(let s=0,f=n.length;s<f;s+=2){const x=n[s];n[s]=n[s+1]-e,n[s+1]=x-l}break;case 180:for(let s=0,f=n.length;s<f;s+=2)n[s]=t-n[s],n[s+1]-=e;break;case 270:for(let s=0,f=n.length;s<f;s+=2){const x=n[s];n[s]=c-n[s+1],n[s+1]=t-x}break;default:throw new Error("Invalid rotation")}return n}#z(n,a,u,l){const e=[],t=this.thickness/2,c=n*a+t,s=n*u+t;for(const f of this.paths){const x=[],E=[];for(let g=0,A=f.length;g<A;g++){const[D,P,R,j]=f[g],w=n*D[0]+c,N=n*D[1]+s,H=n*P[0]+c,X=n*P[1]+s,G=n*R[0]+c,U=n*R[1]+s,k=n*j[0]+c,_=n*j[1]+s;g===0&&(x.push(w,N),E.push(w,N)),x.push(H,X,G,U,k,_),E.push(H,X),g===A-1&&E.push(k,_)}e.push({bezier:K.#B(x,l,this.rotation),points:K.#B(E,l,this.rotation)})}return e}#R(){let n=1/0,a=-1/0,u=1/0,l=-1/0;for(const e of this.paths)for(const[t,c,s,f]of e){const x=m.Util.bezierBoundingBox(...t,...c,...s,...f);n=Math.min(n,x[0]),u=Math.min(u,x[1]),a=Math.max(a,x[2]),l=Math.max(l,x[3])}return[n,u,a,l]}#L(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#C(n=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const a=this.#R(),u=this.#L();this.#t=Math.max(y.AnnotationEditor.MIN_SIZE,a[2]-a[0]),this.#e=Math.max(y.AnnotationEditor.MIN_SIZE,a[3]-a[1]);const l=Math.ceil(u+this.#t*this.scaleFactor),e=Math.ceil(u+this.#e*this.scaleFactor),[t,c]=this.parentDimensions;this.width=l/t,this.height=e/c,this.setAspectRatio(l,e);const s=this.translationX,f=this.translationY;this.translationX=-a[0],this.translationY=-a[1],this.#y(),this.#_(),this.#d=l,this.#h=e,this.setDims(l,e);const x=n?u/this.scaleFactor/2:0;this.translate(s-this.translationX-x,f-this.translationY-x)}static deserialize(n,a,u){if(n instanceof o.InkAnnotationElement)return null;const l=super.deserialize(n,a,u);l.thickness=n.thickness,l.color=m.Util.makeHexColor(...n.color),l.opacity=n.opacity;const[e,t]=l.pageDimensions,c=l.width*e,s=l.height*t,f=l.parentScale,x=n.thickness/2;l.#l=!0,l.#d=Math.round(c),l.#h=Math.round(s);const{paths:E,rect:g,rotation:A}=n;for(let{bezier:P}of E){P=K.#j(P,g,A);const R=[];l.paths.push(R);let j=f*(P[0]-x),w=f*(P[1]-x);for(let H=2,X=P.length;H<X;H+=6){const G=f*(P[H]-x),U=f*(P[H+1]-x),k=f*(P[H+2]-x),_=f*(P[H+3]-x),p=f*(P[H+4]-x),b=f*(P[H+5]-x);R.push([[j,w],[G,U],[k,_],[p,b]]),j=p,w=b}const N=this.#N(R);l.bezierPath2D.push(N)}const D=l.#R();return l.#t=Math.max(y.AnnotationEditor.MIN_SIZE,D[2]-D[0]),l.#e=Math.max(y.AnnotationEditor.MIN_SIZE,D[3]-D[1]),l.#k(c,s),l}serialize(){if(this.isEmpty())return null;const n=this.getRect(0,0),a=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:m.AnnotationEditorType.INK,color:a,thickness:this.thickness,opacity:this.opacity,paths:this.#z(this.scaleFactor/this.parentScale,this.translationX,this.translationY,n),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}d.InkEditor=K}),((r,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StampEditor=void 0;var m=i(1),y=i(4),o=i(6),T=i(29);class z extends y.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#s=null;#o=null;#a=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(h){super({...h,name:"stampEditor"}),this.#r=h.bitmapUrl,this.#s=h.bitmapFile}static initialize(h){y.AnnotationEditor.initialize(h)}static get supportedTypes(){const h=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,m.shadow)(this,"supportedTypes",h.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,m.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(h){return this.supportedTypes.includes(h)}static paste(h,n){n.pasteEditor(m.AnnotationEditorType.STAMP,{bitmapFile:h.getAsFile()})}#f(h,n=!1){if(!h){this.remove();return}this.#e=h.bitmap,n||(this.#t=h.id,this.#c=h.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#f(n,!0)).finally(()=>this.#d());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(a=>this.#f(a)).finally(()=>this.#d());return}if(this.#s){const n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(a=>this.#f(a)).finally(()=>this.#d());return}const h=document.createElement("input");h.type="file",h.accept=z.supportedTypesStr,this.#n=new Promise(n=>{h.addEventListener("change",async()=>{if(!h.files||h.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(h.files[0]);this.#f(a)}n()}),h.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>this.#d()),h.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#s)}get isResizable(){return!0}render(){if(this.div)return this.div;let h,n;if(this.width&&(h=this.x,n=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[a,u]=this.parentDimensions;this.setAt(h*a,n*u,this.width*a,this.height*u)}return this.div}#p(){const{div:h}=this;let{width:n,height:a}=this.#e;const[u,l]=this.pageDimensions,e=.75;if(this.width)n=this.width*u,a=this.height*l;else if(n>e*u||a>e*l){const f=Math.min(e*u/n,e*l/a);n*=f,a*=f}const[t,c]=this.parentDimensions;this.setDims(n*t/u,a*c/l),this._uiManager.enableWaiting(!1);const s=this.#o=document.createElement("canvas");h.append(s),h.hidden=!1,this.#m(n,a),this.#b(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(h,n){const[a,u]=this.parentDimensions;this.width=h/a,this.height=n/u,this.setDims(h,n),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const l=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(h,n)},l)}#g(h,n){const{width:a,height:u}=this.#e;let l=a,e=u,t=this.#e;for(;l>2*h||e>2*n;){const c=l,s=e;l>2*h&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),e>2*n&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));const f=new OffscreenCanvas(l,e);f.getContext("2d").drawImage(t,0,0,c,s,0,0,l,e),t=f.transferToImageBitmap()}return t}#m(h,n){h=Math.ceil(h),n=Math.ceil(n);const a=this.#o;if(!a||a.width===h&&a.height===n)return;a.width=h,a.height=n;const u=this.#c?this.#e:this.#g(h,n),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(u,0,0,u.width,u.height,0,0,h,n)}#u(h){if(h){if(this.#c){const u=this._uiManager.imageManager.getSvgUrl(this.#t);if(u)return u}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#e,n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#c){const[n,a]=this.pageDimensions,u=Math.round(this.width*n*o.PixelsPerInch.PDF_TO_CSS_UNITS),l=Math.round(this.height*a*o.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(u,l);return e.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,u,l),e.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this.#a=new ResizeObserver(h=>{const n=h[0].contentRect;n.width&&n.height&&this.#v(n.width,n.height)}),this.#a.observe(this.div)}static deserialize(h,n,a){if(h instanceof T.StampAnnotationElement)return null;const u=super.deserialize(h,n,a),{rect:l,bitmapUrl:e,bitmapId:t,isSvg:c,accessibilityData:s}=h;t&&a.imageManager.isValidId(t)?u.#t=t:u.#r=e,u.#c=c;const[f,x]=u.pageDimensions;return u.width=(l[2]-l[0])/f,u.height=(l[3]-l[1])/x,s&&(u.altTextData=s),u}serialize(h=!1,n=null){if(this.isEmpty())return null;const a={annotationType:m.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(h)return a.bitmapUrl=this.#u(!0),a.accessibilityData=this.altTextData,a;const{decorative:u,altText:l}=this.altTextData;if(!u&&l&&(a.accessibilityData={type:"Figure",alt:l}),n===null)return a;n.stamps||=new Map;const e=this.#c?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(this.#t))n.stamps.set(this.#t,{area:e,serialized:a}),a.bitmap=this.#u(!1);else if(this.#c){const t=n.stamps.get(this.#t);e>t.area&&(t.area=e,t.serialized.bitmap.close(),t.serialized.bitmap=this.#u(!1))}return a}}d.StampEditor=z})],__webpack_module_cache__={};function __w_pdfjs_require__(r){var d=__webpack_module_cache__[r];if(d!==void 0)return d.exports;var i=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var r=__webpack_exports__;Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AbortException",{enumerable:!0,get:function(){return d.AbortException}}),Object.defineProperty(r,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(r,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return d.AnnotationEditorParamsType}}),Object.defineProperty(r,"AnnotationEditorType",{enumerable:!0,get:function(){return d.AnnotationEditorType}}),Object.defineProperty(r,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return T.AnnotationEditorUIManager}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return z.AnnotationLayer}}),Object.defineProperty(r,"AnnotationMode",{enumerable:!0,get:function(){return d.AnnotationMode}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return d.CMapCompressionType}}),Object.defineProperty(r,"DOMSVGFactory",{enumerable:!0,get:function(){return m.DOMSVGFactory}}),Object.defineProperty(r,"FeatureTest",{enumerable:!0,get:function(){return d.FeatureTest}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return K.GlobalWorkerOptions}}),Object.defineProperty(r,"ImageKind",{enumerable:!0,get:function(){return d.ImageKind}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return d.InvalidPDFException}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return d.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return d.OPS}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return m.PDFDateString}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return d.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return d.PermissionFlag}}),Object.defineProperty(r,"PixelsPerInch",{enumerable:!0,get:function(){return m.PixelsPerInch}}),Object.defineProperty(r,"PromiseCapability",{enumerable:!0,get:function(){return d.PromiseCapability}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return m.RenderingCancelledException}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return d.UnexpectedResponseException}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return d.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return d.VerbosityLevel}}),Object.defineProperty(r,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return d.createValidAbsoluteUrl}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return m.getFilenameFromUrl}}),Object.defineProperty(r,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return m.getPdfFilenameFromUrl}}),Object.defineProperty(r,"getXfaPageViewport",{enumerable:!0,get:function(){return m.getXfaPageViewport}}),Object.defineProperty(r,"isDataScheme",{enumerable:!0,get:function(){return m.isDataScheme}}),Object.defineProperty(r,"isPdfFile",{enumerable:!0,get:function(){return m.isPdfFile}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return m.loadScript}}),Object.defineProperty(r,"noContextMenu",{enumerable:!0,get:function(){return m.noContextMenu}}),Object.defineProperty(r,"normalizeUnicode",{enumerable:!0,get:function(){return d.normalizeUnicode}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(r,"setLayerDimensions",{enumerable:!0,get:function(){return m.setLayerDimensions}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return d.shadow}}),Object.defineProperty(r,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return i.version}});var d=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),m=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),T=__w_pdfjs_require__(5),z=__w_pdfjs_require__(29),K=__w_pdfjs_require__(14),h=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(r){var d=requireReact(),i=requirePdf();function m(S){var O=Object.create(null);return S&&Object.keys(S).forEach((function(Y){if(Y!=="default"){var J=Object.getOwnPropertyDescriptor(S,Y);Object.defineProperty(O,Y,J.get?J:{enumerable:!0,get:function(){return S[Y]}})}})),O.default=S,Object.freeze(O)}var y,o=m(d),T=m(i);r.AnnotationType=void 0,(y=r.AnnotationType||(r.AnnotationType={}))[y.Text=1]="Text",y[y.Link=2]="Link",y[y.FreeText=3]="FreeText",y[y.Line=4]="Line",y[y.Square=5]="Square",y[y.Circle=6]="Circle",y[y.Polygon=7]="Polygon",y[y.Polyline=8]="Polyline",y[y.Highlight=9]="Highlight",y[y.Underline=10]="Underline",y[y.Squiggly=11]="Squiggly",y[y.StrikeOut=12]="StrikeOut",y[y.Stamp=13]="Stamp",y[y.Caret=14]="Caret",y[y.Ink=15]="Ink",y[y.Popup=16]="Popup",y[y.FileAttachment=17]="FileAttachment";var z=function(S,O){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,J){Y.__proto__=J}||function(Y,J){for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&(Y[ee]=J[ee])},z(S,O)};function K(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function Y(){this.constructor=S}z(S,O),S.prototype=O===null?Object.create(O):(Y.prototype=O.prototype,new Y)}var h,n=function(){return n=Object.assign||function(S){for(var O,Y=1,J=arguments.length;Y<J;Y++)for(var ee in O=arguments[Y])Object.prototype.hasOwnProperty.call(O,ee)&&(S[ee]=O[ee]);return S},n.apply(this,arguments)};r.TextDirection=void 0,(h=r.TextDirection||(r.TextDirection={})).RightToLeft="RTL",h.LeftToRight="LTR";var a,u=o.createContext({currentTheme:"light",direction:r.TextDirection.LeftToRight,setCurrentTheme:function(){}}),l=function(S){var O=[];return Object.keys(S).forEach((function(Y){Y&&S[Y]&&O.push(Y)})),O.join(" ")},e=typeof window<"u"?o.useLayoutEffect:o.useEffect,t=function(S){var O=o.useRef(null),Y=S.once,J=S.threshold,ee=S.onVisibilityChanged;return e((function(){var te=O.current;if(te){var oe=new IntersectionObserver((function(ne){ne.forEach((function(Q){var ae=Q.isIntersecting,ie=Q.intersectionRatio;ee({isVisible:ae,ratio:ie}),ae&&Y&&(oe.unobserve(te),oe.disconnect())}))}),{threshold:J||0});return oe.observe(te),function(){oe.unobserve(te),oe.disconnect()}}}),[]),O},c=function(S){var O=S.children,Y=S.ignoreDirection,J=Y!==void 0&&Y,ee=S.size,te=ee===void 0?24:ee,oe=o.useContext(u).direction,ne=!J&&oe===r.TextDirection.RightToLeft,Q="".concat(te||24,"px");return o.createElement("svg",{"aria-hidden":"true",className:l({"rpv-core__icon":!0,"rpv-core__icon--rtl":ne}),focusable:"false",height:Q,viewBox:"0 0 24 24",width:Q},O)},s=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},f=function(S){var O=S.children,Y=S.testId,J=S.onClick,ee=o.useContext(u).direction===r.TextDirection.RightToLeft,te=Y?{"data-testid":Y}:{};return o.createElement("button",n({className:l({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":ee}),type:"button",onClick:J},te),O)},x=function(S){var O=S.size,Y=O===void 0?"4rem":O,J=S.testId,ee=o.useState(!1),te=ee[0],oe=ee[1],ne=J?{"data-testid":J}:{},Q=t({onVisibilityChanged:function(ae){oe(ae.isVisible)}});return o.createElement("div",n({},ne,{className:l({"rpv-core__spinner":!0,"rpv-core__spinner--animating":te}),ref:Q,style:{height:Y,width:Y}}))},E=function(S){var O=S.ariaLabel,Y=O===void 0?"":O,J=S.autoFocus,ee=J!==void 0&&J,te=S.placeholder,oe=te===void 0?"":te,ne=S.testId,Q=S.type,ae=Q===void 0?"text":Q,ie=S.value,ge=ie===void 0?"":ie,me=S.onChange,pe=S.onKeyDown,Ce=pe===void 0?function(){}:pe,Ae=o.useContext(u).direction,we=o.useRef(),Ye=Ae===r.TextDirection.RightToLeft,De={ref:we,"data-testid":"","aria-label":Y,className:l({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Ye}),placeholder:oe,value:ge,onChange:function(Oe){return me(Oe.target.value)},onKeyDown:Ce};return ne&&(De["data-testid"]=ne),e((function(){if(ee){var Oe=we.current;if(Oe){var ze=window.scrollX,Te=window.scrollY;Oe.focus(),window.scrollTo(ze,Te)}}}),[]),ae==="text"?o.createElement("input",n({type:"text"},De)):o.createElement("input",n({type:"password"},De))};(function(S){S[S.ExitFullScreen=0]="ExitFullScreen",S[S.FullScreenChange=1]="FullScreenChange",S[S.FullScreenElement=2]="FullScreenElement",S[S.FullScreenEnabled=3]="FullScreenEnabled",S[S.RequestFullScreen=4]="RequestFullScreen"})(a||(a={}));var g,A={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},D={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},P={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},R=typeof window<"u",j=R&&(a.FullScreenEnabled in document&&A||D.FullScreenEnabled in document&&D||P.FullScreenEnabled in document&&P)||A,w=function(){return R&&j.FullScreenEnabled in document&&document[j.FullScreenEnabled]===!0},N=function(S){return R?S[j.ExitFullScreen]():Promise.resolve({})},H=function(){return R?document[j.FullScreenElement]:null},X=function(S,O){var Y=o.useRef(),J=function(){Y.current&&clearTimeout(Y.current)};return o.useEffect((function(){return function(){return J()}}),[]),o.useCallback((function(){for(var ee=[],te=0;te<arguments.length;te++)ee[te]=arguments[te];J(),Y.current=setTimeout((function(){S.apply(void 0,ee)}),O)}),[S,O])},G=function(){var S=o.useRef(!1);return o.useEffect((function(){return S.current=!0,function(){S.current=!1}}),[]),S},U=function(S){var O=o.useRef(S);return o.useEffect((function(){O.current=S}),[S]),O.current};(function(S){S.NotRenderedYet="NotRenderedYet",S.Rendering="Rendering",S.Rendered="Rendered"})(g||(g={}));var k,_=-9999,p=function(S){var O=S.doc,Y=O.numPages,J=O.loadingTask.docId,ee=o.useMemo((function(){return Array(Y).fill(null).map((function(ne,Q){return{pageIndex:Q,renderStatus:g.NotRenderedYet,visibility:_}}))}),[J]),te=o.useRef({currentRenderingPage:-1,startRange:0,endRange:Y-1,visibilities:ee}),oe=function(ne,Q){te.current.visibilities[ne].visibility=Q};return{getHighestPriorityPage:function(){var ne=te.current.visibilities.slice(te.current.startRange,te.current.endRange+1).filter((function(me){return me.visibility>_}));if(!ne.length)return-1;for(var Q=ne[0].pageIndex,ae=ne[ne.length-1].pageIndex,ie=ne.length,ge=0;ge<ie;ge++){if(ne[ge].renderStatus===g.Rendering)return-1;if(ne[ge].renderStatus===g.NotRenderedYet)return ne[ge].pageIndex}return ae+1<Y&&te.current.visibilities[ae+1].renderStatus!==g.Rendered?ae+1:Q-1>=0&&te.current.visibilities[Q-1].renderStatus!==g.Rendered?Q-1:-1},isInRange:function(ne){return ne>=te.current.startRange&&ne<=te.current.endRange},markNotRendered:function(){for(var ne=0;ne<Y;ne++)te.current.visibilities[ne].renderStatus=g.NotRenderedYet},markRendered:function(ne){te.current.visibilities[ne].renderStatus=g.Rendered},markRendering:function(ne){te.current.currentRenderingPage!==-1&&te.current.currentRenderingPage!==ne&&te.current.visibilities[te.current.currentRenderingPage].renderStatus===g.Rendering&&(te.current.visibilities[te.current.currentRenderingPage].renderStatus=g.NotRenderedYet),te.current.visibilities[ne].renderStatus=g.Rendering,te.current.currentRenderingPage=ne},setOutOfRange:function(ne){oe(ne,_)},setRange:function(ne,Q){te.current.startRange=ne,te.current.endRange=Q;for(var ae=0;ae<Y;ae++)(ae<ne||ae>Q)&&(te.current.visibilities[ae].visibility=_,te.current.visibilities[ae].renderStatus=g.NotRenderedYet)},setVisibility:oe}},b={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},M=o.createContext({l10n:b,setL10n:function(){}}),F=0,I=function(){return F++},q=function(S,O,Y){var J=function(ee){var te=O.current;if(te){var oe=ee.target;if(oe instanceof Element&&oe.shadowRoot){var ne=ee.composedPath();ne.length>0&&!te.contains(ne[0])&&Y()}else te.contains(oe)||Y()}};o.useEffect((function(){if(S){var ee={capture:!0};return document.addEventListener("click",J,ee),function(){document.removeEventListener("click",J,ee)}}}),[])},B=function(S){var O=function(Y){Y.key==="Escape"&&S()};o.useEffect((function(){return document.addEventListener("keyup",O),function(){document.removeEventListener("keyup",O)}}),[])},v=function(S){var O=S.ariaControlsSuffix,Y=S.children,J=S.closeOnClickOutside,ee=S.closeOnEscape,te=S.onToggle,oe=o.useRef(),ne=o.useContext(u).direction===r.TextDirection.RightToLeft;return o.useEffect((function(){var Q=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Q}}),[]),B((function(){oe.current&&ee&&te()})),q(J,oe,te),e((function(){var Q=oe.current;if(Q){var ae=.75*document.body.clientHeight;Q.getBoundingClientRect().height>=ae&&(Q.style.overflow="auto",Q.style.maxHeight="".concat(ae,"px"))}}),[]),o.createElement("div",{"aria-modal":"true",className:l({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":ne}),id:"rpv-core__modal-body-".concat(O),ref:oe,role:"dialog",tabIndex:-1},Y)},C=function(S){var O=S.children;return o.createElement("div",{className:"rpv-core__modal-overlay"},O)};r.ToggleStatus=void 0,(k=r.ToggleStatus||(r.ToggleStatus={})).Close="Close",k.Open="Open",k.Toggle="Toggle";var L,V=function(S){var O=o.useState(S),Y=O[0],J=O[1];return{opened:Y,toggle:function(ee){switch(ee){case r.ToggleStatus.Close:J(!1);break;case r.ToggleStatus.Open:J(!0);break;case r.ToggleStatus.Toggle:default:J((function(te){return!te}))}}}},W=function(S){var O=S.content,Y=S.isOpened,J=Y!==void 0&&Y,ee=S.target,te=V(J),oe=te.opened,ne=te.toggle;return o.createElement(o.Fragment,null,ee&&ee(ne,oe),oe&&O(ne))};r.Position=void 0,(L=r.Position||(r.Position={})).TopLeft="TOP_LEFT",L.TopCenter="TOP_CENTER",L.TopRight="TOP_RIGHT",L.RightTop="RIGHT_TOP",L.RightCenter="RIGHT_CENTER",L.RightBottom="RIGHT_BOTTOM",L.BottomLeft="BOTTOM_LEFT",L.BottomCenter="BOTTOM_CENTER",L.BottomRight="BOTTOM_RIGHT",L.LeftTop="LEFT_TOP",L.LeftCenter="LEFT_CENTER",L.LeftBottom="LEFT_BOTTOM";var Z,$,ce,_e,de,he,fe,re,le=function(S,O,Y,J,ee){e((function(){var te=O.current,oe=S.current,ne=Y.current;if(oe&&te&&ne){var Q=ne.getBoundingClientRect(),ae=(function(me,pe,Ce,Ae){var we=pe.getBoundingClientRect(),Ye=me.getBoundingClientRect(),De=Ye.height,Oe=Ye.width,ze=0,Te=0;switch(Ce){case r.Position.TopLeft:ze=we.top-De,Te=we.left;break;case r.Position.TopCenter:ze=we.top-De,Te=we.left+we.width/2-Oe/2;break;case r.Position.TopRight:ze=we.top-De,Te=we.left+we.width-Oe;break;case r.Position.RightTop:ze=we.top,Te=we.left+we.width;break;case r.Position.RightCenter:ze=we.top+we.height/2-De/2,Te=we.left+we.width;break;case r.Position.RightBottom:ze=we.top+we.height-De,Te=we.left+we.width;break;case r.Position.BottomLeft:ze=we.top+we.height,Te=we.left;break;case r.Position.BottomCenter:ze=we.top+we.height,Te=we.left+we.width/2-Oe/2;break;case r.Position.BottomRight:ze=we.top+we.height,Te=we.left+we.width-Oe;break;case r.Position.LeftTop:ze=we.top,Te=we.left-Oe;break;case r.Position.LeftCenter:ze=we.top+we.height/2-De/2,Te=we.left-Oe;break;case r.Position.LeftBottom:ze=we.top+we.height-De,Te=we.left-Oe}return{left:Te+(Ae.left||0),top:ze+(Ae.top||0)}})(oe,te,J,ee),ie=ae.top,ge=ae.left;oe.style.top="".concat(ie-Q.top,"px"),oe.style.left="".concat(ge-Q.left,"px")}}),[])},Se=function(S){var O,Y=S.customClassName,J=S.position;return o.createElement("div",{className:l((O={"rpv-core__arrow":!0,"rpv-core__arrow--tl":J===r.Position.TopLeft,"rpv-core__arrow--tc":J===r.Position.TopCenter,"rpv-core__arrow--tr":J===r.Position.TopRight,"rpv-core__arrow--rt":J===r.Position.RightTop,"rpv-core__arrow--rc":J===r.Position.RightCenter,"rpv-core__arrow--rb":J===r.Position.RightBottom,"rpv-core__arrow--bl":J===r.Position.BottomLeft,"rpv-core__arrow--bc":J===r.Position.BottomCenter,"rpv-core__arrow--br":J===r.Position.BottomRight,"rpv-core__arrow--lt":J===r.Position.LeftTop,"rpv-core__arrow--lc":J===r.Position.LeftCenter,"rpv-core__arrow--lb":J===r.Position.LeftBottom},O["".concat(Y)]=Y!=="",O))})},ve=function(S){var O=S.ariaControlsSuffix,Y=S.children,J=S.closeOnClickOutside,ee=S.offset,te=S.position,oe=S.targetRef,ne=S.onClose,Q=o.useRef(),ae=o.useRef(),ie=o.useRef(),ge=o.useContext(u).direction===r.TextDirection.RightToLeft;q(J,Q,ne),le(Q,oe,ie,te,ee),e((function(){var pe=ae.current;if(pe){var Ce=.75*document.body.clientHeight;pe.getBoundingClientRect().height>=Ce&&(pe.style.overflow="auto",pe.style.maxHeight="".concat(Ce,"px"))}}),[]);var me="rpv-core__popover-body-inner-".concat(O);return o.createElement(o.Fragment,null,o.createElement("div",{ref:ie,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{"aria-describedby":me,className:l({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ge}),id:"rpv-core__popover-body-".concat(O),ref:Q,role:"dialog",tabIndex:-1},o.createElement(Se,{customClassName:"rpv-core__popover-body-arrow",position:te}),o.createElement("div",{id:me,ref:ae},Y)))},be=function(S){var O=S.closeOnEscape,Y=S.onClose,J=o.useRef();return B((function(){J.current&&O&&Y()})),o.createElement("div",{className:"rpv-core__popover-overlay",ref:J})},ke=function(S){var O=S.ariaControlsSuffix,Y=S.children,J=S.contentRef,ee=S.offset,te=S.position,oe=S.targetRef,ne=o.useRef(),Q=o.useContext(u).direction===r.TextDirection.RightToLeft;return le(J,oe,ne,te,ee),o.createElement(o.Fragment,null,o.createElement("div",{ref:ne,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:l({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Q}),id:"rpv-core__tooltip-body-".concat(O),ref:J,role:"tooltip"},o.createElement(Se,{customClassName:"rpv-core__tooltip-body-arrow",position:te}),o.createElement("div",{className:"rpv-core__tooltip-body-content"},Y)))};r.FullScreenMode=void 0,(Z=r.FullScreenMode||(r.FullScreenMode={})).Normal="Normal",Z.Entering="Entering",Z.Entered="Entered",Z.EnteredCompletely="EnteredCompletely",Z.Exitting="Exitting",Z.Exited="Exited",r.LayerRenderStatus=void 0,($=r.LayerRenderStatus||(r.LayerRenderStatus={}))[$.PreRender=0]="PreRender",$[$.DidRender=1]="DidRender",r.PageMode=void 0,(ce=r.PageMode||(r.PageMode={})).Attachments="UseAttachments",ce.Bookmarks="UseOutlines",ce.ContentGroup="UseOC",ce.Default="UserNone",ce.FullScreen="FullScreen",ce.Thumbnails="UseThumbs",r.PasswordStatus=void 0,(_e=r.PasswordStatus||(r.PasswordStatus={})).RequiredPassword="RequiredPassword",_e.WrongPassword="WrongPassword",r.RotateDirection=void 0,(de=r.RotateDirection||(r.RotateDirection={})).Backward="Backward",de.Forward="Forward",r.ScrollMode=void 0,(he=r.ScrollMode||(r.ScrollMode={})).Page="Page",he.Horizontal="Horizontal",he.Vertical="Vertical",he.Wrapped="Wrapped",r.SpecialZoomLevel=void 0,(fe=r.SpecialZoomLevel||(r.SpecialZoomLevel={})).ActualSize="ActualSize",fe.PageFit="PageFit",fe.PageWidth="PageWidth",r.ViewMode=void 0,(re=r.ViewMode||(r.ViewMode={})).DualPage="DualPage",re.DualPageWithCover="DualPageWithCover",re.SinglePage="SinglePage";var Le,Ue=function(S,O){return S.reduce((function(Y,J,ee){return ee%O?Y[Y.length-1].push(J):Y.push([J]),Y}),[])},tt=function(S,O){switch(O[1].name){case"XYZ":return{bottomOffset:function(Y,J){return O[3]===null?J:O[3]},leftOffset:function(Y,J){return O[2]===null?0:O[2]},pageIndex:S,scaleTo:O[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:S,scaleTo:r.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:O[2],leftOffset:0,pageIndex:S,scaleTo:r.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:S,scaleTo:1}}},Je=new Map,gt=new Map,rt=function(S,O){return"".concat(S.loadingTask.docId,"___").concat(O.num,"R").concat(O.gen===0?"":O.gen)},ft=function(S,O,Y){Je.set(rt(S,O),Y)},st=function(S,O){if(!S)return Promise.reject("The document is not loaded yet");var Y="".concat(S.loadingTask.docId,"___").concat(O),J=gt.get(Y);return J?Promise.resolve(J):new Promise((function(ee,te){S.getPage(O+1).then((function(oe){gt.set(Y,oe),oe.ref&&ft(S,oe.ref,O),ee(oe)}))}))},jt=function(S,O){return new Promise((function(Y){new Promise((function(J){typeof O=="string"?S.getDestination(O).then((function(ee){J(ee)})):J(O)})).then((function(J){if(typeof J[0]=="object"&&J[0]!==null){var ee=J[0],te=(function(ne,Q){var ae=rt(ne,Q);return Je.has(ae)?Je.get(ae):null})(S,ee);te===null?S.getPageIndex(ee).then((function(ne){ft(S,ee,ne),jt(S,O).then((function(Q){return Y(Q)}))})):Y(tt(te,J))}else{var oe=tt(J[0],J);Y(oe)}}))}))};(function(S){S[S.Solid=1]="Solid",S[S.Dashed=2]="Dashed",S[S.Beveled=3]="Beveled",S[S.Inset=4]="Inset",S[S.Underline=5]="Underline"})(Le||(Le={}));var _t,ye=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),ue=function(S,O,Y,J){var ee=parseInt(S,10);return ee>=O&&ee<=Y?ee:J},se=function(S){return S.contentsObj?S.contentsObj.str:S.contents||""},Pe=function(S){return S.titleObj?S.titleObj.str:S.title||""},it=function(S){var O=S.annotation,Y=o.useContext(u).direction,J=Pe(O),ee=se(O),te=Y===r.TextDirection.RightToLeft,oe=o.useRef(),ne="";if(O.modificationDate){var Q=(function(ae){var ie=ye.exec(ae);if(!ie)return null;var ge=parseInt(ie[1],10),me=ue(ie[2],1,12,1)-1,pe=ue(ie[3],1,31,1),Ce=ue(ie[4],0,23,0),Ae=ue(ie[5],0,59,0),we=ue(ie[6],0,59,0),Ye=ie[7]||"Z",De=ue(ie[8],0,23,0),Oe=ue(ie[9],0,59,0);switch(Ye){case"-":Ce+=De,Ae+=Oe;break;case"+":Ce-=De,Ae-=Oe}return new Date(Date.UTC(ge,me,pe,Ce,Ae,we))})(O.modificationDate);ne=Q?"".concat(Q.toLocaleDateString(),", ").concat(Q.toLocaleTimeString()):""}return o.useLayoutEffect((function(){if(oe.current){var ae=document.querySelector('[data-annotation-id="'.concat(O.id,'"]'));if(ae){var ie=ae;return ie.style.zIndex+=1,function(){ie.style.zIndex="".concat(parseInt(ie.style.zIndex,10)-1)}}}}),[]),o.createElement("div",{ref:oe,className:l({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":te}),style:{top:O.annotationType===r.AnnotationType.Popup?"":"100%"}},J&&o.createElement(o.Fragment,null,o.createElement("div",{className:l({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!te,"rpv-core__annotation-popup-title--rtl":te})},J),o.createElement("div",{className:"rpv-core__annotation-popup-date"},ne)),ee&&o.createElement("div",{className:"rpv-core__annotation-popup-content"},ee.split(`
`).map((function(ae,ie){return o.createElement(o.Fragment,{key:ie},ae,o.createElement("br",null))}))))};(function(S){S.Click="Click",S.Hover="Hover"})(_t||(_t={}));var He,Qe=function(S){var O,Y=S.annotation,J=S.children,ee=S.ignoreBorder,te=S.hasPopup,oe=S.isRenderable,ne=S.page,Q=S.viewport,ae=Y.rect,ie=(function(){var Be=V(!1),at=Be.opened,nt=Be.toggle,ot=o.useState(_t.Hover),lt=ot[0],ut=ot[1];return{opened:at,closeOnHover:function(){lt===_t.Hover&&nt(r.ToggleStatus.Close)},openOnHover:function(){lt===_t.Hover&&nt(r.ToggleStatus.Open)},toggleOnClick:function(){switch(lt){case _t.Click:at&&ut(_t.Hover),nt(r.ToggleStatus.Toggle);break;case _t.Hover:ut(_t.Click),nt(r.ToggleStatus.Open)}}}})(),ge=ie.closeOnHover,me=ie.opened,pe=ie.openOnHover,Ce=ie.toggleOnClick,Ae=(O=[ae[0],ne.view[3]+ne.view[1]-ae[1],ae[2],ne.view[3]+ne.view[1]-ae[3]],[Math.min(O[0],O[2]),Math.min(O[1],O[3]),Math.max(O[0],O[2]),Math.max(O[1],O[3])]),we=ae[2]-ae[0],Ye=ae[3]-ae[1],De={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!ee&&Y.borderStyle.width>0){switch(Y.borderStyle.style){case Le.Dashed:De.borderStyle="dashed";break;case Le.Solid:De.borderStyle="solid";break;case Le.Underline:De=Object.assign({borderBottomStyle:"solid"},De);case Le.Beveled:case Le.Inset:}var Oe=Y.borderStyle.width;De.borderWidth="".concat(Oe,"px"),Y.borderStyle.style!==Le.Underline&&(we-=2*Oe,Ye-=2*Oe);var ze=Y.borderStyle,Te=ze.horizontalCornerRadius,qe=ze.verticalCornerRadius;(Te>0||qe>0)&&(De.borderRadius="".concat(Te,"px / ").concat(qe,"px")),Y.color?De.borderColor="rgb(".concat(0|Y.color[0],", ").concat(0|Y.color[1],", ").concat(0|Y.color[2],")"):De.borderWidth="0"}return o.createElement(o.Fragment,null,oe&&J({popup:{opened:me,closeOnHover:ge,openOnHover:pe,toggleOnClick:Ce},slot:{attrs:{style:Object.assign({height:"".concat(Ye,"px"),left:"".concat(Ae[0],"px"),top:"".concat(Ae[1],"px"),transform:"matrix(".concat(Q.transform.join(","),")"),transformOrigin:"-".concat(Ae[0],"px -").concat(Ae[1],"px"),width:"".concat(we,"px")},De)},children:o.createElement(o.Fragment,null,te&&me&&o.createElement(it,{annotation:Y}))}}))},zt=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},Nt=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},o.createElement("circle",{cy:ie/2,fill:"none",rx:ae/2-ge/2,ry:ie/2-ge/2,stroke:"transparent",strokeWidth:ge||1})),me.slot.children)}))},Ht=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=Pe(O),te=se(O),oe=!(O.hasPopup!==!1||!ee&&!te),ne=function(){var Q,ae,ie,ge,me=O.file;me&&(Q=me.filename,ae=me.content,ie=typeof ae=="string"?"":URL.createObjectURL(new Blob([ae],{type:""})),(ge=document.createElement("a")).style.display="none",ge.href=ie||Q,ge.setAttribute("download",(function(pe){var Ce=pe.split("/").pop();return Ce?Ce.split("#")[0].split("?")[0]:pe})(Q)),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),ie&&URL.revokeObjectURL(ie))};return o.createElement(Qe,{annotation:O,hasPopup:oe,ignoreBorder:!0,isRenderable:!0,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onDoubleClick:ne,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},Tt=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},Vt=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=Pe(O),te=se(O),oe=!(!ee&&!te),ne=!O.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(O.parentType)!==-1;return e((function(){if(O.parentId){var Q=document.querySelector('[data-annotation-id="'.concat(O.parentId,'"]')),ae=document.querySelector('[data-annotation-id="'.concat(O.id,'"]'));if(Q&&ae){var ie=parseFloat(Q.style.left),ge=parseFloat(Q.style.top)+parseFloat(Q.style.height);ae.style.left="".concat(ie,"px"),ae.style.top="".concat(ge,"px"),ae.style.transformOrigin="-".concat(ie,"px -").concat(ge,"px")}}}),[]),o.createElement(Qe,{annotation:O,hasPopup:ne,ignoreBorder:!1,isRenderable:oe,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":O.id}),o.createElement(it,{annotation:O}))}))},Bt=function(S){var O=S.annotation,Y=S.childAnnotation,J=S.page,ee=S.viewport,te=O.hasPopup===!1,oe=Pe(O),ne=se(O),Q=!!(O.hasPopup||oe||ne);if(O.quadPoints&&O.quadPoints.length>0){var ae=O.quadPoints.map((function(ie){return Object.assign({},O,{rect:[ie[2].x,ie[2].y,ie[1].x,ie[1].y],quadPoints:[]})}));return o.createElement(o.Fragment,null,ae.map((function(ie,ge){return o.createElement(Bt,{key:ge,annotation:ie,childAnnotation:Y,page:J,viewport:ee})})))}return o.createElement(Qe,{annotation:O,hasPopup:te,ignoreBorder:!0,isRenderable:Q,page:J,viewport:ee},(function(ie){return o.createElement(o.Fragment,null,o.createElement("div",n({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":O.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),ie.slot.children),Y&&Y.annotationType===r.AnnotationType.Popup&&ie.popup.opened&&o.createElement(Vt,{annotation:Y,page:J,viewport:ee}))}))},Gt=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),O.inkLists&&O.inkLists.length&&o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},O.inkLists.map((function(pe,Ce){return o.createElement("polyline",{key:Ce,fill:"none",stroke:"transparent",strokeWidth:ge||1,points:pe.map((function(Ae){return"".concat(Ae.x-Q[0],",").concat(Q[3]-Ae.y)})).join(" ")})}))),me.slot.children)}))},St=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},o.createElement("line",{stroke:"transparent",strokeWidth:ge||1,x1:Q[2]-O.lineCoordinates[0],x2:Q[2]-O.lineCoordinates[2],y1:Q[3]-O.lineCoordinates[1],y2:Q[3]-O.lineCoordinates[3]})),me.slot.children)}))},Kt=/^([^\w]*)(javascript|data|vbscript)/im,Yt=/&#(\w+)(^\w|;)?/g,an=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,on=/^([^:]+):/gm,Jt=function(S,O){var Y,J=(Y=S||"",Y.replace(Yt,(function(ne,Q){return String.fromCharCode(Q)}))).replace(an,"").trim();if(!J)return O;var ee=J[0];if(ee==="."||ee==="/")return J;var te=J.match(on);if(!te)return J;var oe=te[0];return Kt.test(oe)?O:J},Dt=function(S){var O,Y=S.annotation,J=S.annotationContainerRef,ee=S.doc,te=S.outlines,oe=S.page,ne=S.pageIndex,Q=S.scale,ae=S.viewport,ie=S.onExecuteNamedAction,ge=S.onJumpFromLinkAnnotation,me=S.onJumpToDest,pe=o.useRef(),Ce=te&&te.length&&Y.dest&&typeof Y.dest=="string"?(O=te.find((function(De){return De.dest===Y.dest})))===null||O===void 0?void 0:O.title:"",Ae=!!(Y.url||Y.dest||Y.action||Y.unsafeUrl),we={};if(Y.url||Y.unsafeUrl){var Ye=Jt(Y.url||Y.unsafeUrl,"");Ye?we={"data-target":"external",href:Ye,rel:"noopener noreferrer nofollow",target:Y.newWindow?"_blank":"",title:Ye}:Ae=!1}else we={href:"","data-annotation-link":Y.id,onClick:function(De){De.preventDefault(),Y.action?ie(Y.action):jt(ee,Y.dest).then((function(Oe){var ze=pe.current,Te=J.current;if(ze&&Te){var qe=ze.getBoundingClientRect();Te.style.setProperty("height","100%"),Te.style.setProperty("width","100%");var Be=Te.getBoundingClientRect();Te.style.removeProperty("height"),Te.style.removeProperty("width");var at=(qe.left-Be.left)/Q,nt=(Be.bottom-qe.bottom+qe.height)/Q;ge({bottomOffset:nt,label:Ce,leftOffset:at,pageIndex:ne})}me(Oe)}))}};return Ce&&(we=Object.assign({},we,{title:Ce,"aria-label":Ce})),o.createElement(Qe,{annotation:Y,hasPopup:!1,ignoreBorder:!1,isRenderable:Ae,page:oe,viewport:ae},(function(De){return o.createElement("div",n({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":Y.id,"data-testid":"core__annotation--link-".concat(Y.id)}),o.createElement("a",n({ref:pe},we)))}))},sn=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),O.vertices&&O.vertices.length&&o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},o.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ge||1,points:O.vertices.map((function(pe){return"".concat(pe.x-Q[0],",").concat(Q[3]-pe.y)})).join(" ")})),me.slot.children)}))},fn=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),O.vertices&&O.vertices.length&&o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},o.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ge||1,points:O.vertices.map((function(pe){return"".concat(pe.x-Q[0],",").concat(Q[3]-pe.y)})).join(" ")})),me.slot.children)}))},$n=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe),Q=O.rect,ae=Q[2]-Q[0],ie=Q[3]-Q[1],ge=O.borderStyle.width;return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(me){return o.createElement("div",n({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":O.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),o.createElement("svg",{height:"".concat(ie,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ae," ").concat(ie),width:"".concat(ae,"px")},o.createElement("rect",{height:ie-ge,fill:"none",stroke:"transparent",strokeWidth:ge||1,x:ge/2,y:ge/2,width:ae-ge})),me.slot.children)}))},er=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},tr=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},nr=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},rr=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),o.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),o.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),o.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ir=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),o.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),o.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),o.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),o.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),o.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),o.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),o.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),o.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),o.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},ar=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),o.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},or=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),o.createElement("path",{d:"M6 4.5L6 0.5"}),o.createElement("path",{d:"M18 4.5L18 0.5"}),o.createElement("path",{d:"M10 4.5L10 0.5"}),o.createElement("path",{d:"M14 4.5L14 0.5"}))},sr=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),o.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),o.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},lr=function(){return o.createElement(c,{size:16},o.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},cr=function(S){var O=S.annotation,Y=S.childAnnotation,J=S.page,ee=S.viewport,te=O.hasPopup===!1,oe=Pe(O),ne=se(O),Q=!!(O.hasPopup||oe||ne),ae=O.name?O.name.toLowerCase():"";return o.createElement(Qe,{annotation:O,hasPopup:te,ignoreBorder:!1,isRenderable:Q,page:J,viewport:ee},(function(ie){return o.createElement(o.Fragment,null,o.createElement("div",n({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":O.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),ae&&o.createElement("div",{className:"rpv-core__annotation-text-icon"},ae==="check"&&o.createElement(s,null),ae==="comment"&&o.createElement(rr,null),ae==="help"&&o.createElement(ir,null),ae==="insert"&&o.createElement(lr,null),ae==="key"&&o.createElement(ar,null),ae==="note"&&o.createElement(or,null),(ae==="newparagraph"||ae==="paragraph")&&o.createElement(sr,null)),ie.slot.children),Y&&Y.annotationType===r.AnnotationType.Popup&&ie.popup.opened&&o.createElement(Vt,{annotation:Y,page:J,viewport:ee}))}))},ur=function(S){var O=S.annotation,Y=S.page,J=S.viewport,ee=O.hasPopup===!1,te=Pe(O),oe=se(O),ne=!!(O.hasPopup||te||oe);return o.createElement(Qe,{annotation:O,hasPopup:ee,ignoreBorder:!0,isRenderable:ne,page:Y,viewport:J},(function(Q){return o.createElement("div",n({},Q.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":O.id,onClick:Q.popup.toggleOnClick,onMouseEnter:Q.popup.openOnHover,onMouseLeave:Q.popup.closeOnHover}),Q.slot.children)}))},dr=function(S){var O=S.annotations,Y=S.doc,J=S.outlines,ee=S.page,te=S.pageIndex,oe=S.plugins,ne=S.rotation,Q=S.scale,ae=S.onExecuteNamedAction,ie=S.onJumpFromLinkAnnotation,ge=S.onJumpToDest,me=o.useRef(),pe=ee.getViewport({rotation:ne,scale:Q}).clone({dontFlip:!0}),Ce=O.filter((function(Ae){return!Ae.parentId}));return e((function(){var Ae=me.current;Ae&&oe.forEach((function(we){we.onAnnotationLayerRender&&we.onAnnotationLayerRender({annotations:Ce,container:Ae,pageIndex:te,rotation:ne,scale:Q})}))}),[]),o.createElement("div",{ref:me,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(te)},Ce.map((function(Ae){var we=O.find((function(Ye){return Ye.parentId===Ae.id}));switch(Ae.annotationType){case r.AnnotationType.Caret:return o.createElement(zt,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Circle:return o.createElement(Nt,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.FileAttachment:return o.createElement(Ht,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.FreeText:return o.createElement(Tt,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Highlight:return o.createElement(Bt,{key:Ae.id,annotation:Ae,childAnnotation:we,page:ee,viewport:pe});case r.AnnotationType.Ink:return o.createElement(Gt,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Line:return o.createElement(St,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Link:return o.createElement(Dt,{key:Ae.id,annotation:Ae,annotationContainerRef:me,doc:Y,outlines:J,page:ee,pageIndex:te,scale:Q,viewport:pe,onExecuteNamedAction:ae,onJumpFromLinkAnnotation:ie,onJumpToDest:ge});case r.AnnotationType.Polygon:return o.createElement(sn,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Polyline:return o.createElement(fn,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Popup:return o.createElement(Vt,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Square:return o.createElement($n,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Squiggly:return o.createElement(er,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Stamp:return o.createElement(tr,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.StrikeOut:return o.createElement(nr,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});case r.AnnotationType.Text:return o.createElement(cr,{key:Ae.id,annotation:Ae,childAnnotation:we,page:ee,viewport:pe});case r.AnnotationType.Underline:return o.createElement(ur,{key:Ae.id,annotation:Ae,page:ee,viewport:pe});default:return o.createElement(o.Fragment,{key:Ae.id})}})))},hr=function(S){var O=S.page,Y=S.renderAnnotations,J=G(),ee=o.useState({loading:!0,annotations:[]}),te=ee[0],oe=ee[1];return o.useEffect((function(){O.getAnnotations({intent:"display"}).then((function(ne){J.current&&oe({loading:!1,annotations:ne})}))}),[]),te.loading?o.createElement(o.Fragment,null):Y(te.annotations)},fr=function(S){var O=S.doc,Y=S.outlines,J=S.page,ee=S.pageIndex,te=S.plugins,oe=S.rotation,ne=S.scale,Q=S.onExecuteNamedAction,ae=S.onJumpFromLinkAnnotation,ie=S.onJumpToDest;return o.createElement(hr,{page:J,renderAnnotations:function(ge){return o.createElement(dr,{annotations:ge,doc:O,outlines:Y,page:J,pageIndex:ee,plugins:te,rotation:oe,scale:ne,onExecuteNamedAction:Q,onJumpFromLinkAnnotation:ae,onJumpToDest:ie})}})},gn=function(S,O){var Y=S%O;return Y===0?S:Math.floor(S-Y)},pr=function(S){var O=S.canvasLayerRef,Y=S.height,J=S.page,ee=S.pageIndex,te=S.plugins,oe=S.rotation,ne=S.scale,Q=S.width,ae=S.onRenderCanvasCompleted,ie=o.useRef();return e((function(){var ge=ie.current;ge&&ge.cancel();var me=O.current;me.removeAttribute("data-testid"),te.forEach((function(Be){Be.onCanvasLayerRender&&Be.onCanvasLayerRender({ele:me,pageIndex:ee,rotation:oe,scale:ne,status:r.LayerRenderStatus.PreRender})}));var pe=J.getViewport({rotation:oe,scale:ne}),Ce=window.devicePixelRatio||1,Ae=Math.sqrt(16777216/(pe.width*pe.height)),we=Ce>Ae;we?me.style.transform="scale(1, 1)":me.style.removeProperty("transform");var Ye=Math.min(Ae,Ce),De=(function(Be,at){var nt,ot;if(Math.floor(Be)===Be)return[Be,1];var lt=1/Be;if(lt>at)return[1,at];if(Math.floor(lt)===lt)return[1,lt];for(var ut=Be>1?lt:Be,kt=0,yt=1,Mt=1,wt=1;;){var Ct=kt+Mt,Pt=yt+wt;if(Pt>at)break;ut<=Ct/Pt?(Mt=(nt=[Ct,Pt])[0],wt=nt[1]):(kt=(ot=[Ct,Pt])[0],yt=ot[1])}return ut<(kt/yt+Mt/wt)/2?ut===Be?[kt,yt]:[yt,kt]:ut===Be?[Mt,wt]:[wt,Mt]})(Ye,8),Oe=De[0],ze=De[1];me.width=gn(pe.width*Ye,Oe),me.height=gn(pe.height*Ye,Oe),me.style.width="".concat(gn(pe.width,ze),"px"),me.style.height="".concat(gn(pe.height,ze),"px"),me.hidden=!0;var Te=me.getContext("2d",{alpha:!1}),qe=we||Ce!==1?[Ye,0,0,Ye,0,0]:null;return ie.current=J.render({canvasContext:Te,transform:qe,viewport:pe}),ie.current.promise.then((function(){me.hidden=!1,me.setAttribute("data-testid","core__canvas-layer-".concat(ee)),te.forEach((function(Be){Be.onCanvasLayerRender&&Be.onCanvasLayerRender({ele:me,pageIndex:ee,rotation:oe,scale:ne,status:r.LayerRenderStatus.DidRender})})),ae()}),(function(){ae()})),function(){me&&(me.width=0,me.height=0)}}),[]),o.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(Y,"px"),width:"".concat(Q,"px")}},o.createElement("canvas",{ref:O}))},mr=function(S){var O=S.height,Y=S.page,J=S.rotation,ee=S.scale,te=S.width,oe=o.useRef();return e((function(){var ne=oe.current,Q=Y.getViewport({rotation:J,scale:ee});Y.getOperatorList().then((function(ae){(function(){var ie=oe.current;ie&&(ie.innerHTML="")})(),new T.SVGGraphics(Y.commonObjs,Y.objs).getSVG(ae,Q).then((function(ie){ie.style.height="".concat(O,"px"),ie.style.width="".concat(te,"px"),ne.appendChild(ie)}))}))}),[]),o.createElement("div",{className:"rpv-core__svg-layer",ref:oe})},gr=function(S){var O=S.containerRef,Y=S.page,J=S.pageIndex,ee=S.plugins,te=S.rotation,oe=S.scale,ne=S.onRenderTextCompleted,Q=o.useRef(),ae=function(){var ie=O.current;ie&&([].slice.call(ie.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(ge){return ie.removeChild(ge)})),[].slice.call(ie.querySelectorAll('br[role="presentation"]')).forEach((function(ge){return ie.removeChild(ge)})))};return e((function(){var ie=Q.current;ie&&ie.cancel();var ge=O.current;if(ge){ge.removeAttribute("data-testid");var me=Y.getViewport({rotation:te,scale:oe});return ee.forEach((function(pe){pe.onTextLayerRender&&pe.onTextLayerRender({ele:ge,pageIndex:J,scale:oe,status:r.LayerRenderStatus.PreRender})})),Y.getTextContent().then((function(pe){ae(),Q.current=T.renderTextLayer({container:ge,textContent:pe,textContentSource:pe,viewport:me}),Q.current.promise.then((function(){ge.setAttribute("data-testid","core__text-layer-".concat(J)),[].slice.call(ge.children).forEach((function(Ce){Ce.classList.contains("rpv-core__text-layer-text--not")||Ce.classList.add("rpv-core__text-layer-text")})),ee.forEach((function(Ce){Ce.onTextLayerRender&&Ce.onTextLayerRender({ele:ge,pageIndex:J,scale:oe,status:r.LayerRenderStatus.DidRender})})),ne()}),(function(){ge.removeAttribute("data-testid"),ne()}))})),function(){var pe;ae(),(pe=Q.current)===null||pe===void 0||pe.cancel()}}}),[]),o.createElement("div",{className:"rpv-core__text-layer",ref:O})},vr=function(S){var O=S.doc,Y=S.measureRef,J=S.outlines,ee=S.pageIndex,te=S.pageRotation,oe=S.pageSize,ne=S.plugins,Q=S.renderPage,ae=S.renderQueueKey,ie=S.rotation,ge=S.scale,me=S.shouldRender,pe=S.viewMode,Ce=S.onExecuteNamedAction,Ae=S.onJumpFromLinkAnnotation,we=S.onJumpToDest,Ye=S.onRenderCompleted,De=S.onRotatePage,Oe=G(),ze=o.useState(null),Te=ze[0],qe=ze[1],Be=o.useState(!1),at=Be[0],nt=Be[1],ot=o.useState(!1),lt=ot[0],ut=ot[1],kt=o.useRef(),yt=o.useRef(),Mt=Math.abs(ie+te)%180==0,wt=oe.pageWidth*ge,Ct=oe.pageHeight*ge,Pt=Mt?wt:Ct,At=Mt?Ct:wt,Ot=(oe.rotation+ie+te)%360,Zt=o.useRef(0),Xt=Q||function(Lt){return o.createElement(o.Fragment,null,Lt.canvasLayer.children,Lt.textLayer.children,Lt.annotationLayer.children)};return o.useEffect((function(){qe(null),nt(!1),ut(!1)}),[te,ie,ge]),o.useEffect((function(){me&&Oe.current&&!Te&&st(O,ee).then((function(Lt){Oe.current&&(Zt.current=ae,qe(Lt))}))}),[me,Te]),o.useEffect((function(){at&&lt&&(ae!==Zt.current?(qe(null),nt(!1),ut(!1)):Ye(ee))}),[at,lt]),o.createElement("div",{className:l({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":pe===r.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":pe===r.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":pe===r.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(ee),ref:Y,style:{height:"".concat(At,"px"),width:"".concat(Pt,"px")}},Te?o.createElement(o.Fragment,null,Xt({annotationLayer:{attrs:{},children:o.createElement(fr,{doc:O,outlines:J,page:Te,pageIndex:ee,plugins:ne,rotation:Ot,scale:ge,onExecuteNamedAction:Ce,onJumpFromLinkAnnotation:Ae,onJumpToDest:we})},canvasLayer:{attrs:{},children:o.createElement(pr,{canvasLayerRef:kt,height:At,page:Te,pageIndex:ee,plugins:ne,rotation:Ot,scale:ge,width:Pt,onRenderCanvasCompleted:function(){Oe.current&&nt(!0)}})},canvasLayerRendered:at,doc:O,height:At,pageIndex:ee,rotation:Ot,scale:ge,svgLayer:{attrs:{},children:o.createElement(mr,{height:At,page:Te,rotation:Ot,scale:ge,width:Pt})},textLayer:{attrs:{},children:o.createElement(gr,{containerRef:yt,page:Te,pageIndex:ee,plugins:ne,rotation:Ot,scale:ge,onRenderTextCompleted:function(){Oe.current&&ut(!0)}})},textLayerRendered:lt,width:Pt,markRendered:Ye,onRotatePage:function(Lt){return De(ee,Lt)}}),ne.map((function(Lt,qt){return Lt.renderPageLayer?o.createElement(o.Fragment,{key:qt},Lt.renderPageLayer({canvasLayerRef:kt,canvasLayerRendered:at,doc:O,height:At,pageIndex:ee,rotation:Ot,scale:ge,textLayerRef:yt,textLayerRendered:lt,width:Pt})):o.createElement(o.Fragment,{key:qt})}))):o.createElement(x,{testId:"core__page-layer-loading-".concat(ee)}))},br=function(S,O){var Y=O.rect;return S.height!==Y.height||S.width!==Y.width?Y:S};(function(S){S.Horizontal="Horizontal",S.Vertical="Vertical",S.Both="Both"})(He||(He={}));var _r=function(S){return 1-Math.pow(1-S,4)},vn=1e-4,Dn={left:0,top:0},On={capture:!1,passive:!0},yr=function(S){var O=S.elementRef,Y=S.enableSmoothScroll,J=S.isRtl,ee=S.scrollDirection,te=S.onSmoothScroll,oe=o.useState(Dn),ne=oe[0],Q=oe[1],ae=o.useState(O.current),ie=ae[0],ge=ae[1],me=J?-1:1,pe=o.useRef(ee);pe.current=ee;var Ce=o.useRef(Dn),Ae=o.useRef(!0),we=o.useCallback((function(){Ae.current=!0,Y&&Q(Ce.current),te(!1)}),[]),Ye=o.useCallback((function(){if(ie){switch(pe.current){case He.Horizontal:Ce.current={left:me*ie.scrollLeft,top:0};break;case He.Both:Ce.current={left:me*ie.scrollLeft,top:ie.scrollTop};break;case He.Vertical:default:Ce.current={left:0,top:ie.scrollTop}}Y&&!Ae.current||Q(Ce.current)}}),[ie]);e((function(){ge(O.current)})),e((function(){if(ie)return ie.addEventListener("scroll",Ye,On),function(){ie.removeEventListener("scroll",Ye,On)}}),[ie]);var De=o.useCallback((function(Oe,ze){var Te=O.current;if(!Te)return Promise.resolve();var qe={left:0,top:0};switch(pe.current){case He.Horizontal:qe.left=me*Oe.left;break;case He.Both:qe.left=me*Oe.left,qe.top=Oe.top;break;case He.Vertical:default:qe.top=Oe.top}return ze?(Ae.current=!1,te(!0),new Promise((function(Be,at){(function(nt,ot,lt,ut,kt,yt){kt===void 0&&(kt=function(qt){return qt}),yt===void 0&&(yt=function(){});var Mt=0,wt=0,Ct=!1;switch(ot){case He.Horizontal:wt=nt.scrollLeft,Mt=0;case He.Both:wt=nt.scrollLeft,Mt=nt.scrollTop;break;case He.Vertical:default:wt=0,Mt=nt.scrollTop}var Pt=function(){Ct||(Ct=!0,nt.scrollLeft=lt.left,nt.scrollTop=lt.top,yt())};if(Math.abs(Mt-lt.top)<=vn&&ot===He.Vertical)Pt();else if(Math.abs(wt-lt.left)<=vn&&ot===He.Horizontal)Pt();else{var At,Ot=-1,Zt=wt-lt.left,Xt=Mt-lt.top,Lt=function(qt){Ot===-1&&(Ot=qt);var Qt=qt-Ot,je=Math.min(Qt/ut,1),Ne=kt(je),xe={left:wt-Zt*Ne,top:Mt-Xt*Ne};switch(ot){case He.Horizontal:nt.scrollLeft=xe.left;break;case He.Both:nt.scrollLeft=xe.left,nt.scrollTop=xe.top;break;case He.Vertical:default:nt.scrollTop=xe.top}Math.abs(xe.top-lt.top)<=vn&&Math.abs(xe.left-lt.left)<=vn&&!Ct&&(window.cancelAnimationFrame(At),Pt()),Qt<ut?At=window.requestAnimationFrame(Lt):window.cancelAnimationFrame(At)};At=window.requestAnimationFrame(Lt)}})(Te,pe.current,qe,400,_r,(function(){we(),Be()}))}))):new Promise((function(Be,at){switch(pe.current){case He.Horizontal:Te.scrollLeft=qe.left;break;case He.Both:Te.scrollLeft=qe.left,Te.scrollTop=qe.top;break;case He.Vertical:default:Te.scrollTop=qe.top}Be()}))}),[O]);return{scrollOffset:ne,scrollTo:De}},pn=function(S,O,Y){return Math.max(S,Math.min(Y,O))},Er=function(S,O){if(O!==r.ViewMode.DualPageWithCover)return 0;if(!(function(ee){var te=ee.length;if(te===1)return!1;for(var oe=1;oe<te;oe++)if(ee[oe].height!==ee[0].height||ee[oe].width!==ee[0].width)return!0;return!1})(S))return 2*S[0].width;var Y=Ue(S.slice(1),2).map((function(ee){return ee.length===2?ee[0].width+ee[1].width:ee[0].width})),J=[S[0].width].concat(Y);return Math.max.apply(Math,J)},Sr={left:0,top:0},wr={left:0,top:0},wn={left:0,top:0},Ar={left:0,top:0},Cr={height:0,width:0},Nn={left:0,top:0},Bn="data-virtual-index",Pr=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],kr=function(S){var O=S.enableSmoothScroll,Y=S.isRtl,J=S.numberOfItems,ee=S.parentRef,te=S.setRenderRange,oe=S.sizes,ne=S.scrollMode,Q=S.viewMode,ae=o.useState(!1),ie=ae[0],ge=ae[1],me=o.useCallback((function(je){return ge(je)}),[]),pe=o.useRef(ne);pe.current=ne;var Ce=o.useRef(Q);Ce.current=Q;var Ae=ne===r.ScrollMode.Wrapped||Q===r.ViewMode.DualPageWithCover||Q===r.ViewMode.DualPage?He.Both:ne===r.ScrollMode.Horizontal?He.Horizontal:He.Vertical,we=yr({elementRef:ee,enableSmoothScroll:O,isRtl:Y,scrollDirection:Ae,onSmoothScroll:me}),Ye=we.scrollOffset,De=we.scrollTo,Oe=(function(je){var Ne=je.elementRef,xe=o.useState(Ne.current),Fe=xe[0],Re=xe[1],Ve=o.useRef(!1),We=o.useReducer(br,{height:0,width:0}),Ie=We[0],Me=We[1];return e((function(){Ne.current!==Fe&&Re(Ne.current)})),e((function(){if(Fe&&!Ve.current){Ve.current=!0;var Xe=Fe.getBoundingClientRect(),Ze=Xe.height,vt=Xe.width;Me({rect:{height:Ze,width:vt}})}}),[Fe]),o.useEffect((function(){if(Fe){var Xe=new ResizeObserver((function(Ze,vt){Ze.forEach((function(pt){if(pt.target===Fe){var Ft=pt.contentRect,Ut=Ft.height,Ke=Ft.width;Me({rect:{height:Ut,width:Ke}})}}))}));return Xe.observe(Fe),function(){Xe.unobserve(Fe)}}}),[Fe]),Ie})({elementRef:ee}),ze=o.useRef({scrollOffset:Nn,measurements:[]});ze.current.scrollOffset=Ye;var Te=o.useMemo((function(){return Array(J).fill(-1)}),[]),qe=o.useState(Te),Be=qe[0],at=qe[1],nt=o.useMemo((function(){var je=new IntersectionObserver((function(Ne){Ne.forEach((function(xe){var Fe=xe.isIntersecting?xe.intersectionRatio:-1,Re=xe.target.getAttribute(Bn);if(Re){var Ve=parseInt(Re,10);0<=Ve&&Ve<J&&at((function(We){return We[Ve]=Fe,(function(Ie,Me,Xe){for(var Ze,vt=0,pt=Me.length;vt<pt;vt++)!Ze&&vt in Me||(Ze||(Ze=Array.prototype.slice.call(Me,0,vt)),Ze[vt]=Me[vt]);return Ie.concat(Ze||Array.prototype.slice.call(Me))})([],We)}))}}))}),{threshold:Pr});return je}),[]),ot=o.useMemo((function(){return ne===r.ScrollMode.Page&&Q===r.ViewMode.SinglePage?(function(je,Ne,xe){for(var Fe=[],Re=0;Re<je;Re++){var Ve={height:Math.max(Ne.height,xe[Re].height),width:Math.max(Ne.width,xe[Re].width)},We=Re===0?Ar:Fe[Re-1].end,Ie={left:We.left+Ve.width,top:We.top+Ve.height};Fe[Re]={index:Re,start:We,size:Ve,end:Ie,visibility:-1}}return Fe})(J,Oe,oe):Q===r.ViewMode.DualPageWithCover?(function(je,Ne,xe,Fe){for(var Re=[],Ve=0,We=0,Ie=wn,Me=0;Me<je;Me++){var Xe=Me===0?{height:Fe===r.ScrollMode.Page?Math.max(Ne.height,xe[Me].height):xe[Me].height,width:Fe===r.ScrollMode.Page?Math.max(Ne.width,xe[Me].width):xe[Me].width}:{height:Fe===r.ScrollMode.Page?Math.max(Ne.height,xe[Me].height):xe[Me].height,width:Math.max(Ne.width/2,xe[Me].width)};Fe===r.ScrollMode.Page?Ie=Me===0?wn:{left:Me%2==0?Xe.width:0,top:Math.floor((Me-1)/2)*Xe.height+Re[0].end.top}:Me===0?(Ie=wn,Ve=xe[0].height,We=0):Me%2==1?(Ie={left:0,top:Ve+=We},We=Me===je-1?xe[Me].height:Math.max(xe[Me].height,xe[Me+1].height)):Ie={left:Re[Me-1].end.left,top:Ve};var Ze={left:Ie.left+Xe.width,top:Ie.top+Xe.height};Re[Me]={index:Me,start:Ie,size:Xe,end:Ze,visibility:-1}}return Re})(J,Oe,oe,ne):Q===r.ViewMode.DualPage?(function(je,Ne,xe,Fe){for(var Re=[],Ve=0,We=0,Ie=wr,Me=0;Me<je;Me++){var Xe={height:Fe===r.ScrollMode.Page?Math.max(Ne.height,xe[Me].height):xe[Me].height,width:Math.max(Ne.width/2,xe[Me].width)};Fe===r.ScrollMode.Page?Ie={left:Me%2==0?0:Xe.width,top:Math.floor(Me/2)*Xe.height}:Me%2==0?(Ie={left:0,top:Ve+=We},We=Me===je-1?xe[Me].height:Math.max(xe[Me].height,xe[Me+1].height)):Ie={left:Re[Me-1].end.left,top:Ve};var Ze={left:Ie.left+Xe.width,top:Ie.top+Xe.height};Re[Me]={index:Me,start:Ie,size:Xe,end:Ze,visibility:-1}}return Re})(J,Oe,oe,ne):(function(je,Ne,xe,Fe){for(var Re=[],Ve=0,We={left:0,top:0},Ie=0,Me=Sr,Xe=0;Xe<je;Xe++){var Ze=xe[Xe];if(Xe===0)Ve=Ze.width,We={left:0,top:0},Ie=Ze.height;else switch(Fe){case r.ScrollMode.Wrapped:(Ve+=Ze.width)<Ne.width?(Me={left:Re[Xe-1].end.left,top:We.top},Ie=Math.max(Ie,Ze.height)):(Ve=Ze.width,We={left:(Me={left:We.left,top:We.top+Ie}).left,top:Me.top},Ie=Ze.height);break;case r.ScrollMode.Horizontal:case r.ScrollMode.Vertical:default:Me=Re[Xe-1].end}var vt={left:Me.left+Ze.width,top:Me.top+Ze.height};Re[Xe]={index:Xe,start:Me,size:Ze,end:vt,visibility:-1}}return Re})(J,Oe,oe,ne)}),[ne,oe,Q,Oe]),lt=ot[J-1]?{height:ot[J-1].end.top,width:ot[J-1].end.left}:Cr;ze.current.measurements=ot;var ut=o.useMemo((function(){var je=(function(Xe,Ze,vt,pt){var Ft=0;switch(Xe){case He.Horizontal:Ft=pt.left;break;case He.Vertical:default:Ft=pt.top}var Ut=Ze.length-1,Ke=(function(ht,$t,dn,_n){for(;ht<=$t;){var ln=(ht+$t)/2|0,mn=_n(ln);if(mn<dn)ht=ln+1;else{if(!(mn>dn))return ln;$t=ln-1}}return ht>0?ht-1:0})(0,Ut,Ft,(function(ht){switch(Xe){case He.Horizontal:return Ze[ht].start.left;case He.Both:case He.Vertical:default:return Ze[ht].start.top}}));if(Xe===He.Both)for(var It=Ze[Ke].start.top;Ke-1>=0&&Ze[Ke-1].start.top===It&&Ze[Ke-1].start.left>=pt.left;)Ke--;for(var bt=Ke;bt<=Ut;){var Et={top:Ze[bt].start.top-pt.top,left:Ze[bt].start.left-pt.left},xt={height:vt.height-Et.top,width:vt.width-Et.left};if(Xe===He.Horizontal&&xt.width<0||Xe===He.Vertical&&xt.height<0||Xe===He.Both&&(xt.width<0||xt.height<0))break;bt++}return{start:Ke,end:bt}})(Ae,ot,Oe,Ye),Ne=je.start,xe=je.end,Fe=Be.slice(pn(0,J,Ne),pn(0,J,xe)),Re=Ne+Fe.reduce((function(Xe,Ze,vt,pt){return Ze>pt[Xe]?vt:Xe}),0),Ve=Re=pn(0,J-1,Re),We=te({endPage:xe,numPages:J,startPage:Ne}),Ie=We.startPage,Me=We.endPage;switch(Ie=Math.max(Ie,0),Me=Math.min(Me,J-1),Q){case r.ViewMode.DualPageWithCover:Re>0&&(Ve=Re%2==1?Re:Re-1),Ie=Ie===0?0:Ie%2==1?Ie:Ie-1,J-(Me=Me%2==1?Me-1:Me)<=2&&(Me=J-1);break;case r.ViewMode.DualPage:Ve=Re%2==0?Re:Re-1,Ie=Ie%2==0?Ie:Ie-1,Me=Me%2==1?Me:Me-1;break;case r.ViewMode.SinglePage:default:Ve=Re}return{startPage:Ie,endPage:Me,maxVisbilityIndex:Ve}}),[ot,Oe,Ye,Q,Be]),kt=ut.startPage,yt=ut.endPage,Mt=ut.maxVisbilityIndex,wt=o.useMemo((function(){for(var je=[],Ne=function(Fe){var Re=ot[Fe],Ve=n(n({},Re),{visibility:Be[Fe]!==void 0?Be[Fe]:-1,measureRef:function(We){We&&(We.setAttribute(Bn,"".concat(Fe)),nt.observe(We))}});je.push(Ve)},xe=kt;xe<=yt;xe++)Ne(xe);return je}),[kt,yt,Be,ot]),Ct=o.useCallback((function(je,Ne){var xe=ze.current.measurements[pn(0,J-1,je)],Fe=pe.current===r.ScrollMode.Page?Nn:Ne;return xe?De({left:Fe.left+xe.start.left,top:Fe.top+xe.start.top},O):Promise.resolve()}),[De,O]),Pt=o.useCallback((function(je,Ne){var xe=ze.current.measurements,Fe=xe[je].start,Re=xe.find((function(We){return We.start.top-Fe.top>1e-12}));if(!Re)return Promise.resolve();var Ve=Re.index;switch(Ce.current){case r.ViewMode.DualPage:Ve=Ve%2==0?Ve:Ve+1;break;case r.ViewMode.DualPageWithCover:Ve=Ve%2==1?Ve:Ve+1}return Ct(Ve,Ne)}),[]),At=o.useCallback((function(je,Ne){for(var xe=ze.current.measurements,Fe=xe[je].start,Re=je,Ve=!1,We=J-1;We>=0;We--)if(Fe.top-xe[We].start.top>1e-12){Ve=!0,Re=xe[We].index;break}if(!Ve)return Promise.resolve();switch(Ce.current){case r.ViewMode.DualPage:Re=Re%2==0?Re:Re-1;break;case r.ViewMode.DualPageWithCover:Re=Re%2==0?Re-1:Re}return Re===je&&(Re=je-1),Ct(Re,Ne)}),[]),Ot=o.useCallback((function(je,Ne){if(Ce.current===r.ViewMode.DualPageWithCover||Ce.current===r.ViewMode.DualPage)return Pt(je,Ne);switch(pe.current){case r.ScrollMode.Wrapped:return Pt(je,Ne);case r.ScrollMode.Horizontal:case r.ScrollMode.Vertical:default:return Ct(je+1,Ne)}}),[]),Zt=o.useCallback((function(je,Ne){if(Ce.current===r.ViewMode.DualPageWithCover||Ce.current===r.ViewMode.DualPage)return At(je,Ne);switch(pe.current){case r.ScrollMode.Wrapped:return At(je,Ne);case r.ScrollMode.Horizontal:case r.ScrollMode.Vertical:default:return Ct(je-1,Ne)}}),[]),Xt=o.useCallback((function(){return(function(je,Ne){switch(Ne){case r.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(je.width,"px")};case r.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(je.height,"px"),width:"100%"}}})(lt,pe.current)}),[lt]),Lt=o.useCallback((function(je){return(function(Ne,xe,Fe){return Fe!==r.ScrollMode.Page?{}:{height:"".concat(xe.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ne.start.top,"px)")}})(je,Oe,pe.current)}),[Oe]),qt=o.useCallback((function(je){return(function(Ne,xe,Fe,Re,Ve){var We,Ie,Me,Xe,Ze,vt,pt,Ft=xe?"right":"left",Ut=xe?-1:1,Ke=Fe.length,It=Ne.start.left*Ut,bt=Ne.size,Et=bt.height,xt=bt.width;if(Re===r.ViewMode.DualPageWithCover){var ht=Ve===r.ScrollMode.Page?0:Ne.start.top;return Ne.index===0||Ke%2==0&&Ne.index===Ke-1?((We={height:"".concat(Et,"px"),minWidth:"".concat(Er(Fe,Re),"px"),width:"100%"})[Ft]=0,We.position="absolute",We.top=0,We.transform="translate(".concat(It,"px, ").concat(ht,"px)"),We):((Ie={height:"".concat(Et,"px"),width:"".concat(xt,"px")})[Ft]=0,Ie.position="absolute",Ie.top=0,Ie.transform="translate(".concat(It,"px, ").concat(ht,"px)"),Ie)}if(Re===r.ViewMode.DualPage)return(Me={height:"".concat(Et,"px"),width:"".concat(xt,"px")})[Ft]=0,Me.position="absolute",Me.top=0,Me.transform="translate(".concat(It,"px, ").concat(Ve===r.ScrollMode.Page?0:Ne.start.top,"px)"),Me;switch(Ve){case r.ScrollMode.Horizontal:return(Xe={height:"100%",width:"".concat(xt,"px")})[Ft]=0,Xe.position="absolute",Xe.top=0,Xe.transform="translateX(".concat(It,"px)"),Xe;case r.ScrollMode.Page:return(Ze={height:"".concat(Et,"px"),width:"".concat(xt,"px")})[Ft]=0,Ze.position="absolute",Ze.top=0,Ze;case r.ScrollMode.Wrapped:return(vt={height:"".concat(Et,"px"),width:"".concat(xt,"px")})[Ft]=0,vt.position="absolute",vt.top=0,vt.transform="translate(".concat(It,"px, ").concat(Ne.start.top,"px)"),vt;case r.ScrollMode.Vertical:default:return(pt={height:"".concat(Et,"px"),width:"100%"})[Ft]=0,pt.position="absolute",pt.top=0,pt.transform="translateY(".concat(Ne.start.top,"px)"),pt}})(je,Y,oe,Ce.current,pe.current)}),[Y,oe]),Qt=o.useCallback((function(je,Ne){var xe=ze.current,Fe=xe.measurements,Re=xe.scrollOffset,Ve=Fe[pn(0,J-1,Ne)];if(Ve){var We=pe.current===r.ScrollMode.Page?{left:Ve.start.left,top:Ve.start.top}:{left:Re.left*je,top:Re.top*je};return De(We,!1)}return Promise.resolve()}),[]);return o.useEffect((function(){return function(){nt.disconnect()}}),[]),{boundingClientRect:Oe,isSmoothScrolling:ie,startPage:kt,endPage:yt,maxVisbilityIndex:Mt,virtualItems:wt,getContainerStyles:Xt,getItemContainerStyles:Lt,getItemStyles:qt,scrollToItem:Ct,scrollToNextItem:Ot,scrollToPreviousItem:Zt,zoom:Qt}},An=function(S,O,Y,J,ee,te){var oe=Y;switch(!0){case(ee===r.ViewMode.DualPageWithCover&&te>=3):case(ee===r.ViewMode.DualPage&&te>=3):oe=2*Y;break;default:oe=Y}switch(J){case r.SpecialZoomLevel.ActualSize:return 1;case r.SpecialZoomLevel.PageFit:return Math.min((S.clientWidth-17)/oe,(S.clientHeight-16)/O);case r.SpecialZoomLevel.PageWidth:return(S.clientWidth-17)/oe}},Mr=function(S){var O,Y,J=S.getCurrentPage,ee=(O=50,Y=o.useRef([]),o.useEffect((function(){return function(){Y.current=[]}}),[]),{push:function(ae){var ie=Y.current;ie.length+1>O&&ie.shift(),ie.push(ae),Y.current=ie},map:function(ae){return Y.current.map((function(ie){return ae(ie)}))},pop:function(){var ae=Y.current;if(ae.length===0)return null;var ie=ae.pop();return Y.current=ae,ie}}),te=(function(ae){var ie=o.useRef([]);return o.useEffect((function(){return function(){ie.current=[]}}),[]),{dequeue:function(){var ge=ie.current;if(ge.length===0)return null;var me=ge.shift();return ie.current=ge,me||null},enqueue:function(ge){var me=ie.current;me.length+1>ae&&me.pop(),ie.current=[ge].concat(me)},map:function(ge){return ie.current.map((function(me){return ge(me)}))}}})(50),oe=function(){var ae=te.dequeue();return ae&&ee.push(ae),ae&&ae.pageIndex===J()?oe():ae},ne=function(){var ae=ee.pop();return ae&&te.enqueue(ae),ae&&ae.pageIndex===J()?ne():ae},Q=o.useCallback((function(ae){ee.push(ae)}),[]);return{getNextDestination:oe,getPreviousDestination:ne,markVisitedDestination:Q}},jn=function(S){var O=[];return S.map((function(Y){O=O.concat(Y).concat((function(J){var ee=[];return J.items&&J.items.length>0&&(ee=ee.concat(jn(J.items))),ee})(Y))})),O},zn={capture:!1,passive:!0},Tr={height:0,width:0},Cn={height:0,width:0},xr=function(S){var O=S.getCurrentPage,Y=S.getCurrentScrollMode,J=S.jumpToPage,ee=S.targetRef,te=o.useState(r.FullScreenMode.Normal),oe=te[0],ne=te[1],Q=(function(){var Be=o.useState(Tr),at=Be[0],nt=Be[1],ot=X((function(){nt({height:window.innerHeight,width:window.innerWidth})}),100);return e((function(){return window.addEventListener("resize",ot,zn),function(){window.removeEventListener("resize",ot,zn)}}),[]),at})(),ae=o.useState(Cn),ie=ae[0],ge=ae[1],me=o.useRef(Cn),pe=o.useRef(O()),Ce=o.useRef(Cn),Ae=o.useState(ee.current),we=Ae[0],Ye=Ae[1],De=o.useRef();e((function(){ee.current!==we&&Ye(ee.current)}),[]),e((function(){if(we){var Be=new ResizeObserver((function(at){at.forEach((function(nt){var ot=nt.target.getBoundingClientRect(),lt=ot.height,ut=ot.width;ge({height:lt,width:ut})}))}));return Be.observe(we),function(){Be.unobserve(we),Be.disconnect()}}}),[we]);var Oe=o.useCallback((function(Be){var at=H();return at&&at!==Be?(ne(r.FullScreenMode.Normal),N(at)):Promise.resolve()}),[]),ze=o.useCallback((function(Be){Be&&w()&&(Ye(Be),Oe(Be).then((function(){De.current=Be,ne(r.FullScreenMode.Entering),(function(at){R&&at[j.RequestFullScreen]()})(Be)})))}),[]),Te=o.useCallback((function(){H()&&(ne(r.FullScreenMode.Exitting),N(document))}),[]),qe=o.useCallback((function(){we&&H()!==we&&ne(r.FullScreenMode.Exitting)}),[we]);return o.useEffect((function(){switch(oe){case r.FullScreenMode.Entering:De.current&&(De.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),pe.current=O(),me.current={height:window.innerHeight,width:window.innerWidth};break;case r.FullScreenMode.Entered:Y()===r.ScrollMode.Page?J(pe.current).then((function(){ne(r.FullScreenMode.EnteredCompletely)})):ne(r.FullScreenMode.EnteredCompletely);break;case r.FullScreenMode.Exitting:De.current&&(De.current.style.backgroundColor="",De.current=null),pe.current=O();break;case r.FullScreenMode.Exited:ne(r.FullScreenMode.Normal),Y()===r.ScrollMode.Page&&J(pe.current)}}),[oe]),o.useEffect((function(){if(oe!==r.FullScreenMode.Normal)return oe===r.FullScreenMode.Entering&&Q.height===ie.height&&Q.width===ie.width&&Q.height>0&&Q.width>0&&(Ce.current.height===0||Q.height==Ce.current.height)?(Ce.current={height:window.innerHeight,width:window.innerWidth},void ne(r.FullScreenMode.Entered)):void(oe===r.FullScreenMode.Exitting&&me.current.height===Q.height&&me.current.width===Q.width&&Q.height>0&&Q.width>0&&ne(r.FullScreenMode.Exited))}),[oe,Q,ie]),o.useEffect((function(){var Be;return Be=qe,R&&document.addEventListener(j.FullScreenChange,Be),function(){(function(at){R&&document.removeEventListener(j.FullScreenChange,at)})(qe)}}),[we]),{enterFullScreenMode:ze,exitFullScreenMode:Te,fullScreenMode:oe}},Rr={buildPageStyles:function(){return{}},transformSize:function(S){return S.size}},un={left:0,top:0},Lr=function(S){var O=S.currentFile,Y=S.defaultScale,J=S.doc,ee=S.enableSmoothScroll,te=S.initialPage,oe=S.initialRotation,ne=S.initialScale,Q=S.pageLayout,ae=S.pageSizes,ie=S.plugins,ge=S.renderPage,me=S.scrollMode,pe=S.setRenderRange,Ce=S.viewMode,Ae=S.viewerState,we=S.onDocumentLoad,Ye=S.onOpenFile,De=S.onPageChange,Oe=S.onRotate,ze=S.onRotatePage,Te=S.onZoom,qe=J.numPages,Be=J.loadingTask.docId,at=o.useContext(M).l10n,nt=o.useContext(u),ot=nt.direction===r.TextDirection.RightToLeft,lt=o.useRef(),ut=o.useRef(),kt=o.useState(te),yt=kt[0],Mt=kt[1],wt=o.useRef(null),Ct=Mr({getCurrentPage:function(){return Ke.current.pageIndex}}),Pt=o.useState(oe),At=Pt[0],Ot=Pt[1],Zt=U(At),Xt=o.useState(!1),Lt=Xt[0],qt=Xt[1],Qt=o.useState(new Map),je=Qt[0],Ne=Qt[1],xe=o.useState(me),Fe=xe[0],Re=xe[1],Ve=U(Fe),We=o.useState(Ce),Ie=We[0],Me=We[1],Xe=U(Ie),Ze=(function(Ee){var Ge=G(),$e=o.useState([]),dt=$e[0],ct=$e[1];return o.useEffect((function(){Ee.getOutline().then((function(et){if(Ge.current&&et!==null){var Rt=jn(et);ct(Rt)}}))}),[]),dt})(J),vt=o.useState(ne),pt=vt[0],Ft=vt[1],Ut=U(pt),Ke=o.useRef(Ae),It=o.useRef(typeof Y=="string"?Y:null),bt=o.useRef(-1),Et=o.useRef(-1),xt=o.useRef(te),ht=xr({getCurrentPage:function(){return Ke.current.pageIndex},getCurrentScrollMode:function(){return Ke.current.scrollMode},jumpToPage:function(Ee){return tn(Ee)},targetRef:ut}),$t=o.useState(-1),dn=$t[0],_n=$t[1],ln=o.useState(0),mn=ln[0],Br=ln[1],Wt=p({doc:J});o.useEffect((function(){return function(){Je.clear(),gt.clear()}}),[Be]);var Un=o.useMemo((function(){return Object.assign({},Rr,Q)}),[]),jr=o.useMemo((function(){return Array(qe).fill(0).map((function(Ee,Ge){var $e=[ae[Ge].pageHeight,ae[Ge].pageWidth],dt=Math.abs(At)%180==0?{height:$e[0],width:$e[1]}:{height:$e[1],width:$e[0]},ct={height:dt.height*pt,width:dt.width*pt};return Un.transformSize({numPages:qe,pageIndex:Ge,size:ct})}))}),[At,pt]),mt=kr({enableSmoothScroll:ee,isRtl:ot,numberOfItems:qe,parentRef:ut,scrollMode:Fe,setRenderRange:pe,sizes:jr,viewMode:Ie}),zr=X((function(){!It.current||Ke.current.fullScreenMode!==r.FullScreenMode.Normal||te>0&&xt.current===te||cn(It.current)}),200);(function(Ee){var Ge=Ee.targetRef,$e=Ee.onResize;e((function(){var dt=new ResizeObserver((function(et){et.forEach((function(Rt){$e(Rt.target)}))})),ct=Ge.current;if(ct)return dt.observe(ct),function(){dt.unobserve(ct)}}),[])})({targetRef:ut,onResize:zr});var en=function(Ee){var Ge=Ee;ie.forEach((function($e){$e.onViewerStateChange&&(Ge=$e.onViewerStateChange(Ge))})),Ke.current=Ge},Hr=function(){return ut.current},qr=function(){return Ke.current},Vr=o.useCallback((function(Ee){Ct.markVisitedDestination(Ee)}),[]),Mn=o.useCallback((function(Ee){var Ge=Ee.pageIndex,$e=Ee.bottomOffset,dt=Ee.leftOffset,ct=Ee.scaleTo,et=ut.current,Rt=Ke.current;return et&&Rt?new Promise((function(nn,In){st(J,Ge).then((function(yn){var rn=yn.getViewport({scale:1}),En=0,Qn=(typeof $e=="function"?$e(rn.width,rn.height):$e)||0,Sn=(typeof dt=="function"?dt(rn.width,rn.height):dt)||0,hn=Rt.scale;switch(ct){case r.SpecialZoomLevel.PageFit:En=0,Sn=0,cn(r.SpecialZoomLevel.PageFit);break;case r.SpecialZoomLevel.PageWidth:hn=An(et,ae[Ge].pageHeight,ae[Ge].pageWidth,r.SpecialZoomLevel.PageWidth,Ce,qe),En=(rn.height-Qn)*hn,Sn*=hn,cn(hn);break;default:En=(rn.height-Qn)*hn,Sn*=hn}switch(Rt.scrollMode){case r.ScrollMode.Horizontal:mt.scrollToItem(Ge,{left:Sn,top:0}).then((function(){nn()}));break;case r.ScrollMode.Vertical:default:mt.scrollToItem(Ge,{left:0,top:En}).then((function(){nn()}))}}))})):Promise.resolve()}),[]),Wn=o.useCallback((function(Ee){return Ct.markVisitedDestination(Ee),Mn(Ee)}),[]),Ur=o.useCallback((function(){var Ee=Ct.getNextDestination();return Ee?Mn(Ee):Promise.resolve()}),[]),Wr=o.useCallback((function(){var Ee=Ct.getPreviousDestination();return Ee?Mn(Ee):Promise.resolve()}),[]),Gr=o.useCallback((function(){return mt.scrollToNextItem(Ke.current.pageIndex,un)}),[]),tn=o.useCallback((function(Ee){return 0<=Ee&&Ee<qe?mt.scrollToItem(Ee,un):Promise.resolve()}),[]),Xr=o.useCallback((function(){return mt.scrollToPreviousItem(Ke.current.pageIndex,un)}),[]),Gn=o.useCallback((function(Ee){var Ge,$e;(Ge=Ee.name,$e=Ge.split(/\./).pop(),$e?$e.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(dt){var ct=new FileReader;ct.readAsArrayBuffer(Ee),ct.onload=function(){var et=new Uint8Array(ct.result);dt(et)}})).then((function(dt){Ye(Ee.name,dt)}))}),[Ye]),Xn=o.useCallback((function(Ee){var Ge=Ee===r.RotateDirection.Backward?-90:90,$e=Ke.current.rotation,dt=$e===360||$e===-360?Ge:$e+Ge;Wt.markNotRendered(),Ot(dt),en(n(n({},Ke.current),{rotation:dt})),Oe({direction:Ee,doc:J,rotation:dt})}),[]),Tn=o.useCallback((function(Ee,Ge){var $e=Ge===r.RotateDirection.Backward?-90:90,dt=Ke.current.pagesRotation,ct=(dt.has(Ee)?dt.get(Ee):oe)+$e,et=dt.set(Ee,ct);Ne(et),qt((function(Rt){return!Rt})),en(n(n({},Ke.current),{pagesRotation:et,rotatedPage:Ee})),ze({direction:Ge,doc:J,pageIndex:Ee,rotation:ct}),Wt.markRendering(Ee),_n(Ee)}),[]),Kn=o.useCallback((function(Ee){en(n(n({},Ke.current),{scrollMode:Ee})),Re(Ee)}),[]),Yn=o.useCallback((function(Ee){en(n(n({},Ke.current),{viewMode:Ee})),Me(Ee)}),[]),cn=o.useCallback((function(Ee){var Ge=ut.current,$e=Ke.current.pageIndex;if(!($e<0||$e>=qe)){var dt=ae[$e].pageHeight,ct=ae[$e].pageWidth,et=Ge?typeof Ee=="string"?An(Ge,dt,ct,Ee,Ke.current.viewMode,qe):Ee:1;It.current=typeof Ee=="string"?Ee:null,et!==Ke.current.scale&&(Br((function(Rt){return Rt+1})),Wt.markNotRendered(),Ft(et),Te({doc:J,scale:et}),en(n(n({},Ke.current),{scale:et})))}}),[]),Kr=o.useCallback((function(Ee){ht.enterFullScreenMode(Ee)}),[]),Yr=o.useCallback((function(){ht.exitFullScreenMode()}),[]);o.useEffect((function(){en(n(n({},Ke.current),{fullScreenMode:ht.fullScreenMode}))}),[ht.fullScreenMode]),o.useEffect((function(){var Ee={enterFullScreenMode:Kr,exitFullScreenMode:Yr,getPagesContainer:Hr,getViewerState:qr,jumpToDestination:Wn,jumpToNextDestination:Ur,jumpToPreviousDestination:Wr,jumpToNextPage:Gr,jumpToPreviousPage:Xr,jumpToPage:tn,openFile:Gn,rotate:Xn,rotatePage:Tn,setViewerState:en,switchScrollMode:Kn,switchViewMode:Yn,zoom:cn};return ie.forEach((function(Ge){Ge.install&&Ge.install(Ee)})),function(){ie.forEach((function(Ge){Ge.uninstall&&Ge.uninstall(Ee)}))}}),[Be]),o.useEffect((function(){we({doc:J,file:O}),ie.forEach((function(Ee){Ee.onDocumentLoad&&Ee.onDocumentLoad({doc:J,file:O})}))}),[Be]);var xn,Rn,Ln,Zn=mt.boundingClientRect;xn=function(){te&&tn(te)},Rn=Zn.height>0&&Zn.width>0,Ln=o.useRef(!1),e((function(){Rn&&!Ln.current&&(Ln.current=!0,xn())}),[xn,Rn]),e((function(){var Ee=Ke.current.pageIndex;Ee>-1&&Ve!==Fe&&mt.scrollToItem(Ee,un).then((function(){ht.fullScreenMode===r.FullScreenMode.EnteredCompletely&&(ee||Wt.markNotRendered(),bt.current=-1)}))}),[Fe]),e((function(){var Ee=Ke.current.pageIndex;Ee>-1&&Zt!==At&&mt.scrollToItem(Ee,un)}),[At]),e((function(){Ut!=0&&Ut!=Ke.current.scale&&mt.zoom(Ke.current.scale/Ut,Ke.current.pageIndex).then((function(){ht.fullScreenMode===r.FullScreenMode.EnteredCompletely&&(Et.current=-1)}))}),[pt]),e((function(){if(Xe!==Ke.current.viewMode){var Ee=mt.startPage,Ge=mt.endPage,$e=mt.virtualItems;Wt.markNotRendered(),Wt.setRange(Ee,Ge);for(var dt=function(et){var Rt=$e.find((function(nn){return nn.index===et}));Rt&&Wt.setVisibility(et,Rt.visibility)},ct=Ee;ct<=Ge;ct++)dt(ct);Fn()}}),[Ie]),e((function(){var Ee=Ke.current.pageIndex;Ee>-1&&Xe!==Ie&&mt.scrollToItem(Ee,un)}),[Ie]),e((function(){var Ee=Ke.current.pageIndex;Ee>0&&Ee===te&&xt.current===te&&It.current&&(xt.current=-1,cn(It.current))}),[yt]),o.useEffect((function(){mt.isSmoothScrolling||wt.current!==null&&wt.current===yt||(wt.current=yt,De({currentPage:yt,doc:J}))}),[yt,mt.isSmoothScrolling]),o.useEffect((function(){ht.fullScreenMode===r.FullScreenMode.Entering&&Ke.current.scrollMode===r.ScrollMode.Page&&(bt.current=Ke.current.pageIndex),ht.fullScreenMode===r.FullScreenMode.EnteredCompletely&&Ke.current.scrollMode===r.ScrollMode.Page&&ee&&(bt.current=-1),ht.fullScreenMode===r.FullScreenMode.EnteredCompletely&&It.current&&(Et.current=Ke.current.pageIndex,cn(It.current))}),[ht.fullScreenMode]),o.useEffect((function(){if(ht.fullScreenMode!==r.FullScreenMode.Entering&&ht.fullScreenMode!==r.FullScreenMode.Exitting&&!mt.isSmoothScrolling){var Ee=mt.startPage,Ge=mt.endPage,$e=mt.maxVisbilityIndex,dt=mt.virtualItems,ct=$e,et=ht.fullScreenMode===r.FullScreenMode.Entered||ht.fullScreenMode===r.FullScreenMode.EnteredCompletely;if(!(et&&ct!==bt.current&&bt.current>-1||et&&ct!==Et.current&&Et.current>-1)){Mt(ct),en(n(n({},Ke.current),{pageIndex:ct})),Wt.setRange(Ee,Ge);for(var Rt=function(In){var yn=dt.find((function(rn){return rn.index===In}));yn&&Wt.setVisibility(In,yn.visibility)},nn=Ee;nn<=Ge;nn++)Rt(nn);Fn()}}}),[mt.startPage,mt.endPage,mt.isSmoothScrolling,mt.maxVisbilityIndex,ht.fullScreenMode,Lt,At,pt]);var Zr=o.useCallback((function(Ee){Wt.markRendered(Ee),Fn()}),[mn]),Fn=function(){var Ee=Wt.getHighestPriorityPage();Ee>-1&&Wt.isInRange(Ee)&&(Wt.markRendering(Ee),_n(Ee))},Jr=function(Ee){var Ge=yt-1,$e=yt+1;switch(Ee){case"FirstPage":tn(0);break;case"LastPage":tn(qe-1);break;case"NextPage":$e<qe&&tn($e);break;case"PrevPage":Ge>=0&&tn(Ge)}},Qr=o.useCallback((function(){var Ee=mt.virtualItems,Ge=[];switch(Ie){case r.ViewMode.DualPage:Ge=Ue(Ee,2);break;case r.ViewMode.DualPageWithCover:Ee.length&&(Ge=Ee[0].index===0?[[Ee[0]]].concat(Ue(Ee.slice(1),2)):Ue(Ee,2));break;case r.ViewMode.SinglePage:default:Ge=Ue(Ee,1)}var $e=at&&at.core?at.core.pageLabel:"Page {{pageIndex}}",dt={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:lt,style:{height:"100%"}},children:o.createElement(o.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:l({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Fe===r.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ot,"rpv-core__inner-pages--single":Fe===r.ScrollMode.Page,"rpv-core__inner-pages--vertical":Fe===r.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Fe===r.ScrollMode.Wrapped}),ref:ut,style:{height:"100%",position:"relative"}},children:o.createElement("div",{"data-testid":"core__inner-current-page-".concat(yt),style:Object.assign({"--scale-factor":pt},mt.getContainerStyles())},Ge.map((function(ct){return o.createElement("div",{className:l({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Fe===r.ScrollMode.Page}),style:mt.getItemContainerStyles(ct[0]),key:"".concat(ct[0].index,"-").concat(Ie)},ct.map((function(et){var Rt=Ie===r.ViewMode.DualPageWithCover&&(et.index===0||qe%2==0&&et.index===qe-1);return o.createElement("div",{"aria-label":$e.replace("{{pageIndex}}","".concat(et.index+1)),className:l({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Ie===r.ViewMode.DualPage&&et.index%2==0,"rpv-core__inner-page--dual-odd":Ie===r.ViewMode.DualPage&&et.index%2==1,"rpv-core__inner-page--dual-cover":Rt,"rpv-core__inner-page--dual-cover-even":Ie===r.ViewMode.DualPageWithCover&&!Rt&&et.index%2==0,"rpv-core__inner-page--dual-cover-odd":Ie===r.ViewMode.DualPageWithCover&&!Rt&&et.index%2==1,"rpv-core__inner-page--single":Ie===r.ViewMode.SinglePage&&Fe===r.ScrollMode.Page}),role:"region",key:"".concat(et.index,"-").concat(Ie),style:Object.assign({},mt.getItemStyles(et),Un.buildPageStyles({numPages:qe,pageIndex:et.index,scrollMode:Fe,viewMode:Ie}))},o.createElement(vr,{doc:J,measureRef:et.measureRef,outlines:Ze,pageIndex:et.index,pageRotation:je.has(et.index)?je.get(et.index):0,pageSize:ae[et.index],plugins:ie,renderPage:ge,renderQueueKey:mn,rotation:At,scale:pt,shouldRender:dn===et.index,viewMode:Ie,onExecuteNamedAction:Jr,onJumpFromLinkAnnotation:Vr,onJumpToDest:Wn,onRenderCompleted:Zr,onRotatePage:Tn}))})))})))}};return ie.forEach((function(ct){ct.renderViewer&&(dt=ct.renderViewer({containerRef:lt,doc:J,pagesContainerRef:ut,pagesRotation:je,pageSizes:ae,rotation:At,slot:dt,themeContext:nt,jumpToPage:tn,openFile:Gn,rotate:Xn,rotatePage:Tn,switchScrollMode:Kn,switchViewMode:Yn,zoom:cn}))})),dt}),[ie,mt]),Jn=o.useCallback((function(Ee){return o.createElement("div",n({},Ee.attrs,{style:Ee.attrs&&Ee.attrs.style?Ee.attrs.style:{}}),Ee.children,Ee.subSlot&&Jn(Ee.subSlot))}),[]);return Jn(Qr())},Hn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Fr=function(S){var O=S.defaultScale,Y=S.doc,J=S.render,ee=S.scrollMode,te=S.viewMode,oe=o.useRef(),ne=o.useState({pageSizes:[],scale:0}),Q=ne[0],ae=ne[1];return o.useLayoutEffect((function(){var ie=Array(Y.numPages).fill(0).map((function(ge,me){return new Promise((function(pe,Ce){st(Y,me).then((function(Ae){var we=Ae.getViewport({scale:1});pe({pageHeight:we.height,pageWidth:we.width,rotation:we.rotation})}))}))}));Promise.all(ie).then((function(ge){var me=oe.current;if(me&&ge.length!==0){var pe=ge[0].pageWidth,Ce=ge[0].pageHeight,Ae=me.parentElement,we=(Ae.clientWidth-45)/pe,Ye=(Ae.clientHeight-45)/Ce,De=we;switch(ee){case r.ScrollMode.Horizontal:De=Math.min(we,Ye);break;case r.ScrollMode.Vertical:default:De=we}var Oe,ze,Te=O?typeof O=="string"?An(Ae,Ce,pe,O,te,Y.numPages):O:(Oe=De,(ze=Hn.findIndex((function(qe){return qe>=Oe})))===-1||ze===0?Oe:Hn[ze-1]);ae({pageSizes:ge,scale:Te})}}))}),[Y.loadingTask.docId]),Q.pageSizes.length===0||Q.scale===0?o.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:oe},o.createElement(x,null)):J(Q.pageSizes,Q.scale)},bn=function(){},Pn=(function(S){function O(Y,J){var ee=S.call(this)||this;return ee.verifyPassword=Y,ee.passwordStatus=J,ee}return K(O,S),O})(bn),Ir=function(S){var O=S.passwordStatus,Y=S.renderProtectedView,J=S.verifyPassword,ee=S.onDocumentAskPassword,te=o.useContext(M).l10n,oe=o.useState(""),ne=oe[0],Q=oe[1],ae=o.useContext(u).direction===r.TextDirection.RightToLeft,ie=function(){return J(ne)};return o.useEffect((function(){ee&&ee({verifyPassword:J})}),[]),Y?Y({passwordStatus:O,verifyPassword:J}):o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:l({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":ae})},o.createElement("div",{className:"rpv-core__asking-password-message"},O===r.PasswordStatus.RequiredPassword&&te.core.askingPassword.requirePasswordToOpen,O===r.PasswordStatus.WrongPassword&&te.core.wrongPassword.tryAgain),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:l({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!ae,"rpv-core__asking-password-input--rtl":ae})},o.createElement(E,{testId:"core__asking-password-input",type:"password",value:ne,onChange:Q,onKeyDown:function(ge){ge.key==="Enter"&&ie()}})),o.createElement(f,{onClick:ie},te.core.askingPassword.submit))))},qn=(function(S){function O(Y){var J=S.call(this)||this;return J.doc=Y,J}return K(O,S),O})(bn),Vn=(function(S){function O(Y){var J=S.call(this)||this;return J.error=Y,J}return K(O,S),O})(bn),kn=(function(S){function O(Y){var J=S.call(this)||this;return J.percentages=Y,J}return K(O,S),O})(bn),Dr=function(S){var O=S.characterMap,Y=S.file,J=S.httpHeaders,ee=S.render,te=S.renderError,oe=S.renderLoader,ne=S.renderProtectedView,Q=S.transformGetDocumentParams,ae=S.withCredentials,ie=S.onDocumentAskPassword,ge=o.useContext(u).direction===r.TextDirection.RightToLeft,me=o.useState(new kn(0)),pe=me[0],Ce=me[1],Ae=o.useRef(""),we=G();return o.useEffect((function(){Ae.current="",Ce(new kn(0));var Ye=new T.PDFWorker({name:"PDFWorker_".concat(Date.now())}),De=Object.assign({httpHeaders:J,withCredentials:ae,worker:Ye},typeof Y=="string"?{url:Y}:{data:Y},O?{cMapUrl:O.url,cMapPacked:O.isCompressed}:{}),Oe=Q?Q(De):De,ze=T.getDocument(Oe);return ze.onPassword=function(Te,qe){switch(qe){case T.PasswordResponses.NEED_PASSWORD:we.current&&Ce(new Pn(Te,r.PasswordStatus.RequiredPassword));break;case T.PasswordResponses.INCORRECT_PASSWORD:we.current&&Ce(new Pn(Te,r.PasswordStatus.WrongPassword))}},ze.onProgress=function(Te){var qe=Te.total>0?Math.min(100,100*Te.loaded/Te.total):100;we.current&&Ae.current===""&&Ce(new kn(qe))},ze.promise.then((function(Te){Ae.current=Te.loadingTask.docId,we.current&&Ce(new qn(Te))}),(function(Te){return we.current&&!Ye.destroyed&&Ce(new Vn({message:Te.message||"Cannot load document",name:Te.name}))})),function(){ze.destroy(),Ye.destroy()}}),[Y]),pe instanceof Pn?o.createElement(Ir,{passwordStatus:pe.passwordStatus,renderProtectedView:ne,verifyPassword:pe.verifyPassword,onDocumentAskPassword:ie}):pe instanceof qn?ee(pe.doc):pe instanceof Vn?te?te(pe.error):o.createElement("div",{className:l({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ge})},o.createElement("div",{className:"rpv-core__doc-error-text"},pe.error.message)):o.createElement("div",{"data-testid":"core__doc-loading",className:l({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ge})},oe?oe(pe.percentages):o.createElement(x,null))},Or=function(S,O){var Y=o.useMemo((function(){return S==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":S}),[]),J=o.useState(Y),ee=J[0],te=J[1],oe=U(ee);return o.useEffect((function(){if(S==="auto"){var ne=window.matchMedia("(prefers-color-scheme: dark)"),Q=function(ae){te(ae.matches?"dark":"light")};return ne.addEventListener("change",Q),function(){return ne.removeEventListener("change",Q)}}}),[]),o.useEffect((function(){ee!==oe&&O&&O(ee)}),[ee]),o.useEffect((function(){S!==ee&&te(S)}),[S]),{currentTheme:ee,setCurrentTheme:te}},Nr=function(S){return{startPage:S.startPage-3,endPage:S.endPage+3}};r.Button=function(S){var O=S.children,Y=S.testId,J=S.onClick,ee=o.useContext(u).direction===r.TextDirection.RightToLeft,te=Y?{"data-testid":Y}:{};return o.createElement("button",n({className:l({"rpv-core__button":!0,"rpv-core__button--rtl":ee}),type:"button",onClick:J},te),O)},r.Icon=c,r.LazyRender=function(S){var O=S.attrs,Y=S.children,J=S.testId,ee=o.useState(!1),te=ee[0],oe=ee[1],ne=J?n(n({},O),{"data-testid":J}):O,Q=t({once:!0,onVisibilityChanged:function(ae){ae.isVisible&&oe(!0)}});return o.createElement("div",n({ref:Q},ne),te&&Y)},r.LocalizationContext=M,r.Menu=function(S){var O=S.children,Y=o.useRef(),J=o.useRef([]),ee=o.useContext(u).direction===r.TextDirection.RightToLeft,te=function(ne){if(Y.current)switch(ne.key){case"Tab":ne.preventDefault();break;case"ArrowDown":ne.preventDefault(),oe((function(Q,ae){return ae+1}));break;case"ArrowUp":ne.preventDefault(),oe((function(Q,ae){return ae-1}));break;case"End":ne.preventDefault(),oe((function(Q,ae){return Q.length-1}));break;case"Home":ne.preventDefault(),oe((function(Q,ae){return 0}))}},oe=function(ne){if(Y.current){var Q=J.current,ae=Q.findIndex((function(ge){return ge.getAttribute("tabindex")==="0"})),ie=Math.min(Q.length-1,Math.max(0,ne(Q,ae)));ae>=0&&ae<=Q.length-1&&Q[ae].setAttribute("tabindex","-1"),Q[ie].setAttribute("tabindex","0"),Q[ie].focus()}};return e((function(){var ne=Y.current;if(ne){var Q=(function(ae){var ie=[];return ae.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(ge){if(ge instanceof HTMLElement){var me=ge.parentElement;(me===ae||window.getComputedStyle(me).display!=="none")&&ie.push(ge)}})),ie})(ne);J.current=Q}}),[]),e((function(){return document.addEventListener("keydown",te),function(){document.removeEventListener("keydown",te)}}),[]),o.createElement("div",{ref:Y,"aria-orientation":"vertical",className:l({"rpv-core__menu":!0,"rpv-core__menu--rtl":ee}),role:"menu",tabIndex:0},O)},r.MenuDivider=function(){return o.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},r.MenuItem=function(S){var O=S.checked,Y=O!==void 0&&O,J=S.children,ee=S.icon,te=ee===void 0?null:ee,oe=S.isDisabled,ne=oe!==void 0&&oe,Q=S.testId,ae=S.onClick,ie=o.useContext(u).direction===r.TextDirection.RightToLeft,ge=Q?{"data-testid":Q}:{};return o.createElement("button",n({className:l({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":ne,"rpv-core__menu-item--ltr":!ie,"rpv-core__menu-item--rtl":ie}),role:"menuitem",tabIndex:-1,type:"button",onClick:ae},ge),o.createElement("div",{className:l({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!ie,"rpv-core__menu-item-icon--rtl":ie})},te),o.createElement("div",{className:l({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!ie,"rpv-core__menu-item-label--rtl":ie})},J),o.createElement("div",{className:l({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!ie,"rpv-core__menu-item-check--rtl":ie})},Y&&o.createElement(s,null)))},r.MinimalButton=function(S){var O=S.ariaLabel,Y=O===void 0?"":O,J=S.ariaKeyShortcuts,ee=J===void 0?"":J,te=S.children,oe=S.isDisabled,ne=oe!==void 0&&oe,Q=S.isSelected,ae=Q!==void 0&&Q,ie=S.testId,ge=S.onClick,me=o.useContext(u).direction===r.TextDirection.RightToLeft,pe=ie?{"data-testid":ie}:{};return o.createElement("button",n({"aria-label":Y},ee&&{"aria-keyshortcuts":ee},ne&&{"aria-disabled":!0},{className:l({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":ne,"rpv-core__minimal-button--rtl":me,"rpv-core__minimal-button--selected":ae}),type:"button",onClick:ge},pe),te)},r.Modal=function(S){var O=S.ariaControlsSuffix,Y=S.closeOnClickOutside,J=S.closeOnEscape,ee=S.content,te=S.isOpened,oe=te!==void 0&&te,ne=S.target,Q=O||"".concat(I());return o.createElement(W,{target:ne?function(ae,ie){return o.createElement("div",{"aria-expanded":ie?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Q)},ne(ae,ie))}:null,content:function(ae){return o.createElement(C,null,o.createElement(v,{ariaControlsSuffix:Q,closeOnClickOutside:Y,closeOnEscape:J,onToggle:ae},ee(ae)))},isOpened:oe})},r.Popover=function(S){var O=S.ariaHasPopup,Y=O===void 0?"dialog":O,J=S.ariaControlsSuffix,ee=S.closeOnClickOutside,te=S.closeOnEscape,oe=S.content,ne=S.lockScroll,Q=ne===void 0||ne,ae=S.offset,ie=S.position,ge=S.target,me=V(!1),pe=me.opened,Ce=me.toggle,Ae=o.useRef(),we=o.useMemo((function(){return J||"".concat(I())}),[]);return o.createElement("div",{ref:Ae,"aria-expanded":pe?"true":"false","aria-haspopup":Y,"aria-controls":"rpv-core__popver-body-".concat(we)},ge(Ce,pe),pe&&o.createElement(o.Fragment,null,Q&&o.createElement(be,{closeOnEscape:te,onClose:Ce}),o.createElement(ve,{ariaControlsSuffix:we,closeOnClickOutside:ee,offset:ae,position:ie,targetRef:Ae,onClose:Ce},oe(Ce))))},r.PrimaryButton=f,r.ProgressBar=function(S){var O=S.progress,Y=o.useContext(u).direction===r.TextDirection.RightToLeft;return o.createElement("div",{className:l({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":Y})},o.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(O,"%")}},O,"%"))},r.Separator=function(){return o.createElement("div",{className:"rpv-core__separator"})},r.Spinner=x,r.Splitter=function(S){var O=S.constrain,Y=o.useContext(u).direction===r.TextDirection.RightToLeft,J=o.useRef(),ee=o.useRef(),te=o.useRef(),oe=o.useRef(0),ne=o.useRef(0),Q=o.useRef(0),ae=o.useRef(0),ie={capture:!0},ge=function(pe){var Ce=J.current,Ae=ee.current,we=te.current;if(Ce&&Ae&&we){var Ye=ae.current,De=pe.clientX-oe.current,Oe=Q.current+(Y?-De:De),ze=Ce.parentElement.getBoundingClientRect().width,Te=100*Oe/ze;if(Ce.classList.add("rpv-core__splitter--resizing"),O){var qe=ze-Oe-Ye;if(!O({firstHalfPercentage:Te,firstHalfSize:Oe,secondHalfPercentage:100*qe/ze,secondHalfSize:qe}))return}Ae.style.width="".concat(Te,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Ae.classList.add("rpv-core__splitter-sibling--resizing"),we.classList.add("rpv-core__splitter-sibling--resizing")}},me=function(pe){var Ce=J.current,Ae=ee.current,we=te.current;Ce&&Ae&&we&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Ce.classList.remove("rpv-core__splitter--resizing"),Ae.classList.remove("rpv-core__splitter-sibling--resizing"),we.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ge,ie),document.removeEventListener("mouseup",me,ie))};return o.useEffect((function(){var pe=J.current;pe&&(ae.current=pe.getBoundingClientRect().width,ee.current=pe.previousElementSibling,te.current=pe.nextElementSibling)}),[]),o.createElement("div",{ref:J,className:"rpv-core__splitter",onMouseDown:function(pe){var Ce=ee.current;Ce&&(oe.current=pe.clientX,ne.current=pe.clientY,Q.current=Ce.getBoundingClientRect().width,document.addEventListener("mousemove",ge,ie),document.addEventListener("mouseup",me,ie))}})},r.TextBox=E,r.ThemeContext=u,r.Tooltip=function(S){var O=S.ariaControlsSuffix,Y=S.content,J=S.offset,ee=S.position,te=S.target,oe=V(!1),ne=oe.opened,Q=oe.toggle,ae=o.useRef(),ie=o.useRef(),ge=o.useMemo((function(){return O||"".concat(I())}),[]);B((function(){ae.current&&document.activeElement&&ae.current.contains(document.activeElement)&&pe()}));var me=function(){Q(r.ToggleStatus.Open)},pe=function(){Q(r.ToggleStatus.Close)};return o.createElement(o.Fragment,null,o.createElement("div",{ref:ae,"aria-describedby":"rpv-core__tooltip-body-".concat(ge),onBlur:function(Ce){Ce.relatedTarget instanceof HTMLElement&&Ce.currentTarget.parentElement&&Ce.currentTarget.parentElement.contains(Ce.relatedTarget)?ie.current&&(ie.current.style.display="none"):pe()},onFocus:me,onMouseEnter:me,onMouseLeave:pe},te),ne&&o.createElement(ke,{ariaControlsSuffix:ge,contentRef:ie,offset:J,position:ee,targetRef:ae},Y()))},r.Viewer=function(S){var O=S.characterMap,Y=S.defaultScale,J=S.enableSmoothScroll,ee=J===void 0||J,te=S.fileUrl,oe=S.httpHeaders,ne=oe===void 0?{}:oe,Q=S.initialPage,ae=Q===void 0?0:Q,ie=S.pageLayout,ge=S.initialRotation,me=ge===void 0?0:ge,pe=S.localization,Ce=S.plugins,Ae=Ce===void 0?[]:Ce,we=S.renderError,Ye=S.renderLoader,De=S.renderPage,Oe=S.renderProtectedView,ze=S.scrollMode,Te=ze===void 0?r.ScrollMode.Vertical:ze,qe=S.setRenderRange,Be=qe===void 0?Nr:qe,at=S.transformGetDocumentParams,nt=S.theme,ot=nt===void 0?{direction:r.TextDirection.LeftToRight,theme:"light"}:nt,lt=S.viewMode,ut=lt===void 0?r.ViewMode.SinglePage:lt,kt=S.withCredentials,yt=kt!==void 0&&kt,Mt=S.onDocumentAskPassword,wt=S.onDocumentLoad,Ct=wt===void 0?function(){}:wt,Pt=S.onPageChange,At=Pt===void 0?function(){}:Pt,Ot=S.onRotate,Zt=Ot===void 0?function(){}:Ot,Xt=S.onRotatePage,Lt=Xt===void 0?function(){}:Xt,qt=S.onSwitchTheme,Qt=qt===void 0?function(){}:qt,je=S.onZoom,Ne=je===void 0?function(){}:je,xe=o.useState({data:te,name:typeof te=="string"?te:"",shouldLoad:!1}),Fe=xe[0],Re=xe[1],Ve=function(bt,Et){Re({data:Et,name:bt,shouldLoad:!0})},We=o.useState(!1),Ie=We[0],Me=We[1],Xe=U(Fe);o.useEffect((function(){var bt,Et,xt,ht;bt=Xe.data,ht=typeof(Et=te),(xt=typeof bt)=="string"&&ht==="string"&&bt===Et||xt==="object"&&ht==="object"&&bt.length===Et.length&&bt.every((function($t,dn){return $t===Et[dn]}))||Re({data:te,name:typeof te=="string"?te:"",shouldLoad:Ie})}),[te,Ie]);var Ze=t({onVisibilityChanged:function(bt){Me(bt.isVisible),bt.isVisible&&Re((function(Et){return Object.assign({},Et,{shouldLoad:!0})}))}}),vt=typeof ot=="string"?{direction:r.TextDirection.LeftToRight,theme:ot}:ot,pt=o.useState(pe||b),Ft=pt[0],Ut=pt[1],Ke={l10n:Ft,setL10n:Ut},It=Object.assign({},{direction:vt.direction},Or(vt.theme||"light",Qt));return o.useEffect((function(){pe&&Ut(pe)}),[pe]),o.createElement(M.Provider,{value:Ke},o.createElement(u.Provider,{value:It},o.createElement("div",{ref:Ze,className:"rpv-core__viewer rpv-core__viewer--".concat(It.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Fe.shouldLoad&&o.createElement(Dr,{characterMap:O,file:Fe.data,httpHeaders:ne,render:function(bt){return o.createElement(Fr,{defaultScale:Y,doc:bt,render:function(Et,xt){return o.createElement(Lr,{currentFile:{data:Fe.data,name:Fe.name},defaultScale:Y,doc:bt,enableSmoothScroll:ee,initialPage:ae,initialRotation:me,initialScale:xt,pageLayout:ie,pageSizes:Et,plugins:Ae,renderPage:De,scrollMode:Te,setRenderRange:Be,viewMode:ut,viewerState:{file:Fe,fullScreenMode:r.FullScreenMode.Normal,pageIndex:-1,pageHeight:Et[0].pageHeight,pageWidth:Et[0].pageWidth,pagesRotation:new Map,rotation:me,scale:xt,scrollMode:Te,viewMode:ut},onDocumentLoad:Ct,onOpenFile:Ve,onPageChange:At,onRotate:Zt,onRotatePage:Lt,onZoom:Ne})},scrollMode:Te,viewMode:ut})},renderError:we,renderLoader:Ye,renderProtectedView:Oe,transformGetDocumentParams:at,withCredentials:yt,onDocumentAskPassword:Mt}))))},r.Worker=function(S){var O=S.children,Y=S.workerUrl;return T.GlobalWorkerOptions.workerSrc=Y,o.createElement(o.Fragment,null,O)},r.chunk=Ue,r.classNames=l,r.createStore=function(S){var O=S||{},Y={},J=function(te,oe){var ne;O=n(n({},O),((ne={})[te]=oe,ne)),(Y[te]||[]).forEach((function(Q){return Q(O[te])}))},ee=function(te){return O[te]};return{subscribe:function(te,oe){Y[te]=(Y[te]||[]).concat(oe)},unsubscribe:function(te,oe){Y[te]=(Y[te]||[]).filter((function(ne){return ne!==oe}))},update:function(te,oe){J(te,oe)},updateCurrentValue:function(te,oe){var ne=ee(te);ne!==void 0&&J(te,oe(ne))},get:function(te){return ee(te)}}},r.getDestination=jt,r.getPage=st,r.isFullScreenEnabled=w,r.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},r.useDebounceCallback=X,r.useIntersectionObserver=t,r.useIsMounted=G,r.useIsomorphicLayoutEffect=e,r.usePrevious=U,r.useRenderQueue=p})(core_min)),core_min}var hasRequiredLib$h;function requireLib$h(){if(hasRequiredLib$h)return lib$h.exports;hasRequiredLib$h=1;return lib$h.exports=requireCore_min(),lib$h.exports}var libExports$1=requireLib$h(),lib$g={exports:{}},defaultLayout_min={},lib$f={exports:{}},attachment_min={},hasRequiredAttachment_min;function requireAttachment_min(){if(hasRequiredAttachment_min)return attachment_min;hasRequiredAttachment_min=1;var r=requireLib$h();function d(T){var z=Object.create(null);return T&&Object.keys(T).forEach((function(K){if(K!=="default"){var h=Object.getOwnPropertyDescriptor(T,K);Object.defineProperty(z,K,h.get?h:{enumerable:!0,get:function(){return T[K]}})}})),z.default=T,Object.freeze(z)}var i=d(requireReact()),m=function(T){var z=T.files,K=i.useRef(),h=i.useContext(r.LocalizationContext).l10n,n=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,a=i.useRef([]),u=h&&h.attachment?h.attachment.clickToDownload:"Click to download",l=function(e){var t=K.current,c=[].slice.call(t.getElementsByClassName("rpv-attachment__item"));if(c.length!==0){c.forEach((function(x){return x.setAttribute("tabindex","-1")}));var s=document.activeElement,f=c[Math.min(c.length-1,Math.max(0,e(c,s)))];f.setAttribute("tabindex","0"),f.focus()}};return r.useIsomorphicLayoutEffect((function(){var e=K.current;if(e){var t=[].slice.call(e.getElementsByClassName("rpv-attachment__item"));if(a.current=t,t.length>0){var c=t[0];c.focus(),c.setAttribute("tabindex","0")}}}),[]),i.createElement("div",{"data-testid":"attachment__list",className:r.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":n}),ref:K,tabIndex:-1,onKeyDown:function(e){switch(e.key){case"ArrowDown":e.preventDefault(),l((function(t,c){return t.indexOf(c)+1}));break;case"ArrowUp":e.preventDefault(),l((function(t,c){return t.indexOf(c)-1}));break;case"End":e.preventDefault(),l((function(t,c){return t.length-1}));break;case"Home":e.preventDefault(),l((function(t,c){return 0}))}}},z.map((function(e){return i.createElement("button",{className:"rpv-attachment__item",key:e.fileName,tabIndex:-1,title:u,type:"button",onClick:function(){return t=e.fileName,c=e.data,s=typeof c=="string"?"":URL.createObjectURL(new Blob([c],{type:""})),(f=document.createElement("a")).style.display="none",f.href=s||t,f.setAttribute("download",(function(x){var E=x.split("/").pop();return E?E.split("#")[0].split("?")[0]:x})(t)),document.body.appendChild(f),f.click(),document.body.removeChild(f),void(s&&URL.revokeObjectURL(s));var t,c,s,f}},e.fileName)})))},y=function(T){var z=T.doc,K=i.useContext(r.LocalizationContext).l10n,h=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,n=K&&K.attachment?K.attachment.noAttachment:"There is no attachment",a=i.useState({files:[],isLoaded:!1}),u=a[0],l=a[1];return i.useEffect((function(){z.getAttachments().then((function(e){var t=e?Object.keys(e).map((function(c){return{data:e[c].content,fileName:e[c].filename}})):[];l({files:t,isLoaded:!0})}))}),[z]),u.isLoaded?u.files.length===0?i.createElement("div",{"data-testid":"attachment__empty",className:r.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":h})},n):i.createElement(m,{files:u.files}):i.createElement(r.Spinner,null)},o=function(T){var z=T.store,K=i.useState(z.get("doc")),h=K[0],n=K[1],a=function(u){n(u)};return i.useEffect((function(){return z.subscribe("doc",a),function(){z.unsubscribe("doc",a)}}),[]),h?i.createElement(y,{doc:h}):i.createElement("div",{className:"rpv-attachment__loader"},i.createElement(r.Spinner,null))};return attachment_min.attachmentPlugin=function(){var T=i.useMemo((function(){return r.createStore({})}),[]);return{onDocumentLoad:function(z){T.update("doc",z.doc)},Attachments:function(){return i.createElement(o,{store:T})}}},attachment_min}var hasRequiredLib$g;function requireLib$g(){if(hasRequiredLib$g)return lib$f.exports;hasRequiredLib$g=1;return lib$f.exports=requireAttachment_min(),lib$f.exports}var lib$e={exports:{}},bookmark_min={},hasRequiredBookmark_min;function requireBookmark_min(){if(hasRequiredBookmark_min)return bookmark_min;hasRequiredBookmark_min=1;var r=requireLib$h();function d(u){var l=Object.create(null);return u&&Object.keys(u).forEach((function(e){if(e!=="default"){var t=Object.getOwnPropertyDescriptor(u,e);Object.defineProperty(l,e,t.get?t:{enumerable:!0,get:function(){return u[e]}})}})),l.default=u,Object.freeze(l)}var i,m=d(requireReact()),y=function(){return y=Object.assign||function(u){for(var l,e=1,t=arguments.length;e<t;e++)for(var c in l=arguments[e])Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c]);return u},y.apply(this,arguments)},o=function(){return m.createElement(r.Icon,{size:16},m.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},T=function(){return m.createElement(r.Icon,{size:16},m.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},z=function(u){var l=u.bookmark,e=u.depth,t=u.doc,c=u.index,s=u.isBookmarkExpanded,f=u.numberOfSiblings,x=u.pathFromRoot,E=u.renderBookmarkItem,g=u.store,A=x?"".concat(x,".").concat(c):"".concat(c),D=m.useMemo((function(){return(function(M){var F=M.count,I=M.items;if(F>=0)return!1;var q=I.length;if(q===0)return!1;for(var B=I.concat([]);B.length>0;){var v=B.shift(),C=v.items;v.count&&C&&v.count>0&&C.length>0&&(q+=C.length,B=B.concat(C))}return Math.abs(F)===q})(l)}),[l]),P=g.get("bookmarkExpandedMap"),R=s?s({bookmark:l,doc:t,depth:e,index:c}):P.has(A)?P.get(A):!D,j=m.useState(R),w=j[0],N=j[1],H=l.items&&l.items.length>0,X=function(){var M=!w;g.updateCurrentValue("bookmarkExpandedMap",(function(F){return F.set(A,M)})),N(M)},G=function(){var M=l.dest,F=g.get("jumpToDestination");r.getDestination(t,M).then((function(I){F&&F(y({label:l.title},I))}))},U=function(){H&&l.dest&&G()},k=function(){!H&&l.dest&&G()},_=function(M,F){return m.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*e,"rem")},onClick:M},F)},p=function(M,F){return H?m.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(e,"-").concat(c),onClick:X},w?M:F):m.createElement("span",{className:"rpv-bookmark__toggle"})},b=function(M){return l.url?m.createElement("a",{className:"rpv-bookmark__title",href:l.url,rel:"noopener noreferrer nofollow",target:l.newWindow?"_blank":""},l.title):m.createElement("div",{className:"rpv-bookmark__title","aria-label":l.title,onClick:M},l.title)};return m.createElement("li",{"aria-expanded":w?"true":"false","aria-label":l.title,"aria-level":e+1,"aria-posinset":c+1,"aria-setsize":f,role:"treeitem",tabIndex:-1},E?E({bookmark:l,depth:e,hasSubItems:H,index:c,isExpanded:w,path:A,defaultRenderItem:_,defaultRenderTitle:b,defaultRenderToggle:p,onClickItem:k,onClickTitle:U,onToggleSubItems:X}):_(k,m.createElement(m.Fragment,null,p(m.createElement(o,null),m.createElement(T,null)),b(U))),H&&w&&m.createElement(K,{bookmarks:l.items,depth:e+1,doc:t,isBookmarkExpanded:s,isRoot:!1,pathFromRoot:A,renderBookmarkItem:E,store:g}))},K=function(u){var l=u.bookmarks,e=u.depth,t=e===void 0?0:e,c=u.doc,s=u.isBookmarkExpanded,f=u.isRoot,x=u.pathFromRoot,E=u.renderBookmarkItem,g=u.store;return m.createElement("ul",{className:"rpv-bookmark__list",role:f?"tree":"group",tabIndex:-1},l.map((function(A,D){return m.createElement(z,{bookmark:A,depth:t,doc:c,index:D,isBookmarkExpanded:s,key:D,numberOfSiblings:l.length,pathFromRoot:x,renderBookmarkItem:E,store:g})})))};(function(u){u[u.Collapse=0]="Collapse",u[u.Expand=1]="Expand"})(i||(i={}));var h=function(u){var l=u.bookmarks,e=u.doc,t=u.isBookmarkExpanded,c=u.renderBookmarkItem,s=u.store,f=m.useRef(),x=function(D){var P=f.current;if(P&&D.target instanceof HTMLElement&&P.contains(D.target))switch(D.key){case"ArrowDown":D.preventDefault(),g((function(R,j){return R.indexOf(j)+1}));break;case"ArrowLeft":D.preventDefault(),A(i.Collapse);break;case"ArrowRight":D.preventDefault(),A(i.Expand);break;case"ArrowUp":D.preventDefault,g((function(R,j){return R.indexOf(j)-1}));break;case"End":D.preventDefault(),g((function(R,j){return R.length-1}));break;case" ":case"Enter":case"Space":D.preventDefault(),E();break;case"Home":D.preventDefault(),g((function(R,j){return 0}))}},E=function(){var D=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");D&&D.click()},g=function(D){var P=f.current,R=[].slice.call(P.getElementsByClassName("rpv-bookmark__item"));if(R.length!==0){var j=document.activeElement,w=R[Math.min(R.length-1,Math.max(0,D(R,j)))];j.setAttribute("tabindex","-1"),w.setAttribute("tabindex","0"),w.focus()}},A=function(D){var P=f.current;if([].slice.call(P.getElementsByClassName("rpv-bookmark__item")).length!==0){var R=document.activeElement.closest(".rpv-bookmark__item"),j=D===i.Collapse?"true":"false";if(R&&R.parentElement.getAttribute("aria-expanded")===j){var w=R.querySelector(".rpv-bookmark__toggle");w&&w.click()}}};return m.useEffect((function(){return document.addEventListener("keydown",x),function(){document.removeEventListener("keydown",x)}}),[]),m.useEffect((function(){var D=f.current;if(D){var P=[].slice.call(D.getElementsByClassName("rpv-bookmark__item"));P.length>0&&(P[0].focus(),P[0].setAttribute("tabindex","0"))}}),[]),m.createElement("div",{ref:f},m.createElement(K,{bookmarks:l,depth:0,doc:e,isBookmarkExpanded:t,isRoot:!0,pathFromRoot:"",renderBookmarkItem:c,store:s}))},n=function(u){var l=u.doc,e=u.isBookmarkExpanded,t=u.renderBookmarkItem,c=u.store,s=m.useContext(r.LocalizationContext).l10n,f=m.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,x=m.useState({isLoaded:!1,items:[]}),E=x[0],g=x[1];return m.useEffect((function(){g({isLoaded:!1,items:[]}),l.getOutline().then((function(A){g({isLoaded:!0,items:A||[]})}))}),[l]),E.isLoaded?E.items.length===0?m.createElement("div",{"data-testid":"bookmark__empty",className:r.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":f})},s&&s.bookmark?s.bookmark.noBookmark:"There is no bookmark"):m.createElement("div",{"data-testid":"bookmark__container",className:r.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":f})},m.createElement(h,{bookmarks:E.items,doc:l,isBookmarkExpanded:e,renderBookmarkItem:t,store:c})):m.createElement("div",{className:"rpv-bookmark__loader"},m.createElement(r.Spinner,null))},a=function(u){var l=u.isBookmarkExpanded,e=u.renderBookmarkItem,t=u.store,c=m.useState(t.get("doc")),s=c[0],f=c[1],x=function(E){f(E)};return m.useEffect((function(){return t.subscribe("doc",x),function(){t.unsubscribe("doc",x)}}),[]),s?m.createElement(n,{doc:s,isBookmarkExpanded:l,renderBookmarkItem:e,store:t}):m.createElement("div",{className:"rpv-bookmark__loader"},m.createElement(r.Spinner,null))};return bookmark_min.DownArrowIcon=o,bookmark_min.RightArrowIcon=T,bookmark_min.bookmarkPlugin=function(){var u=m.useMemo((function(){return r.createStore({bookmarkExpandedMap:new Map})}),[]);return{install:function(l){u.update("jumpToDestination",l.jumpToDestination)},onDocumentLoad:function(l){u.update("doc",l.doc)},Bookmarks:function(l){return m.createElement(a,{isBookmarkExpanded:l?.isBookmarkExpanded,renderBookmarkItem:l?.renderBookmarkItem,store:u})}}},bookmark_min}var hasRequiredLib$f;function requireLib$f(){if(hasRequiredLib$f)return lib$e.exports;hasRequiredLib$f=1;return lib$e.exports=requireBookmark_min(),lib$e.exports}var lib$d={exports:{}},thumbnail_min={},hasRequiredThumbnail_min;function requireThumbnail_min(){return hasRequiredThumbnail_min||(hasRequiredThumbnail_min=1,(function(r){var d=requireLib$h();function i(t){var c=Object.create(null);return t&&Object.keys(t).forEach((function(s){if(s!=="default"){var f=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(c,s,f.get?f:{enumerable:!0,get:function(){return t[s]}})}})),c.default=t,Object.freeze(c)}var m,y=i(requireReact());r.ThumbnailDirection=void 0,(m=r.ThumbnailDirection||(r.ThumbnailDirection={})).Horizontal="Horizontal",m.Vertical="Vertical";var o=function(){return o=Object.assign||function(t){for(var c,s=1,f=arguments.length;s<f;s++)for(var x in c=arguments[s])Object.prototype.hasOwnProperty.call(c,x)&&(t[x]=c[x]);return t},o.apply(this,arguments)},T=function(t){var c=t.doc,s=t.getPageIndex,f=t.renderSpinner,x=t.store,E=t.width,g=c.numPages,A=s?s({numPages:g}):0,D=Math.max(0,Math.min(A,g-1)),P=x.get("pagesRotation")||new Map,R=P.has(D)?P.get(D):0,j=y.useState(""),w=j[0],N=j[1],H=d.useIsMounted(),X=y.useRef(),G=y.useState(x.get("rotation")||0),U=G[0],k=G[1],_=y.useState(R),p=_[0],b=_[1],M=y.useState(!1),F=M[0],I=M[1],q=function(C){var L=C.has(D)?C.get(D):0;b(L)},B=function(C){k(C)},v=d.useIntersectionObserver({onVisibilityChanged:function(C){I(C.isVisible)}});return y.useEffect((function(){if(F){var C=v.current;C&&(N(""),d.getPage(c,D).then((function(L){var V=L.getViewport({scale:1}),W=(V.rotation+U+p)%360,Z=Math.abs(U+p)%180==0,$=Z?V.width:V.height,ce=Z?V.height:V.width,_e=document.createElement("canvas"),de=_e.getContext("2d",{alpha:!1}),he=C.clientWidth,fe=C.clientHeight,re=E?E/$:Math.min(he/$,fe/ce),le=re*$,Se=re*ce;_e.height=Se,_e.width=le,_e.style.opacity="0";var ve=L.getViewport({rotation:W,scale:re});X.current=L.render({canvasContext:de,viewport:ve}),X.current.promise.then((function(){H.current&&N(_e.toDataURL()),_e.width=0,_e.height=0}),(function(){}))})))}}),[p,F]),y.useEffect((function(){return x.subscribe("pagesRotation",q),x.subscribe("rotation",B),function(){x.unsubscribe("pagesRotation",q),x.unsubscribe("rotation",B)}}),[]),y.useEffect((function(){return function(){var C;(C=X.current)===null||C===void 0||C.cancel()}}),[]),y.createElement("div",{ref:v,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},w?y.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:w}):y.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},f?f():y.createElement(d.Spinner,null)))},z=function(t){var c=t.getPageIndex,s=t.renderSpinner,f=t.store,x=t.width,E=y.useState(f.get("doc")),g=E[0],A=E[1],D=function(P){A(P)};return y.useEffect((function(){return f.subscribe("doc",D),function(){f.unsubscribe("doc",D)}}),[]),y.createElement("div",{className:"rpv-thumbnail__cover"},g?y.createElement(T,{doc:g,getPageIndex:c,renderSpinner:s,store:f,width:x}):y.createElement("div",{className:"rpv-thumbnail__cover-loader"},s?s():y.createElement(d.Spinner,null)))},K=function(){return y.createElement(d.Spinner,null)},h=y.createContext({renderSpinner:K}),n=function(t){var c=t.children,s=t.doc,f=d.useIsMounted(),x=y.useState({loading:!0,labels:[]}),E=x[0],g=x[1];return y.useEffect((function(){s.getPageLabels().then((function(A){f.current&&g({loading:!1,labels:A||[]})}))}),[s.loadingTask.docId]),E.loading?y.createElement(y.Fragment,null):c(E.labels)},a=function(t){var c=t.page,s=t.pageHeight,f=t.pageIndex,x=t.pageWidth,E=t.rotation,g=t.thumbnailHeight,A=t.thumbnailWidth,D=t.onRenderCompleted,P=y.useContext(d.LocalizationContext).l10n,R=y.useRef(),j=y.useState(""),w=j[0],N=j[1],H=P&&P.thumbnail?P.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return y.useEffect((function(){var X=R.current;X&&X.cancel();var G=document.createElement("canvas"),U=G.getContext("2d",{alpha:!1}),k=A,_=k/(x/s),p=k/x;G.height=_,G.width=k,G.style.height="".concat(_,"px"),G.style.width="".concat(k,"px");var b=c.getViewport({rotation:E,scale:p});return R.current=c.render({canvasContext:U,viewport:b}),R.current.promise.then((function(){N(G.toDataURL()),D(f)}),(function(){D(f)})),function(){var M;(M=R.current)===null||M===void 0||M.cancel()}}),[E]),w?y.createElement("img",{"aria-label":H.replace("{{pageIndex}}","".concat(f+1)),src:w,height:"".concat(g,"px"),width:"".concat(A,"px")}):y.useContext(h).renderSpinner()},u=function(t){var c=t.doc,s=t.pageHeight,f=t.pageIndex,x=t.pageRotation,E=t.pageWidth,g=t.rotation,A=t.shouldRender,D=t.thumbnailWidth,P=t.onRenderCompleted,R=t.onVisibilityChanged,j=d.useIsMounted(),w=y.useState({height:s,page:null,viewportRotation:0,width:E}),N=w[0],H=w[1],X=N.page,G=N.height,U=N.width,k=U/G,_=Math.abs(g+x)%180==0,p=_?D:D/k,b=_?D/k:D;y.useEffect((function(){A&&d.getPage(c,f).then((function(I){var q=I.getViewport({scale:1});j.current&&H({height:q.height,page:I,viewportRotation:q.rotation,width:q.width})}))}),[A]);var M=(N.viewportRotation+g+x)%360,F=d.useIntersectionObserver({onVisibilityChanged:function(I){R(f,I)}});return y.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(f),ref:F,style:{height:"".concat(b,"px"),width:"".concat(p,"px")}},X?y.createElement(a,{page:X,pageHeight:_?G:U,pageIndex:f,pageWidth:_?U:G,rotation:M,thumbnailHeight:b,thumbnailWidth:p,onRenderCompleted:P}):y.useContext(h).renderSpinner())},l=function(t){var c=t.currentPage,s=t.doc,f=t.labels,x=t.pagesRotation,E=t.pageHeight,g=t.pageWidth,A=t.renderCurrentPageLabel,D=t.renderThumbnailItem,P=t.rotatedPage,R=t.rotation,j=t.thumbnailDirection,w=t.thumbnailWidth,N=t.viewMode,H=t.onJumpToPage,X=t.onRotatePage,G=s.numPages,U=s.loadingTask.docId,k=y.useRef(null),_=y.useRef([]),p=y.useState(c),b=p[0],M=p[1],F=y.useContext(d.ThemeContext).direction===d.TextDirection.RightToLeft,I=y.useState(-1),q=I[0],B=I[1],v=d.useIsMounted(),C=d.usePrevious(N),L=y.useRef(!1),V=d.useRenderQueue({doc:s}),W=y.useMemo((function(){return Array(G).fill(0).map((function(re,le){return le}))}),[U]),Z=y.useMemo((function(){switch(N){case d.ViewMode.DualPage:return d.chunk(W,2);case d.ViewMode.DualPageWithCover:return[[W[0]]].concat(d.chunk(W.slice(1),2));case d.ViewMode.SinglePage:default:return d.chunk(W,1)}}),[U,N]),$=function(){if(k.current){var re=_.current,le=b+1;le<re.length&&(b>=0&&re[b].setAttribute("tabindex","-1"),M(le))}},ce=function(){if(k.current){var re=_.current,le=b-1;le>=0&&(b>=0&&re[b].setAttribute("tabindex","-1"),M(le))}},_e=function(){b>=0&&b<G&&H(b)};d.useIsomorphicLayoutEffect((function(){var re=k.current;re&&(_.current=Array.from(re.querySelectorAll(".rpv-thumbnail__item")))}),[N]),y.useEffect((function(){var re=_.current;if(!(re.length===0||b<0||b>re.length)){var le=re[b];le.setAttribute("tabindex","0"),le.focus()}}),[b]),d.useIsomorphicLayoutEffect((function(){var re=k.current,le=_.current;if(!(!re||le.length===0||c<0||c>le.length)){var Se=le[c].closest(".rpv-thumbnail__items");Se&&(j===r.ThumbnailDirection.Vertical?(function(ve,be){var ke=ve.getBoundingClientRect().top-be.getBoundingClientRect().top,Le=ve.clientHeight,Ue=be.clientHeight;ke<0?be.scrollTop+=ke:ke+Le<=Ue||(be.scrollTop+=ke+Le-Ue)})(Se,re):(function(ve,be){var ke=ve.getBoundingClientRect().left-be.getBoundingClientRect().left,Le=ve.clientWidth,Ue=be.clientWidth;ke<0?be.scrollLeft+=ke:ke+Le<=Ue||(be.scrollLeft+=ke+Le-Ue)})(Se,re))}}),[c,j]);var de=y.useCallback((function(re){v.current&&(V.markRendered(re),L.current=!1,fe())}),[U]),he=y.useCallback((function(re,le){le.isVisible?V.setVisibility(re,le.ratio):V.setOutOfRange(re),fe()}),[U]),fe=y.useCallback((function(){if(!L.current){var re=V.getHighestPriorityPage();re>-1&&(V.markRendering(re),L.current=!0,B(re))}}),[U]);return y.useEffect((function(){P>=0&&(V.markRendering(P),L.current=!0,B(P))}),[U,P]),d.useIsomorphicLayoutEffect((function(){C!==N&&(V.markNotRendered(),fe())}),[N]),y.createElement("div",{ref:k,"data-testid":"thumbnail__list",className:d.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":j===r.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":F,"rpv-thumbnail__list--vertical":j===r.ThumbnailDirection.Vertical}),onKeyDown:function(re){switch(re.key){case"ArrowDown":$();break;case"ArrowUp":ce();break;case"Enter":_e()}}},Z.map((function(re,le){var Se=!1;switch(N){case d.ViewMode.DualPage:Se=c===2*le||c===2*le+1;break;case d.ViewMode.DualPageWithCover:Se=c===0&&le===0||le>0&&c===2*le-1||le>0&&c===2*le;break;case d.ViewMode.SinglePage:default:Se=c===le}return y.createElement("div",{className:d.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":N===d.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":N===d.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":N===d.ViewMode.SinglePage,"rpv-thumbnail__items--selected":Se}),key:"".concat(le,"___").concat(N)},re.map((function(ve){return(function(be){var ke=N===d.ViewMode.DualPageWithCover&&(be===0||G%2==0&&be===G-1),Le="".concat(s.loadingTask.docId,"___").concat(be),Ue=f.length===G?f[be]:"".concat(be+1),tt=A?A({currentPage:c,pageIndex:be,numPages:G,pageLabel:Ue}):Ue,Je=x.has(be)?x.get(be):0,gt=y.createElement(u,{doc:s,pageHeight:E,pageIndex:be,pageRotation:Je,pageWidth:g,rotation:R,shouldRender:q===be,thumbnailWidth:w,onRenderCompleted:de,onVisibilityChanged:he});return D?D({currentPage:c,key:Le,numPages:G,pageIndex:be,renderPageLabel:y.createElement(y.Fragment,null,tt),renderPageThumbnail:gt,onJumpToPage:function(){return H(be)},onRotatePage:function(rt){return X(be,rt)}}):y.createElement("div",{key:Le},y.createElement("div",{className:d.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":N===d.ViewMode.DualPage&&be%2==0,"rpv-thumbnail__item--dual-odd":N===d.ViewMode.DualPage&&be%2==1,"rpv-thumbnail__item--dual-cover":ke,"rpv-thumbnail__item--dual-cover-even":N===d.ViewMode.DualPageWithCover&&!ke&&be%2==0,"rpv-thumbnail__item--dual-cover-odd":N===d.ViewMode.DualPageWithCover&&!ke&&be%2==1,"rpv-thumbnail__item--single":N===d.ViewMode.SinglePage,"rpv-thumbnail__item--selected":c===be}),role:"button",tabIndex:c===be?0:-1,onClick:function(){return H(be)}},gt),y.createElement("div",{"data-testid":"thumbnail__label-".concat(be),className:"rpv-thumbnail__label"},tt))})(ve)})))})))},e=function(t){var c=t.renderCurrentPageLabel,s=t.renderThumbnailItem,f=t.store,x=t.thumbnailDirection,E=t.thumbnailWidth,g=y.useState(f.get("doc")),A=g[0],D=g[1],P=y.useState(f.get("currentPage")||0),R=P[0],j=P[1],w=y.useState(f.get("pageHeight")||0),N=w[0],H=w[1],X=y.useState(f.get("pageWidth")||0),G=X[0],U=X[1],k=y.useState(f.get("rotation")||0),_=k[0],p=k[1],b=y.useState(f.get("pagesRotation")||new Map),M=b[0],F=b[1],I=y.useState(f.get("rotatedPage")||-1),q=I[0],B=I[1],v=y.useState(f.get("viewMode")),C=v[0],L=v[1],V=function(le){j(le)},W=function(le){D(le)},Z=function(le){H(le)},$=function(le){U(le)},ce=function(le){p(le)},_e=function(le){F(le)},de=function(le){B(le)},he=function(le){L(le)},fe=function(le){var Se=f.get("jumpToPage");Se&&Se(le)},re=function(le,Se){f.get("rotatePage")(le,Se)};return y.useEffect((function(){return f.subscribe("doc",W),f.subscribe("pageHeight",Z),f.subscribe("pageWidth",$),f.subscribe("rotatedPage",de),f.subscribe("rotation",ce),f.subscribe("pagesRotation",_e),f.subscribe("viewMode",he),function(){f.unsubscribe("doc",W),f.unsubscribe("pageHeight",Z),f.unsubscribe("pageWidth",$),f.unsubscribe("rotatedPage",de),f.unsubscribe("rotation",ce),f.unsubscribe("pagesRotation",_e),f.unsubscribe("viewMode",he)}}),[]),d.useIsomorphicLayoutEffect((function(){return f.subscribe("currentPage",V),function(){f.unsubscribe("currentPage",V)}}),[]),A?y.createElement(d.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},y.createElement(n,{doc:A},(function(le){return y.createElement(l,{currentPage:R,doc:A,labels:le,pagesRotation:M,pageHeight:N,pageWidth:G,renderCurrentPageLabel:c,renderThumbnailItem:s,rotatedPage:q,rotation:_,thumbnailDirection:x,thumbnailWidth:E,viewMode:C,onJumpToPage:fe,onRotatePage:re})}))):y.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},y.useContext(h).renderSpinner())};r.thumbnailPlugin=function(t){var c=y.useMemo((function(){return d.createStore({rotatePage:function(){},viewMode:d.ViewMode.SinglePage})}),[]),s=y.useState(""),f=s[0],x=s[1];return{install:function(E){c.update("jumpToPage",E.jumpToPage),c.update("rotatePage",E.rotatePage)},onDocumentLoad:function(E){x(E.doc.loadingTask.docId),c.update("doc",E.doc)},onViewerStateChange:function(E){return c.update("currentPage",E.pageIndex),c.update("pagesRotation",E.pagesRotation),c.update("pageHeight",E.pageHeight),c.update("pageWidth",E.pageWidth),c.update("rotation",E.rotation),c.update("rotatedPage",E.rotatedPage),c.update("viewMode",E.viewMode),E},Cover:function(E){return y.createElement(z,o({},E,{renderSpinner:t?.renderSpinner,store:c}))},Thumbnails:y.useCallback((function(E){return y.createElement(h.Provider,{value:{renderSpinner:t?.renderSpinner||K}},y.createElement(e,{renderCurrentPageLabel:t?.renderCurrentPageLabel,renderThumbnailItem:E?.renderThumbnailItem,store:c,thumbnailDirection:E?.thumbnailDirection||r.ThumbnailDirection.Vertical,thumbnailWidth:t?.thumbnailWidth||100}))}),[f])}}})(thumbnail_min)),thumbnail_min}var hasRequiredLib$e;function requireLib$e(){if(hasRequiredLib$e)return lib$d.exports;hasRequiredLib$e=1;return lib$d.exports=requireThumbnail_min(),lib$d.exports}var lib$c={exports:{}},toolbar_min={},lib$b={exports:{}},selectionMode_min={},hasRequiredSelectionMode_min;function requireSelectionMode_min(){return hasRequiredSelectionMode_min||(hasRequiredSelectionMode_min=1,(function(r){var d=requireLib$h();function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(c){if(c!=="default"){var s=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(t,c,s.get?s:{enumerable:!0,get:function(){return e[c]}})}})),t.default=e,Object.freeze(t)}var m,y=i(requireReact()),o=function(){return y.createElement(d.Icon,{size:16},y.createElement("path",{d:`M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4
            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335
            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67
            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6`}))},T=function(){return T=Object.assign||function(e){for(var t,c=1,s=arguments.length;c<s;c++)for(var f in t=arguments[c])Object.prototype.hasOwnProperty.call(t,f)&&(e[f]=t[f]);return e},T.apply(this,arguments)};r.SelectionMode=void 0,(m=r.SelectionMode||(r.SelectionMode={})).Hand="Hand",m.Text="Text";var z=function(){return y.createElement(d.Icon,{size:16},y.createElement("path",{d:`M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906
            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262
            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0
            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z`}))},K=function(e){var t=e.children,c=e.mode,s=e.onClick,f=y.useContext(d.LocalizationContext).l10n,x="",E=y.createElement(z,null);switch(c){case r.SelectionMode.Hand:x=f&&f.selectionMode?f.selectionMode.handTool:"Hand tool",E=y.createElement(o,null);break;case r.SelectionMode.Text:default:x=f&&f.selectionMode?f.selectionMode.textSelectionTool:"Text selection tool",E=y.createElement(z,null)}return t({icon:E,label:x,onClick:s})},h={left:0,top:8},n=function(e){var t=e.isSelected,c=e.mode,s=e.onClick,f="";switch(c){case r.SelectionMode.Hand:f="selection-mode__hand-button";break;case r.SelectionMode.Text:default:f="selection-mode__text-button"}return y.createElement(K,{mode:c,onClick:s},(function(x){return y.createElement(d.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:d.Position.BottomCenter,target:y.createElement(d.MinimalButton,{ariaLabel:x.label,isSelected:t,testId:f,onClick:x.onClick},x.icon),content:function(){return x.label},offset:h})}))},a=function(e){var t=e.children,c=e.mode,s=e.store,f=c===s.get("selectionMode");return(t||function(x){return y.createElement(n,{isSelected:f,mode:x.mode,onClick:x.onClick})})({isSelected:f,mode:c,onClick:function(){return s.update("selectionMode",c)}})},u=function(e){var t=e.isSelected,c=e.mode,s=e.onClick,f="";switch(c){case r.SelectionMode.Hand:f="selection-mode__hand-menu";break;case r.SelectionMode.Text:default:f="selection-mode__text-menu"}return y.createElement(K,{mode:c,onClick:s},(function(x){return y.createElement(d.MenuItem,{checked:t,icon:x.icon,testId:f,onClick:x.onClick},x.label)}))},l=function(e){var t=e.store,c=y.useRef(null),s=y.useState(r.SelectionMode.Text),f=s[0],x=s[1],E=y.useRef({top:0,left:0,x:0,y:0}),g=function(j){var w=c.current;w&&(w.scrollTop=E.current.top-(j.clientY-E.current.y),w.scrollLeft=E.current.left-(j.clientX-E.current.x))},A=function(){var j=c.current;j&&(j.classList.add("rpv-selection-mode__grab"),j.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",A))},D=function(j){var w=c.current;w&&f!==r.SelectionMode.Text&&(w.classList.remove("rpv-selection-mode__grab"),w.classList.add("rpv-selection-mode__grabbing"),j.preventDefault(),j.stopPropagation(),E.current={left:w.scrollLeft,top:w.scrollTop,x:j.clientX,y:j.clientY},document.addEventListener("mousemove",g),document.addEventListener("mouseup",A))},P=function(j){c.current=j()},R=function(j){x(j)};return y.useEffect((function(){var j=c.current;if(j)return f===r.SelectionMode.Hand?j.classList.add("rpv-selection-mode__grab"):j.classList.remove("rpv-selection-mode__grab"),j.addEventListener("mousedown",D),function(){j.removeEventListener("mousedown",D)}}),[f]),y.useEffect((function(){return t.subscribe("getPagesContainer",P),t.subscribe("selectionMode",R),function(){t.unsubscribe("getPagesContainer",P),t.unsubscribe("selectionMode",R)}}),[]),y.createElement(y.Fragment,null)};r.HandToolIcon=o,r.TextSelectionIcon=z,r.selectionModePlugin=function(e){var t=y.useMemo((function(){return d.createStore()}),[]),c=function(s){return y.createElement(a,T({},s,{store:t}))};return{install:function(s){t.update("selectionMode",e&&e.selectionMode?e.selectionMode:r.SelectionMode.Text),t.update("getPagesContainer",s.getPagesContainer)},renderViewer:function(s){var f=s.slot;return f.subSlot&&f.subSlot.children&&(f.subSlot.children=y.createElement(y.Fragment,null,y.createElement(l,{store:t}),f.subSlot.children)),f},SwitchSelectionMode:c,SwitchSelectionModeButton:function(s){return y.createElement(c,{mode:s.mode},(function(f){return y.createElement(n,{isSelected:f.isSelected,mode:f.mode,onClick:function(){f.onClick()}})}))},SwitchSelectionModeMenuItem:function(s){return y.createElement(c,{mode:s.mode},(function(f){return y.createElement(u,{isSelected:f.isSelected,mode:f.mode,onClick:function(){f.onClick(),s.onClick()}})}))}}}})(selectionMode_min)),selectionMode_min}var hasRequiredLib$d;function requireLib$d(){if(hasRequiredLib$d)return lib$b.exports;hasRequiredLib$d=1;return lib$b.exports=requireSelectionMode_min(),lib$b.exports}var lib$a={exports:{}},fullScreen_min={},hasRequiredFullScreen_min;function requireFullScreen_min(){if(hasRequiredFullScreen_min)return fullScreen_min;hasRequiredFullScreen_min=1;var r=requireLib$h();function d(s){var f=Object.create(null);return s&&Object.keys(s).forEach((function(x){if(x!=="default"){var E=Object.getOwnPropertyDescriptor(s,x);Object.defineProperty(f,x,E.get?E:{enumerable:!0,get:function(){return s[x]}})}})),f.default=s,Object.freeze(f)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),i.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),i.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),i.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),i.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},y=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M0.5 12L23.5 12"}),i.createElement("path",{d:"M11.5 1L11.5 23"}),i.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),i.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),i.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),i.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},o=function(){return o=Object.assign||function(s){for(var f,x=1,E=arguments.length;x<E;x++)for(var g in f=arguments[x])Object.prototype.hasOwnProperty.call(f,g)&&(s[g]=f[g]);return s},o.apply(this,arguments)},T={left:0,top:8},z=function(s){var f=s.enableShortcuts,x=s.onClick,E=i.useContext(r.LocalizationContext).l10n,g=E&&E.fullScreen?E.fullScreen.enterFullScreen:"Full screen",A=f?r.isMac()?"Meta+Ctrl+F":"F11":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:A,ariaLabel:g,isDisabled:!r.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:x},i.createElement(y,null)),content:function(){return g},offset:T})},K={left:0,top:8},h=function(s){var f=s.onClick,x=i.useContext(r.LocalizationContext).l10n,E=x&&x.fullScreen?x.fullScreen.exitFullScreen:"Exit full screen";return i.createElement(r.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:E,testId:"full-screen__exit-button-with-tooltip",onClick:f},i.createElement(m,null)),content:function(){return E},offset:K})},n=function(s,f){var x=i.useState(f.get("fullScreenMode")),E=x[0],g=x[1],A=i.useCallback((function(D){g(D)}),[]);return i.useEffect((function(){return f.subscribe("fullScreenMode",A),function(){f.unsubscribe("fullScreenMode",A)}}),[]),{enterFullScreen:function(){var D=f.get("getPagesContainer");if(D){var P=s(D());f.get("enterFullScreenMode")(P)}},exitFullScreen:function(){f.get("exitFullScreenMode")()},isFullScreen:E===r.FullScreenMode.Entering||E===r.FullScreenMode.EnteredCompletely}},a=function(s){var f=s.children,x=s.enableShortcuts,E=s.getFullScreenTarget,g=s.store,A=n(E,g),D=A.enterFullScreen,P=A.exitFullScreen,R=A.isFullScreen;return(f||function(j){return R?i.createElement(h,{onClick:j.onClick}):i.createElement(z,{enableShortcuts:x,onClick:j.onClick})})({onClick:R?P:D})},u=function(s){var f=s.onClick,x=i.useContext(r.LocalizationContext).l10n,E=x&&x.fullScreen?x.fullScreen.enterFullScreen:"Full screen";return i.createElement(r.MenuItem,{icon:i.createElement(y,null),isDisabled:!r.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:f},E)},l=function(s){var f=s.onClick,x=i.useContext(r.LocalizationContext).l10n,E=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,g=x&&x.fullScreen?x.fullScreen.exitFullScreen:"Exit full screen";return i.createElement("div",{className:r.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!E,"rpv-full-screen__exit-button--rtl":E})},i.createElement(r.MinimalButton,{ariaLabel:g,testId:"full-screen__exit-button",onClick:f},i.createElement(m,null)))},e=function(s){var f=s.children,x=s.getFullScreenTarget,E=s.store,g=n(x,E),A=g.enterFullScreen,D=g.exitFullScreen,P=g.isFullScreen;return P&&(f||function(R){return i.createElement(l,{onClick:R.onClick})})({onClick:P?D:A})},t=function(s){var f=s.store,x=s.onEnterFullScreen,E=s.onExitFullScreen,g=i.useState(f.get("fullScreenMode")),A=g[0],D=g[1],P=i.useCallback((function(R){D(R)}),[]);return i.useEffect((function(){switch(A){case r.FullScreenMode.EnteredCompletely:x(f.get("zoom"));break;case r.FullScreenMode.Exited:E(f.get("zoom"))}}),[A]),i.useEffect((function(){return f.subscribe("fullScreenMode",P),function(){f.unsubscribe("fullScreenMode",P)}}),[]),(A===r.FullScreenMode.Entering||A===r.FullScreenMode.Entered)&&i.createElement("div",{className:"rpv-full-screen__overlay"},i.createElement(r.Spinner,null))},c=function(s){var f=s.containerRef,x=s.getFullScreenTarget,E=s.store,g=n(x,E).enterFullScreen,A=function(D){if(!D.shiftKey&&!D.altKey&&(r.isMac()?D.metaKey&&D.ctrlKey&&D.key==="f":D.key==="F11")){var P=f.current;P&&document.activeElement&&P.contains(document.activeElement)&&(D.preventDefault(),g())}};return i.useEffect((function(){if(f.current)return document.addEventListener("keydown",A),function(){document.removeEventListener("keydown",A)}}),[f.current]),i.createElement(i.Fragment,null)};return fullScreen_min.ExitFullScreenIcon=m,fullScreen_min.FullScreenIcon=y,fullScreen_min.fullScreenPlugin=function(s){var f=s?.getFullScreenTarget||function(D){return D},x=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},s)}),[]),E=i.useMemo((function(){return r.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:r.FullScreenMode.Normal,zoom:function(){}})}),[]),g=function(D){return i.createElement(a,o({},D,{enableShortcuts:x.enableShortcuts,getFullScreenTarget:f,store:E}))},A=function(){return i.createElement(e,{getFullScreenTarget:f,store:E},s?.renderExitFullScreenButton)};return{install:function(D){E.update("enterFullScreenMode",D.enterFullScreenMode),E.update("exitFullScreenMode",D.exitFullScreenMode),E.update("getPagesContainer",D.getPagesContainer),E.update("zoom",D.zoom)},onViewerStateChange:function(D){return E.update("fullScreenMode",D.fullScreenMode),D},renderViewer:function(D){var P=D.slot;return P.subSlot&&(P.subSlot.children=i.createElement(i.Fragment,null,x.enableShortcuts&&i.createElement(c,{containerRef:D.containerRef,getFullScreenTarget:f,store:E}),i.createElement(t,{store:E,onEnterFullScreen:x.onEnterFullScreen,onExitFullScreen:x.onExitFullScreen}),i.createElement(A,null),P.subSlot.children)),P},EnterFullScreen:g,EnterFullScreenButton:function(){return i.createElement(g,null,(function(D){return i.createElement(z,o({enableShortcuts:x.enableShortcuts},D))}))},EnterFullScreenMenuItem:function(D){return i.createElement(g,null,(function(P){return i.createElement(u,{onClick:function(){P.onClick(),D.onClick()}})}))}}},fullScreen_min}var hasRequiredLib$c;function requireLib$c(){if(hasRequiredLib$c)return lib$a.exports;hasRequiredLib$c=1;return lib$a.exports=requireFullScreen_min(),lib$a.exports}var lib$9={exports:{}},getFile_min={},hasRequiredGetFile_min;function requireGetFile_min(){if(hasRequiredGetFile_min)return getFile_min;hasRequiredGetFile_min=1;var r=requireLib$h();function d(u){var l=Object.create(null);return u&&Object.keys(u).forEach((function(e){if(e!=="default"){var t=Object.getOwnPropertyDescriptor(u,e);Object.defineProperty(l,e,t.get?t:{enumerable:!0,get:function(){return u[e]}})}})),l.default=u,Object.freeze(l)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),i.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},y=function(){return y=Object.assign||function(u){for(var l,e=1,t=arguments.length;e<t;e++)for(var c in l=arguments[e])Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c]);return u},y.apply(this,arguments)},o={left:0,top:8},T=function(u){var l=u.onClick,e=i.useContext(r.LocalizationContext).l10n,t=e&&e.download?e.download.download:"Download";return i.createElement(r.Tooltip,{ariaControlsSuffix:"get-file",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:t,testId:"get-file__download-button",onClick:l},i.createElement(m,null)),content:function(){return t},offset:o})},z=function(u,l){var e=document.createElement("a");e.style.display="none",e.href=u,e.setAttribute("download",l),document.body.appendChild(e),e.click(),document.body.removeChild(e)},K=function(u,l,e){var t=URL.createObjectURL(new Blob([u],{type:e}));z(t,l),t&&URL.revokeObjectURL(t)},h=function(u,l){u.getData().then((function(e){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?K(e,l,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?z("data:application/pdf;base64,".concat((function(t){return btoa(Array(t.length).fill("").map((function(c,s){return String.fromCharCode(t[s])})).join(""))})(e)),l):K(e,l,"application/pdf")}))},n=function(u){var l=u.children,e=u.fileNameGenerator,t=u.store,c=i.useState(t.get("file")),s=c[0],f=c[1],x=i.useState(t.get("doc")),E=x[0],g=x[1],A=function(P){g(P)},D=function(P){f(P)};return i.useEffect((function(){return t.subscribe("doc",A),t.subscribe("file",D),function(){t.subscribe("doc",A),t.unsubscribe("file",D)}}),[]),(l||function(P){return i.createElement(T,{onClick:P.onClick})})({onClick:function(){E&&s&&h(E,e(s))}})},a=function(u){var l=u.onClick,e=i.useContext(r.LocalizationContext).l10n,t=e&&e.download?e.download.download:"Download";return i.createElement(r.MenuItem,{icon:i.createElement(m,null),testId:"get-file__download-menu",onClick:l},t)};return getFile_min.DownloadIcon=m,getFile_min.getFilePlugin=function(u){var l=i.useMemo((function(){return r.createStore({})}),[]),e=function(c){return c.name?(s=c.name,(f=s.split("/").pop())?f.split("#")[0].split("?")[0]:s):"document.pdf";var s,f},t=function(c){return i.createElement(n,y({},c,{fileNameGenerator:u&&u.fileNameGenerator||e,store:l}))};return{onDocumentLoad:function(c){l.update("doc",c.doc),l.update("file",c.file)},Download:t,DownloadButton:function(){return i.createElement(t,null,(function(c){return i.createElement(T,y({},c))}))},DownloadMenuItem:function(c){return i.createElement(t,null,(function(s){return i.createElement(a,{onClick:function(){s.onClick(),c.onClick()}})}))}}},getFile_min}var hasRequiredLib$b;function requireLib$b(){if(hasRequiredLib$b)return lib$9.exports;hasRequiredLib$b=1;return lib$9.exports=requireGetFile_min(),lib$9.exports}var lib$8={exports:{}},open_min={},hasRequiredOpen_min;function requireOpen_min(){if(hasRequiredOpen_min)return open_min;hasRequiredOpen_min=1;var r=requireLib$h();function d(a){var u=Object.create(null);return a&&Object.keys(a).forEach((function(l){if(l!=="default"){var e=Object.getOwnPropertyDescriptor(a,l);Object.defineProperty(u,l,e.get?e:{enumerable:!0,get:function(){return a[l]}})}})),u.default=a,Object.freeze(u)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),i.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},y=function(){return y=Object.assign||function(a){for(var u,l=1,e=arguments.length;l<e;l++)for(var t in u=arguments[l])Object.prototype.hasOwnProperty.call(u,t)&&(a[t]=u[t]);return a},y.apply(this,arguments)},o=function(a){var u=i.useRef(),l=function(){var t=u.current;t&&(t.click(),a.get("triggerOpenFile")&&a.update("triggerOpenFile",!1))},e=function(t){t&&l()};return i.useEffect((function(){return a.subscribe("triggerOpenFile",e),function(){a.unsubscribe("triggerOpenFile",e)}}),[]),{inputRef:u,openFile:l}},T={left:0,top:8},z=function(a){var u=a.enableShortcuts,l=a.store,e=a.onClick,t=i.useContext(r.LocalizationContext).l10n,c=t&&t.open?t.open.openFile:"Open file",s=o(l),f=s.inputRef,x=s.openFile,E=u?r.isMac()?"Meta+O":"Ctrl+O":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"open",position:r.Position.BottomCenter,target:i.createElement("div",{className:"rpv-open__input-wrapper"},i.createElement("input",{accept:".pdf",ref:f,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:e}),i.createElement(r.MinimalButton,{ariaKeyShortcuts:E,ariaLabel:c,testId:"open__button",onClick:x},i.createElement(m,null))),content:function(){return c},offset:T})},K=function(a){var u=a.children,l=a.enableShortcuts,e=a.store;return(u||function(t){return i.createElement(z,{enableShortcuts:l,store:e,onClick:t.onClick})})({onClick:function(t){var c=t.target.files;if(c&&c.length){var s=e.get("openFile");s&&s(c[0])}}})},h=function(a){var u=a.store,l=a.onClick,e=i.useContext(r.LocalizationContext).l10n,t=e&&e.open?e.open.openFile:"Open file",c=o(u),s=c.inputRef,f=c.openFile;return i.createElement(r.MenuItem,{icon:i.createElement(m,null),testId:"open__menu",onClick:f},i.createElement("div",{className:"rpv-open__input-wrapper"},i.createElement("input",{accept:".pdf",ref:s,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:l}),t))},n=function(a){var u=a.containerRef,l=a.store,e=function(t){if(!t.shiftKey&&!t.altKey&&t.key==="o"&&(r.isMac()?t.metaKey:t.ctrlKey)){var c=u.current;c&&document.activeElement&&c.contains(document.activeElement)&&(t.preventDefault(),l.update("triggerOpenFile",!0))}};return i.useEffect((function(){if(u.current)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[u.current]),i.createElement(i.Fragment,null)};return open_min.OpenFileIcon=m,open_min.openPlugin=function(a){var u=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},a)}),[]),l=i.useMemo((function(){return r.createStore({})}),[]),e=function(t){return i.createElement(K,y({enableShortcuts:u.enableShortcuts},t,{store:l}))};return{install:function(t){l.update("openFile",t.openFile)},renderViewer:function(t){var c=t.slot,s={children:i.createElement(i.Fragment,null,u.enableShortcuts&&i.createElement(n,{containerRef:t.containerRef,store:l}),c.children)};return y(y({},c),s)},Open:e,OpenButton:function(){return i.createElement(e,null)},OpenMenuItem:function(){return i.createElement(e,null,(function(t){return i.createElement(h,{store:l,onClick:t.onClick})}))}}},open_min}var hasRequiredLib$a;function requireLib$a(){if(hasRequiredLib$a)return lib$8.exports;hasRequiredLib$a=1;return lib$8.exports=requireOpen_min(),lib$8.exports}var lib$7={exports:{}},pageNavigation_min={},hasRequiredPageNavigation_min;function requirePageNavigation_min(){if(hasRequiredPageNavigation_min)return pageNavigation_min;hasRequiredPageNavigation_min=1;var r=requireLib$h();function d(G){var U=Object.create(null);return G&&Object.keys(G).forEach((function(k){if(k!=="default"){var _=Object.getOwnPropertyDescriptor(G,k);Object.defineProperty(U,k,_.get?_:{enumerable:!0,get:function(){return G[k]}})}})),U.default=G,Object.freeze(U)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},y=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o=function(){return o=Object.assign||function(G){for(var U,k=1,_=arguments.length;k<_;k++)for(var p in U=arguments[k])Object.prototype.hasOwnProperty.call(U,p)&&(G[p]=U[p]);return G},o.apply(this,arguments)},T=function(G){var U=i.useState(G.get("currentPage")||0),k=U[0],_=U[1],p=function(b){_(b)};return r.useIsomorphicLayoutEffect((function(){return G.subscribe("currentPage",p),function(){G.unsubscribe("currentPage",p)}}),[]),{currentPage:k}},z=function(G){var U=i.useState(G.get("numberOfPages")||0),k=U[0],_=U[1],p=function(b){_(b)};return i.useEffect((function(){return G.subscribe("numberOfPages",p),function(){G.unsubscribe("numberOfPages",p)}}),[]),{numberOfPages:k}},K=function(G){var U=G.store,k=i.useContext(r.LocalizationContext).l10n,_=i.useState("1"),p=_[0],b=_[1],M=T(U).currentPage,F=z(U).numberOfPages;i.useEffect((function(){return b("".concat(M+1))}),[M]);var I=function(B){var v=U.get("jumpToPage");v&&v(B)},q=k&&k.pageNavigation?k.pageNavigation.enterPageNumber:"Enter a page number";return i.createElement("span",{className:"rpv-page-navigation__current-page-input"},i.createElement(r.TextBox,{ariaLabel:q,testId:"page-navigation__current-page-input",type:"text",value:p,onChange:b,onKeyDown:function(B){switch(B.key){case"ArrowUp":(L=M-1)>=0&&(b("".concat(L+1)),I(L));break;case"ArrowDown":(C=M+1)<F&&(b("".concat(C+1)),I(C));break;case"Enter":v=parseInt(p,10),p===""||v<1||v>F?b("".concat(M+1)):I(v-1)}var v,C,L}}))},h=function(G){var U=G.children,k=G.doc,_=r.useIsMounted(),p=i.useState({loading:!0,labels:[]}),b=p[0],M=p[1];return i.useEffect((function(){k.getPageLabels().then((function(F){_.current&&M({loading:!1,labels:F||[]})}))}),[k.loadingTask.docId]),b.loading?i.createElement(i.Fragment,null):U(b.labels)},n=function(G){var U=G.children,k=G.store,_=(function(F){var I=i.useState(F.get("doc")),q=I[0],B=I[1],v=function(C){B(C)};return i.useEffect((function(){return F.subscribe("doc",v),function(){F.unsubscribe("doc",v)}}),[]),q})(k),p=T(k).currentPage,b=z(k).numberOfPages,M=U||function(F){return i.createElement(i.Fragment,null,F.currentPage+1)};return _?i.createElement(h,{doc:_},(function(F){var I=F.length===b&&b>0?F[p]:"";return M({currentPage:p,numberOfPages:b,pageLabel:I})})):i.createElement(i.Fragment,null)},a=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},u={left:0,top:8},l=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToFirstPage:"First page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:p,isDisabled:U,testId:"page-navigation__first-button",onClick:k},i.createElement(a,null)),content:function(){return p},offset:u})},e=function(G){var U=G.children,k=G.store;return(U||function(_){return i.createElement(l,{isDisabled:_.isDisabled,onClick:_.onClick})})({isDisabled:T(k).currentPage===0,onClick:function(){var _=k.get("jumpToPage");_&&_(0)}})},t=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToFirstPage:"First page";return i.createElement(r.MenuItem,{icon:i.createElement(a,null),isDisabled:U,testId:"page-navigation__first-menu",onClick:k},p)},c={left:0,top:8},s=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToLastPage:"Last page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:p,isDisabled:U,testId:"page-navigation__last-button",onClick:k},i.createElement(m,null)),content:function(){return p},offset:c})},f=function(G){var U=G.children,k=G.store,_=T(k).currentPage,p=z(k).numberOfPages;return(U||function(b){return i.createElement(s,{isDisabled:b.isDisabled,onClick:b.onClick})})({isDisabled:_+1>=p,onClick:function(){var b=k.get("jumpToPage");b&&b(p-1)}})},x=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToLastPage:"Last page";return i.createElement(r.MenuItem,{icon:i.createElement(m,null),isDisabled:U,testId:"page-navigation__last-menu",onClick:k},p)},E={left:0,top:8},g=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToNextPage:"Next page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:p,isDisabled:U,testId:"page-navigation__next-button",onClick:k},i.createElement(y,null)),content:function(){return p},offset:E})},A=function(G){var U=G.children,k=G.store;return(U||function(_){return i.createElement(g,{onClick:_.onClick,isDisabled:_.isDisabled})})({isDisabled:T(k).currentPage+1>=z(k).numberOfPages,onClick:function(){var _=k.get("jumpToNextPage");_&&_()}})},D=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToNextPage:"Next page";return i.createElement(r.MenuItem,{icon:i.createElement(y,null),isDisabled:U,testId:"page-navigation__next-menu",onClick:k},p)},P=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},R={left:0,top:8},j=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToPreviousPage:"Previous page";return i.createElement(r.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:p,isDisabled:U,testId:"page-navigation__previous-button",onClick:k},i.createElement(P,null)),content:function(){return p},offset:R})},w=function(G){var U=G.store;return(G.children||function(k){return i.createElement(j,{isDisabled:k.isDisabled,onClick:k.onClick})})({isDisabled:T(U).currentPage<=0,onClick:function(){var k=U.get("jumpToPreviousPage");k&&k()}})},N=function(G){var U=G.isDisabled,k=G.onClick,_=i.useContext(r.LocalizationContext).l10n,p=_&&_.pageNavigation?_.pageNavigation.goToPreviousPage:"Previous page";return i.createElement(r.MenuItem,{icon:i.createElement(P,null),isDisabled:U,testId:"page-navigation__previous-menu",onClick:k},p)},H=function(G){var U=G.children,k=G.store,_=z(k).numberOfPages;return U?U({numberOfPages:_}):i.createElement(i.Fragment,null,_)},X=function(G){var U=G.containerRef,k=G.numPages,_=G.store,p=T(_).currentPage,b=i.useRef(p);b.current=p;var M=i.useRef(!1),F=function(){M.current=!0},I=function(){M.current=!1},q=function(B){var v=U.current,C=M.current||document.activeElement&&v.contains(document.activeElement);if(v&&C){var L,V,W=B.altKey&&B.key==="ArrowDown"||!B.shiftKey&&!B.altKey&&B.key==="PageDown",Z=B.altKey&&B.key==="ArrowUp"||!B.shiftKey&&!B.altKey&&B.key==="PageUp";if(W)return B.preventDefault(),L=_.get("jumpToPage"),V=b.current+1,void(L&&V<k&&L(V));if(Z)return B.preventDefault(),void(function(){var $=_.get("jumpToPage"),ce=b.current-1;$&&ce>=0&&$(ce)})();if(r.isMac()?B.metaKey&&!B.ctrlKey:B.altKey)switch(B.key){case"ArrowLeft":B.preventDefault(),(function(){var $=_.get("jumpToPreviousDestination");$&&$()})();break;case"ArrowRight":B.preventDefault(),(function(){var $=_.get("jumpToNextDestination");$&&$()})()}}};return i.useEffect((function(){var B=U.current;if(B)return document.addEventListener("keydown",q),B.addEventListener("mouseenter",F),B.addEventListener("mouseleave",I),function(){document.removeEventListener("keydown",q),B.removeEventListener("mouseenter",F),B.removeEventListener("mouseleave",I)}}),[U.current]),i.createElement(i.Fragment,null)};return pageNavigation_min.DownArrowIcon=m,pageNavigation_min.NextIcon=y,pageNavigation_min.PreviousIcon=P,pageNavigation_min.UpArrowIcon=a,pageNavigation_min.pageNavigationPlugin=function(G){var U=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},G)}),[]),k=i.useMemo((function(){return r.createStore()}),[]),_=function(F){return i.createElement(e,o({},F,{store:k}))},p=function(F){return i.createElement(f,o({},F,{store:k}))},b=function(F){return i.createElement(A,o({},F,{store:k}))},M=function(F){return i.createElement(w,o({},F,{store:k}))};return{install:function(F){k.update("jumpToDestination",F.jumpToDestination),k.update("jumpToNextDestination",F.jumpToNextDestination),k.update("jumpToNextPage",F.jumpToNextPage),k.update("jumpToPage",F.jumpToPage),k.update("jumpToPreviousDestination",F.jumpToPreviousDestination),k.update("jumpToPreviousPage",F.jumpToPreviousPage)},renderViewer:function(F){var I=F.slot;if(!U.enableShortcuts)return I;var q={children:i.createElement(i.Fragment,null,i.createElement(X,{containerRef:F.containerRef,numPages:F.doc.numPages,store:k}),I.children)};return o(o({},I),q)},onDocumentLoad:function(F){k.update("doc",F.doc),k.update("numberOfPages",F.doc.numPages)},onViewerStateChange:function(F){return k.update("currentPage",F.pageIndex),F},jumpToNextPage:function(){var F=k.get("jumpToNextPage");F&&F()},jumpToPage:function(F){var I=k.get("jumpToPage");I&&I(F)},jumpToPreviousPage:function(){var F=k.get("jumpToPreviousPage");F&&F()},CurrentPageInput:function(){return i.createElement(K,{store:k})},CurrentPageLabel:function(F){return i.createElement(n,o({},F,{store:k}))},GoToFirstPage:_,GoToFirstPageButton:function(){return i.createElement(_,null,(function(F){return i.createElement(l,o({},F))}))},GoToFirstPageMenuItem:function(F){return i.createElement(_,null,(function(I){return i.createElement(t,{isDisabled:I.isDisabled,onClick:function(){I.onClick(),F.onClick()}})}))},GoToLastPage:p,GoToLastPageButton:function(){return i.createElement(p,null,(function(F){return i.createElement(s,o({},F))}))},GoToLastPageMenuItem:function(F){return i.createElement(p,null,(function(I){return i.createElement(x,{isDisabled:I.isDisabled,onClick:function(){I.onClick(),F.onClick()}})}))},GoToNextPage:b,GoToNextPageButton:function(){return i.createElement(b,null,(function(F){return i.createElement(g,o({},F))}))},GoToNextPageMenuItem:function(F){return i.createElement(b,null,(function(I){return i.createElement(D,{isDisabled:I.isDisabled,onClick:function(){I.onClick(),F.onClick()}})}))},GoToPreviousPage:M,GoToPreviousPageButton:function(){return i.createElement(M,null,(function(F){return i.createElement(j,o({},F))}))},GoToPreviousPageMenuItem:function(F){return i.createElement(M,null,(function(I){return i.createElement(N,{isDisabled:I.isDisabled,onClick:function(){I.onClick(),F.onClick()}})}))},NumberOfPages:function(F){return i.createElement(H,o({},F,{store:k}))}}},pageNavigation_min}var hasRequiredLib$9;function requireLib$9(){if(hasRequiredLib$9)return lib$7.exports;hasRequiredLib$9=1;return lib$7.exports=requirePageNavigation_min(),lib$7.exports}var lib$6={exports:{}},print_min={},hasRequiredPrint_min;function requirePrint_min(){if(hasRequiredPrint_min)return print_min;hasRequiredPrint_min=1;var r={},d=requireLib$h(),i=requireReact(),m=requireReactDom();function y(E){var g=Object.create(null);return E&&Object.keys(E).forEach((function(A){if(A!=="default"){var D=Object.getOwnPropertyDescriptor(E,A);Object.defineProperty(g,A,D.get?D:{enumerable:!0,get:function(){return E[A]}})}})),g.default=E,Object.freeze(g)}var o,T=y(i),z=function(){return T.createElement(d.Icon,{size:16},T.createElement("path",{d:`M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19
            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3
            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414
            C18.395,3.394,18.5,3.649,18.5,3.914V4.5
            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z
            M3.5,8.499
            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z
            M14.5,0.499v4h4`}))},K=function(){return K=Object.assign||function(E){for(var g,A=1,D=arguments.length;A<D;A++)for(var P in g=arguments[A])Object.prototype.hasOwnProperty.call(g,P)&&(E[P]=g[P]);return E},K.apply(this,arguments)},h={left:0,top:8},n=function(E){var g=E.enableShortcuts,A=E.onClick,D=T.useContext(d.LocalizationContext).l10n,P=D&&D.print?D.print.print:"Print",R=g?d.isMac()?"Meta+P":"Ctrl+P":"";return T.createElement(d.Tooltip,{ariaControlsSuffix:"print",position:d.Position.BottomCenter,target:T.createElement(d.MinimalButton,{ariaKeyShortcuts:R,ariaLabel:P,testId:"print__button",onClick:A},T.createElement(z,null)),content:function(){return P},offset:h})};(function(E){E.CheckingPermission="CheckingPermission",E.Inactive="Inactive",E.Preparing="Preparing",E.Cancelled="Cancelled",E.Ready="Ready"})(o||(o={}));var a=function(E){var g=E.children,A=E.enableShortcuts,D=E.store;return(g||n)({enableShortcuts:A,onClick:function(){D.update("printStatus",o.CheckingPermission)}})},u=function(E){var g=E.doc,A=E.store,D=T.useContext(d.LocalizationContext).l10n,P=T.useState(!0),R=P[0],j=P[1];return T.useEffect((function(){g.getPermissions().then((function(w){w===null||w.includes(4)||w.includes(2048)?A.update("printStatus",o.Preparing):j(!1)}))}),[]),R?T.createElement(T.Fragment,null):T.createElement(d.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(w){return T.createElement(T.Fragment,null,T.createElement("div",{className:"rpv-print__permission-body"},D&&D.print?D.print.disallowPrint:"The document does not allow to print"),T.createElement("div",{className:"rpv-print__permission-footer"},T.createElement(d.Button,{onClick:function(){w(),A.update("printStatus",o.Cancelled)}},D&&D.print?D.print.close:"Close")))},isOpened:!0})},l=function(E){var g=E.numLoadedPages,A=E.numPages,D=E.onCancel,P=T.useContext(d.LocalizationContext).l10n,R=T.useContext(d.ThemeContext).direction===d.TextDirection.RightToLeft,j=Math.floor(100*g/A);return T.createElement("div",{className:"rpv-print__progress"},T.createElement("div",{className:d.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":R})},T.createElement("div",{className:"rpv-print__progress-message"},P&&P.print?P.print.preparingDocument:"Preparing document ..."),T.createElement("div",{className:"rpv-print__progress-bar"},T.createElement(d.ProgressBar,{progress:j})),T.createElement(d.Button,{onClick:D},P&&P.print?P.print.cancel:"Cancel")))},e=function(E){var g=E.canvas,A=E.page,D=E.pageHeight,P=E.pageIndex,R=E.pageWidth,j=E.rotation,w=E.onLoad,N=d.useIsMounted(),H=T.useRef(),X=T.useState(""),G=X[0],U=X[1],k=T.useMemo((function(){return typeof process<"u"&&r.JEST_WORKER_ID!==void 0}),[]);return T.useEffect((function(){var _=H.current;_&&_.cancel();var p=150/72;g.height=Math.floor(D*p),g.width=Math.floor(R*p);var b=g.getContext("2d");b.save(),b.fillStyle="rgb(255, 255, 255)",b.fillRect(0,0,g.width,g.height),b.restore();var M=A.getViewport({rotation:j,scale:1});H.current=A.render({canvasContext:b,intent:"print",transform:[p,0,0,p,0,0],viewport:M}),H.current.promise.then((function(){"toBlob"in g&&"createObjectURL"in URL?g.toBlob((function(F){N.current&&U(URL.createObjectURL(F)),k&&w()})):(N.current&&U(g.toDataURL()),k&&w())}),(function(){}))}),[]),G&&T.createElement("div",{className:"rpv-print__page"},T.createElement("img",{"data-testid":"print__thumbnail-".concat(P),src:G,onLoad:function(){k||w()}}))},t=function(E){var g=E.canvas,A=E.doc,D=E.pageIndex,P=E.pageRotation,R=E.pageSize,j=E.rotation,w=E.shouldRender,N=E.onLoad,H=d.useIsMounted(),X=T.useState(null),G=X[0],U=X[1],k=Math.abs(j+P)%180==0;T.useEffect((function(){w&&d.getPage(A,D).then((function(p){H.current&&U(p)}))}),[w]);var _=(R.rotation+j+P)%360;return G&&T.createElement(e,{canvas:g,page:G,pageHeight:k?R.pageHeight:R.pageWidth,pageIndex:D,pageWidth:k?R.pageWidth:R.pageHeight,rotation:_,onLoad:N})},c=function(E){var g=E.doc,A=E.numLoadedPages,D=E.pagesRotation,P=E.pageSizes,R=E.printPages,j=E.printStatus,w=E.rotation,N=E.onCancel,H=E.onLoad,X=T.useMemo((function(){return document.createElement("canvas")}),[]),G=T.useMemo((function(){var _=document.querySelector(".rpv-print__zone");if(_)return _;var p=document.createElement("div");return p.classList.add("rpv-print__zone"),p.setAttribute("data-testid","print__zone"),document.body.appendChild(p),p}),[]);T.useEffect((function(){j===o.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var _=function(){if(j===o.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var p=document.querySelectorAll(".rpv-print__zone");p&&p.forEach((function(b){b.parentElement.removeChild(b)})),X.height=0,X.width=0,document.removeEventListener("mousemove",_),N()}};return document.addEventListener("mousemove",_),function(){return document.removeEventListener("mousemove",_)}}),[j]);var U=P[0].pageHeight,k=P[0].pageWidth;return m.createPortal(T.createElement(T.Fragment,null,R.map((function(_,p){return T.createElement(t,{key:_,canvas:X,doc:g,pageIndex:_,pageRotation:D.has(_)?D.get(_):0,pageSize:P[_],rotation:w,shouldRender:p===A,onLoad:H})})),T.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(k,"pt ").concat(U,"pt }")}})),G)},s=function(E){var g=E.doc,A=E.pagesRotation,D=E.pageSizes,P=E.renderProgressBar,R=E.rotation,j=E.setPages,w=E.store,N=T.useState(o.Inactive),H=N[0],X=N[1],G=T.useState(0),U=G[0],k=G[1],_=T.useMemo((function(){var F=g.numPages;return j(g).filter((function(I){return I>=0&&I<F}))}),[g,j]),p=_.length,b=function(){k(0),X(o.Inactive)},M=function(F){return X(F)};return T.useEffect((function(){return w.subscribe("printStatus",M),function(){w.unsubscribe("printStatus",M)}}),[]),T.createElement(T.Fragment,null,H===o.CheckingPermission&&T.createElement(u,{doc:g,store:w}),H===o.Preparing&&(P?P(U,p,b):T.createElement(l,{numLoadedPages:U,numPages:p,onCancel:b})),(H===o.Preparing||H===o.Ready)&&U<=p&&T.createElement(c,{doc:g,numLoadedPages:U,pagesRotation:A,pageSizes:D,printPages:_,printStatus:H,rotation:R,onCancel:b,onLoad:function(){var F=U+1;F<=p&&(k(F),F===p&&X(o.Ready))}}))},f=function(E){var g=E.onClick,A=T.useContext(d.LocalizationContext).l10n,D=A&&A.print?A.print.print:"Print";return T.createElement(d.MenuItem,{icon:T.createElement(z,null),testId:"print__menu",onClick:g},D)},x=function(E){var g=E.containerRef,A=E.store,D=function(P){if(!P.shiftKey&&!P.altKey&&P.key==="p"&&(d.isMac()?P.metaKey:P.ctrlKey)){var R=g.current;R&&document.activeElement&&R.contains(document.activeElement)&&(P.preventDefault(),A.update("printStatus",o.Preparing))}};return T.useEffect((function(){if(g.current)return document.addEventListener("keydown",D),function(){document.removeEventListener("keydown",D)}}),[g.current]),T.createElement(T.Fragment,null)};return print_min.PrintIcon=z,print_min.getAllPagesNumbers=function(E){return Array(E.numPages).fill(0).map((function(g,A){return A}))},print_min.getCustomPagesNumbers=function(E){return function(g){var A,D=[];return E.replace(/\s+/g,"").split(",").forEach((function(P){var R,j,w=P.split("-").map((function(N){return parseInt(N,10)})).filter((function(N){return Number.isInteger(N)}));w.length===1?D.push(w[0]-1):w.length===2&&D.push.apply(D,(R=w[0]-1,j=w[1]-1,Array(j-R+1).fill(0).map((function(N,H){return R+H}))))})),(A=D,A.filter((function(P){return A.indexOf(P)===A.lastIndexOf(P)}))).filter((function(P){return P>=0&&P<g.numPages}))}},print_min.getEvenPagesNumbers=function(E){return Array(E.numPages).fill(0).map((function(g,A){return A})).filter((function(g){return(g+1)%2==0}))},print_min.getOddPagesNumbers=function(E){return Array(E.numPages).fill(0).map((function(g,A){return A})).filter((function(g){return(g+1)%2==1}))},print_min.printPlugin=function(E){var g=T.useMemo((function(){return Object.assign({},{enableShortcuts:!0,setPages:function(P){return Array(P.numPages).fill(0).map((function(R,j){return j}))}},E)}),[]),A=T.useMemo((function(){return d.createStore({printStatus:o.Inactive})}),[]),D=function(P){return T.createElement(a,K({enableShortcuts:g.enableShortcuts},P,{store:A}))};return{print:function(){A.update("printStatus",o.CheckingPermission)},renderViewer:function(P){var R=P.slot,j={children:T.createElement(T.Fragment,null,g.enableShortcuts&&T.createElement(x,{containerRef:P.containerRef,store:A}),T.createElement(s,{doc:P.doc,pagesRotation:P.pagesRotation,pageSizes:P.pageSizes,renderProgressBar:E?.renderProgressBar,rotation:P.rotation,setPages:g.setPages,store:A}),R.children)};return K(K({},R),j)},Print:D,PrintButton:function(){return T.createElement(D,null,(function(P){return T.createElement(n,K({},P))}))},PrintMenuItem:function(P){return T.createElement(D,null,(function(R){return T.createElement(f,{onClick:function(){R.onClick(),P.onClick()}})}))},setPages:function(P){g.setPages=P}}},print_min}var hasRequiredLib$8;function requireLib$8(){if(hasRequiredLib$8)return lib$6.exports;hasRequiredLib$8=1;return lib$6.exports=requirePrint_min(),lib$6.exports}var lib$5={exports:{}},properties_min={},hasRequiredProperties_min;function requireProperties_min(){if(hasRequiredProperties_min)return properties_min;hasRequiredProperties_min=1;var r=requireLib$h();function d(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(c){if(c!=="default"){var s=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(t,c,s.get?s:{enumerable:!0,get:function(){return e[c]}})}})),t.default=e,Object.freeze(t)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z
            M14.5,17.005H13
            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10
            M11.745,6.504L11.745,6.504
            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25
            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5`}))},y=function(){return y=Object.assign||function(e){for(var t,c=1,s=arguments.length;c<s;c++)for(var f in t=arguments[c])Object.prototype.hasOwnProperty.call(t,f)&&(e[f]=t[f]);return e},y.apply(this,arguments)},o=function(e){var t=e.doc,c=e.render,s=i.useState(),f=s[0],x=s[1];return i.useEffect((function(){t.getMetadata().then((function(E){return Promise.resolve(E)})).then((function(E){return t.getDownloadInfo().then((function(g){return Promise.resolve({fileName:E.contentDispositionFilename||"",info:E.info,length:g.length})}))})).then((function(E){x(E)}))}),[]),f?c(f):i.createElement("div",{className:"rpv-properties__loader"},i.createElement(r.Spinner,null))},T=function(e){var t=e.label,c=e.value,s=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft;return i.createElement("dl",{className:r.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":s})},i.createElement("dt",{className:"rpv-properties__item-label"},t,":"),i.createElement("dd",{className:"rpv-properties__item-value"},c||"-"))},z=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),K=function(e,t,c,s){var f=parseInt(e,10);return f>=t&&f<=c?f:s},h=function(e){var t=e.doc,c=e.fileName,s=e.onToggle,f=i.useContext(r.LocalizationContext).l10n,x=function(E){var g=(function(A){var D=z.exec(A);if(!D)return null;var P=parseInt(D[1],10),R=K(D[2],1,12,1)-1,j=K(D[3],1,31,1),w=K(D[4],0,23,0),N=K(D[5],0,59,0),H=K(D[6],0,59,0),X=D[7]||"Z",G=K(D[8],0,23,0),U=K(D[9],0,59,0);switch(X){case"-":w+=G,N+=U;break;case"+":w-=G,N-=U}return new Date(Date.UTC(P,R,j,w,N,H))})(E);return g?"".concat(g.toLocaleDateString(),", ").concat(g.toLocaleTimeString()):""};return i.createElement("div",{className:"rpv-properties__modal"},i.createElement(o,{doc:t,render:function(E){return i.createElement(i.Fragment,null,i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(T,{label:f&&f.properties?f.properties.fileName:"File name",value:E.fileName||(D=c,P=D.split("/").pop(),P?P.split("#")[0].split("?")[0]:D)}),i.createElement(T,{label:f&&f.properties?f.properties.fileSize:"File size",value:(g=E.length,A=Math.floor(Math.log(g)/Math.log(1024)),"".concat((g/Math.pow(1024,A)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][A]))})),i.createElement(r.Separator,null),i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(T,{label:f&&f.properties?f.properties.title:"Title",value:E.info.Title}),i.createElement(T,{label:f&&f.properties?f.properties.author:"Author",value:E.info.Author}),i.createElement(T,{label:f&&f.properties?f.properties.subject:"Subject",value:E.info.Subject}),i.createElement(T,{label:f&&f.properties?f.properties.keywords:"Keywords",value:E.info.Keywords}),i.createElement(T,{label:f&&f.properties?f.properties.creator:"Creator",value:E.info.Creator}),i.createElement(T,{label:f&&f.properties?f.properties.creationDate:"Creation date",value:x(E.info.CreationDate)}),i.createElement(T,{label:f&&f.properties?f.properties.modificationDate:"Modification date",value:x(E.info.ModDate)})),i.createElement(r.Separator,null),i.createElement("div",{className:"rpv-properties__modal-section"},i.createElement(T,{label:f&&f.properties?f.properties.pdfProducer:"PDF producer",value:E.info.Producer}),i.createElement(T,{label:f&&f.properties?f.properties.pdfVersion:"PDF version",value:E.info.PDFFormatVersion}),i.createElement(T,{label:f&&f.properties?f.properties.pageCount:"Page count",value:"".concat(t.numPages)})));var g,A,D,P}}),i.createElement("div",{className:"rpv-properties__modal-footer"},i.createElement(r.Button,{onClick:s},f&&f.properties?f.properties.close:"Close")))},n={left:0,top:8},a=function(e){var t=e.onClick,c=i.useContext(r.LocalizationContext).l10n,s=c&&c.properties?c.properties.showProperties:"Show properties";return i.createElement(r.Tooltip,{ariaControlsSuffix:"properties",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:s,testId:"properties__button",onClick:t},i.createElement(m,null)),content:function(){return s},offset:n})},u=function(e){var t=e.children,c=e.store,s=(function(E){var g=i.useState(E.get("doc")),A=g[0],D=g[1],P=function(R){D(R)};return i.useEffect((function(){return E.subscribe("doc",P),function(){E.unsubscribe("doc",P)}}),[]),{currentDoc:A}})(c).currentDoc,f=c.get("fileName")||"",x=t||function(E){return i.createElement(a,y({},E))};return s?i.createElement(r.Modal,{ariaControlsSuffix:"properties",target:function(E){return x({onClick:E})},content:function(E){return i.createElement(h,{doc:s,fileName:f,onToggle:E})},closeOnClickOutside:!0,closeOnEscape:!0}):i.createElement(i.Fragment,null)},l=function(e){var t=e.onClick,c=i.useContext(r.LocalizationContext).l10n,s=c&&c.properties?c.properties.showProperties:"Show properties";return i.createElement(r.MenuItem,{icon:i.createElement(m,null),testId:"properties__menu",onClick:t},s)};return properties_min.InfoIcon=m,properties_min.propertiesPlugin=function(){var e=i.useMemo((function(){return r.createStore({fileName:""})}),[]),t=function(c){return i.createElement(u,y({},c,{store:e}))};return{onDocumentLoad:function(c){e.update("doc",c.doc)},onViewerStateChange:function(c){return e.update("fileName",c.file.name),c},ShowProperties:t,ShowPropertiesButton:function(){return i.createElement(u,{store:e})},ShowPropertiesMenuItem:function(c){return i.createElement(t,null,(function(s){return i.createElement(l,y({},s))}))}}},properties_min}var hasRequiredLib$7;function requireLib$7(){if(hasRequiredLib$7)return lib$5.exports;hasRequiredLib$7=1;return lib$5.exports=requireProperties_min(),lib$5.exports}var lib$4={exports:{}},rotate_min={},hasRequiredRotate_min;function requireRotate_min(){if(hasRequiredRotate_min)return rotate_min;hasRequiredRotate_min=1;var r=requireLib$h();function d(a){var u=Object.create(null);return a&&Object.keys(a).forEach((function(l){if(l!=="default"){var e=Object.getOwnPropertyDescriptor(a,l);Object.defineProperty(u,l,e.get?e:{enumerable:!0,get:function(){return a[l]}})}})),u.default=a,Object.freeze(u)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:`M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274
            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863
            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711
            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2
            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431
            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945
            M13.5,1.75L10,4.25l3.5,2.5`}))},y=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:`M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274
            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863
            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713
            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2
            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431
            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945
            M10.5,1.75l3.5,2.5l-3.5,2.5`}))},o=function(){return o=Object.assign||function(a){for(var u,l=1,e=arguments.length;l<e;l++)for(var t in u=arguments[l])Object.prototype.hasOwnProperty.call(u,t)&&(a[t]=u[t]);return a},o.apply(this,arguments)},T={left:0,top:8},z=function(a){var u=a.direction,l=a.onClick,e=i.useContext(r.LocalizationContext).l10n,t=e&&e.rotate?e.rotate.rotateBackward:"Rotate counterclockwise",c=e&&e.rotate?e.rotate.rotateForward:"Rotate clockwise",s=u===r.RotateDirection.Backward?t:c,f=u===r.RotateDirection.Backward?i.createElement(m,null):i.createElement(y,null);return i.createElement(r.Tooltip,{ariaControlsSuffix:"rotate",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:s,testId:u===r.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:l},f),content:function(){return s},offset:T})},K=function(a){var u=a.children,l=a.direction,e=a.store;return(u||function(t){return i.createElement(z,{direction:t.direction,onClick:t.onClick})})({direction:l,onClick:function(){var t=e.get("rotate");t&&t(l)}})},h=function(a){var u=a.direction,l=a.onClick,e=i.useContext(r.LocalizationContext).l10n,t=e&&e.rotate?e.rotate.rotateBackward:"Rotate counterclockwise",c=e&&e.rotate?e.rotate.rotateForward:"Rotate clockwise",s=u===r.RotateDirection.Backward?t:c,f=u===r.RotateDirection.Backward?i.createElement(m,null):i.createElement(y,null);return i.createElement(r.MenuItem,{icon:f,testId:u===r.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:l},s)},n=function(a){var u=a.children,l=a.store;return u({onRotatePage:function(e,t){var c=l.get("rotatePage");c&&c(e,t)}})};return rotate_min.RotateBackwardIcon=m,rotate_min.RotateForwardIcon=y,rotate_min.rotatePlugin=function(){var a=i.useMemo((function(){return r.createStore()}),[]),u=function(l){return i.createElement(K,o({},l,{store:a}))};return{install:function(l){a.update("rotate",l.rotate),a.update("rotatePage",l.rotatePage)},Rotate:u,RotateBackwardButton:function(){return i.createElement(u,{direction:r.RotateDirection.Backward},(function(l){return i.createElement(z,o({},l))}))},RotateBackwardMenuItem:function(l){return i.createElement(u,{direction:r.RotateDirection.Backward},(function(e){return i.createElement(h,{direction:e.direction,onClick:function(){e.onClick(),l.onClick()}})}))},RotateForwardButton:function(){return i.createElement(u,{direction:r.RotateDirection.Forward},(function(l){return i.createElement(z,o({},l))}))},RotateForwardMenuItem:function(l){return i.createElement(u,{direction:r.RotateDirection.Forward},(function(e){return i.createElement(h,{direction:e.direction,onClick:function(){e.onClick(),l.onClick()}})}))},RotatePage:function(l){return i.createElement(n,o({},l,{store:a}))}}},rotate_min}var hasRequiredLib$6;function requireLib$6(){if(hasRequiredLib$6)return lib$4.exports;hasRequiredLib$6=1;return lib$4.exports=requireRotate_min(),lib$4.exports}var lib$3={exports:{}},scrollMode_min={},hasRequiredScrollMode_min;function requireScrollMode_min(){if(hasRequiredScrollMode_min)return scrollMode_min;hasRequiredScrollMode_min=1;var r=requireLib$h();function d(P){var R=Object.create(null);return P&&Object.keys(P).forEach((function(j){if(j!=="default"){var w=Object.getOwnPropertyDescriptor(P,j);Object.defineProperty(R,j,w.get?w:{enumerable:!0,get:function(){return P[j]}})}})),R.default=P,Object.freeze(R)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),i.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),i.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},y=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),i.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},o=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z`}))},T=function(){return i.createElement(r.Icon,{size:16},i.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},z=function(){return z=Object.assign||function(P){for(var R,j=1,w=arguments.length;j<w;j++)for(var N in R=arguments[j])Object.prototype.hasOwnProperty.call(R,N)&&(P[N]=R[N]);return P},z.apply(this,arguments)},K=function(P,R){P.get("switchScrollMode")(R);var j=P.get("viewMode");R!==r.ScrollMode.Horizontal&&R!==r.ScrollMode.Wrapped||j===r.ViewMode.SinglePage||P.get("switchViewMode")(r.ViewMode.SinglePage)},h=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z
            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z
            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z`}))},n=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},a=function(P){var R=P.children,j=P.mode,w=P.onClick,N=i.useContext(r.LocalizationContext).l10n,H="",X=i.createElement(h,null);switch(j){case r.ScrollMode.Horizontal:H=N&&N.scrollMode?N.scrollMode.horizontalScrolling:"Horizontal scrolling",X=i.createElement(o,null);break;case r.ScrollMode.Page:H=N&&N.scrollMode?N.scrollMode.pageScrolling:"Page scrolling",X=i.createElement(T,null);break;case r.ScrollMode.Wrapped:H=N&&N.scrollMode?N.scrollMode.wrappedScrolling:"Wrapped scrolling",X=i.createElement(n,null);break;case r.ScrollMode.Vertical:default:H=N&&N.scrollMode?N.scrollMode.verticalScrolling:"Vertical scrolling",X=i.createElement(h,null)}return R({icon:X,label:H,onClick:w})},u={left:0,top:8},l=function(P){var R=P.isDisabled,j=P.isSelected,w=P.mode,N=P.onClick,H="";switch(w){case r.ScrollMode.Horizontal:H="scroll-mode__horizontal-button";break;case r.ScrollMode.Page:H="scroll-mode__page-button";break;case r.ScrollMode.Wrapped:H="scroll-mode__wrapped-button";break;case r.ScrollMode.Vertical:default:H="scroll-mode__vertical-button"}return i.createElement(a,{mode:w,onClick:N},(function(X){return i.createElement(r.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:X.label,isDisabled:R,isSelected:j,testId:H,onClick:X.onClick},X.icon),content:function(){return X.label},offset:u})}))},e=function(P){var R=i.useState(P.get("scrollMode")||r.ScrollMode.Vertical),j=R[0],w=R[1],N=function(H){w(H)};return i.useEffect((function(){return P.subscribe("scrollMode",N),function(){P.unsubscribe("scrollMode",N)}}),[]),{scrollMode:j}},t=function(P){var R=i.useState(P.get("viewMode")||r.ViewMode.SinglePage),j=R[0],w=R[1],N=function(H){w(H)};return i.useEffect((function(){return P.subscribe("viewMode",N),function(){P.unsubscribe("viewMode",N)}}),[]),{viewMode:j}},c=function(P){var R=P.children,j=P.mode,w=P.store,N=t(w).viewMode,H=e(w).scrollMode===j,X=(j===r.ScrollMode.Horizontal||j===r.ScrollMode.Wrapped)&&N!==r.ViewMode.SinglePage;return(R||function(G){return i.createElement(l,{isDisabled:X,isSelected:H,mode:G.mode,onClick:G.onClick})})({isDisabled:X,isSelected:H,mode:j,onClick:function(){K(w,j)}})},s=function(P){var R=P.isDisabled,j=P.isSelected,w=P.mode,N=P.onClick,H="";switch(w){case r.ScrollMode.Horizontal:H="scroll-mode__horizontal-menu";break;case r.ScrollMode.Page:H="scroll-mode__page-menu";break;case r.ScrollMode.Wrapped:H="scroll-mode__wrapped-menu";break;case r.ScrollMode.Vertical:default:H="scroll-mode__vertical-menu"}return i.createElement(a,{mode:w,onClick:N},(function(X){return i.createElement(r.MenuItem,{checked:j,icon:X.icon,isDisabled:R,testId:H,onClick:X.onClick},X.label)}))},f=function(P,R){P.get("switchViewMode")(R);var j=P.get("scrollMode");j!==r.ScrollMode.Horizontal&&j!==r.ScrollMode.Wrapped||R===r.ViewMode.SinglePage||P.get("switchScrollMode")(r.ScrollMode.Vertical)},x=function(P){var R=P.children,j=P.mode,w=P.onClick,N=i.useContext(r.LocalizationContext).l10n,H="",X=i.createElement(T,null);switch(j){case r.ViewMode.DualPage:H=N&&N.scrollMode?N.scrollMode.dualPage:"Dual page",X=i.createElement(y,null);break;case r.ViewMode.DualPageWithCover:H=N&&N.scrollMode?N.scrollMode.dualPageCover:"Dual page with cover",X=i.createElement(m,null);break;case r.ViewMode.SinglePage:default:H=N&&N.scrollMode?N.scrollMode.singlePage:"Single page",X=i.createElement(T,null)}return R({icon:X,label:H,onClick:w})},E={left:0,top:8},g=function(P){var R=P.isDisabled,j=P.isSelected,w=P.mode,N=P.onClick,H="";switch(w){case r.ViewMode.DualPage:H="view-mode__dual-button";break;case r.ViewMode.DualPageWithCover:H="view-mode__dual-cover-button";break;case r.ViewMode.SinglePage:default:H="view-mode__single-button"}return i.createElement(x,{mode:w,onClick:N},(function(X){return i.createElement(r.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:X.label,isDisabled:R,isSelected:j,testId:H,onClick:X.onClick},X.icon),content:function(){return X.label},offset:E})}))},A=function(P){var R=P.children,j=P.mode,w=P.store,N=t(w).viewMode,H=e(w).scrollMode,X=N===j,G=(H===r.ScrollMode.Horizontal||H===r.ScrollMode.Wrapped)&&j!==r.ViewMode.SinglePage;return(R||function(U){return i.createElement(g,{isDisabled:G,isSelected:X,mode:U.mode,onClick:U.onClick})})({isDisabled:G,isSelected:X,mode:j,onClick:function(){f(w,j)}})},D=function(P){var R=P.isDisabled,j=P.isSelected,w=P.mode,N=P.onClick,H="";switch(w){case r.ViewMode.DualPage:H="view-mode__dual-menu";break;case r.ViewMode.DualPageWithCover:H="view-mode__dual-cover-menu";break;case r.ViewMode.SinglePage:default:H="view-mode__single-menu"}return i.createElement(x,{mode:w,onClick:N},(function(X){return i.createElement(r.MenuItem,{checked:j,icon:X.icon,isDisabled:R,testId:H,onClick:X.onClick},X.label)}))};return scrollMode_min.DualPageCoverViewModeIcon=m,scrollMode_min.DualPageViewModeIcon=y,scrollMode_min.HorizontalScrollingIcon=o,scrollMode_min.PageScrollingIcon=T,scrollMode_min.VerticalScrollingIcon=h,scrollMode_min.WrappedScrollingIcon=n,scrollMode_min.scrollModePlugin=function(){var P=i.useMemo((function(){return r.createStore({scrollMode:r.ScrollMode.Vertical,viewMode:r.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})}),[]),R=function(w){return i.createElement(c,z({},w,{store:P}))},j=function(w){return i.createElement(A,z({},w,{store:P}))};return{install:function(w){P.update("switchScrollMode",w.switchScrollMode),P.update("switchViewMode",w.switchViewMode)},onViewerStateChange:function(w){return P.update("scrollMode",w.scrollMode),P.update("viewMode",w.viewMode),w},switchScrollMode:function(w){K(P,w)},switchViewMode:function(w){f(P,w)},SwitchScrollMode:R,SwitchScrollModeButton:function(w){return i.createElement(R,{mode:w.mode},(function(N){return i.createElement(l,{isDisabled:N.isDisabled,isSelected:N.isSelected,mode:N.mode,onClick:function(){N.onClick()}})}))},SwitchScrollModeMenuItem:function(w){return i.createElement(R,{mode:w.mode},(function(N){return i.createElement(s,{isDisabled:N.isDisabled,isSelected:N.isSelected,mode:N.mode,onClick:function(){N.onClick(),w.onClick()}})}))},SwitchViewMode:j,SwitchViewModeButton:function(w){return i.createElement(j,{mode:w.mode},(function(N){return i.createElement(g,{isDisabled:N.isDisabled,isSelected:N.isSelected,mode:N.mode,onClick:function(){N.onClick()}})}))},SwitchViewModeMenuItem:function(w){return i.createElement(j,{mode:w.mode},(function(N){return i.createElement(D,{isDisabled:N.isDisabled,isSelected:N.isSelected,mode:N.mode,onClick:function(){N.onClick(),w.onClick()}})}))}}},scrollMode_min}var hasRequiredLib$5;function requireLib$5(){if(hasRequiredLib$5)return lib$3.exports;hasRequiredLib$5=1;return lib$3.exports=requireScrollMode_min(),lib$3.exports}var lib$2={exports:{}},search_min={},hasRequiredSearch_min;function requireSearch_min(){if(hasRequiredSearch_min)return search_min;hasRequiredSearch_min=1;var r=requireLib$h();function d(w){var N=Object.create(null);return w&&Object.keys(w).forEach((function(H){if(H!=="default"){var X=Object.getOwnPropertyDescriptor(w,H);Object.defineProperty(N,H,X.get?X:{enumerable:!0,get:function(){return w[H]}})}})),N.default=w,Object.freeze(N)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},y=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},o=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:`M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z
            M23.5,23.5
            l-5.929-5.929`}))},T=function(){return T=Object.assign||function(w){for(var N,H=1,X=arguments.length;H<X;H++)for(var G in N=arguments[H])Object.prototype.hasOwnProperty.call(N,G)&&(w[G]=N[G]);return w},T.apply(this,arguments)},z={keyword:"",regExp:new RegExp(" "),wholeWords:!1},K=function(w){return{left:"".concat(w.left,"%"),top:"".concat(w.top,"%"),height:"".concat(w.height,"%"),width:"".concat(w.width,"%")}},h=function(w){var N=w.index,H=w.area,X=w.onHighlightKeyword,G=i.useRef();return r.useIsomorphicLayoutEffect((function(){var U=G.current;X&&U&&X({highlightEle:U,keyword:H.keyword})}),[]),i.createElement("div",{className:"rpv-search__highlight","data-index":N,ref:G,style:K(H),title:H.keywordStr.trim()})},n=function(w){var N=w.parentNode;N&&N.removeChild(w)},a=function(w){var N=w.parentNode;if(N){var H=document.createRange();H.selectNodeContents(w),(function(X,G){n(X);var U=G.parentNode;U&&U.insertBefore(X,G),n(G)})(H.extractContents(),w),N.normalize()}},u=function(w,N){return w.top<N.top?-1:w.top>N.top?1:w.left<N.left?-1:w.left>N.left?1:0},l=function(w){var N=w.numPages,H=w.pageIndex,X=w.renderHighlights,G=w.store,U=w.onHighlightKeyword,k=i.useRef(),_=i.useCallback((function(ve){return i.createElement(i.Fragment,null,ve.highlightAreas.map((function(be,ke){return i.createElement(h,{index:ke,key:ke,area:be,onHighlightKeyword:U})})))}),[]),p=X||_,b=i.useState(G.get("matchPosition")),M=b[0],F=b[1],I=i.useState(G.get("keyword")||[z]),q=I[0],B=I[1],v=i.useState({pageIndex:H,scale:1,status:r.LayerRenderStatus.PreRender}),C=v[0],L=v[1],V=i.useRef(null),W=i.useRef([]),Z=i.useState([]),$=Z[0],ce=Z[1],_e=function(){return!0},de=i.useCallback((function(){return G.get("targetPageFilter")||_e}),[G.get("targetPageFilter")]),he=function(ve){var be=W.current;if(be.length===0)return[];var ke=[],Le=[].slice.call(ve.querySelectorAll(".rpv-core__text-layer-text")),Ue=be.map((function(tt){return tt.char})).join("");return q.forEach((function(tt){var Je=tt.keyword;if(Je.trim()){for(var gt,rt=tt.regExp.flags.indexOf("g")===-1?new RegExp(tt.regExp,"".concat(tt.regExp.flags,"g")):tt.regExp,ft=[];(gt=rt.exec(Ue))!==null;)ft.push({keyword:rt,startIndex:gt.index,endIndex:rt.lastIndex});ft.map((function(st){return{keyword:st.keyword,indexes:be.slice(st.startIndex,st.endIndex)}})).forEach((function(st){var jt=st.indexes.reduce((function(_t,ye){return _t[ye.spanIndex]=(_t[ye.spanIndex]||[]).concat([ye]),_t}),{});Object.values(jt).forEach((function(_t){if(_t.length!==1||_t[0].char.trim()!==""){var ye=tt.wholeWords?_t.slice(1,-1):_t,ue=(function(se,Pe,it,He,Qe){var zt=document.createRange(),Nt=He.firstChild;if(!Nt||Nt.nodeType!==Node.TEXT_NODE)return null;var Ht=Nt.textContent.length,Tt=Qe[0].charIndexInSpan,Vt=Qe.length===1?Tt:Qe[Qe.length-1].charIndexInSpan;if(Tt>Ht||Vt+1>Ht)return null;zt.setStart(Nt,Tt),zt.setEnd(Nt,Vt+1);var Bt=document.createElement("span");zt.surroundContents(Bt);var Gt=Bt.getBoundingClientRect(),St=it.getBoundingClientRect(),Kt=St.height,Yt=St.width,an=100*(Gt.left-St.left)/Yt,on=100*(Gt.top-St.top)/Kt,Jt=100*Gt.height/Kt,Dt=100*Gt.width/Yt;return a(Bt),{keyword:Pe,keywordStr:se,numPages:N,pageIndex:H,left:an,top:on,height:Jt,width:Dt,pageHeight:Kt,pageWidth:Yt}})(Je,st.keyword,ve,Le[ye[0].spanIndex],ye);ue&&ke.push(ue)}}))}))}})),ke.sort(u)},fe=function(ve){ve&&ve.length>0&&B(ve)},re=function(ve){return F(ve)},le=function(ve){if(ve.has(H)){var be=ve.get(H);be&&L({ele:be.ele,pageIndex:H,scale:be.scale,status:be.status})}},Se=function(){return q.length===0||q.length===1&&q[0].keyword.trim()===""};return i.useEffect((function(){if(!Se()&&C.status===r.LayerRenderStatus.DidRender&&!W.current.length){var ve=C.ele,be=[].slice.call(ve.querySelectorAll(".rpv-core__text-layer-text")).map((function(ke){return ke.textContent})).reduce((function(ke,Le,Ue){return ke.concat(Le.split("").map((function(tt,Je){return{char:tt,charIndexInSpan:Je,spanIndex:Ue}})))}),[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);W.current=be}}),[q,C.status]),i.useEffect((function(){if(!Se()&&C.ele&&C.status===r.LayerRenderStatus.DidRender&&de()({pageIndex:H,numPages:N})){var ve=C.ele,be=he(ve);ce(be)}}),[q,M,C.status,W.current]),i.useEffect((function(){Se()&&C.ele&&C.status===r.LayerRenderStatus.DidRender&&ce([])}),[q,C.status]),i.useEffect((function(){if($.length!==0){var ve=k.current;if(M.pageIndex===H&&ve&&C.status===r.LayerRenderStatus.DidRender){var be=ve.querySelector('.rpv-search__highlight[data-index="'.concat(M.matchIndex,'"]'));if(be){var ke=(function(Je,gt){for(var rt=Je.offsetTop,ft=Je.offsetLeft,st=Je.parentElement;st&&st!==gt;)rt+=st.offsetTop,ft+=st.offsetLeft,st=st.parentElement;return{left:ft,top:rt}})(be,ve),Le=ke.left,Ue=ke.top,tt=G.get("jumpToDestination");tt&&(tt({pageIndex:H,bottomOffset:(ve.getBoundingClientRect().height-Ue)/C.scale,leftOffset:Le/C.scale,scaleTo:C.scale}),V.current&&V.current.classList.remove("rpv-search__highlight--current"),V.current=be,be.classList.add("rpv-search__highlight--current"))}}}}),[$,M]),i.useEffect((function(){return G.subscribe("keyword",fe),G.subscribe("matchPosition",re),G.subscribe("renderStatus",le),function(){G.unsubscribe("keyword",fe),G.unsubscribe("matchPosition",re),G.unsubscribe("renderStatus",le)}}),[]),i.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(H),ref:k},p({getCssProperties:K,highlightAreas:$}))},e=function(w){var N,H=w.wholeWords?" ".concat(w.keyword," "):w.keyword,X=w.matchCase?"g":"gi";return{keyword:w.keyword,regExp:new RegExp((N=H,N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),X),wholeWords:w.wholeWords||!1}},t=function(w,N,H){return w instanceof RegExp?{keyword:w.source,regExp:w,wholeWords:H||!1}:typeof w=="string"?w===""?z:e({keyword:w,matchCase:N||!1,wholeWords:H||!1}):(N!==void 0&&(w.matchCase=N),H!==void 0&&(w.wholeWords=H),e(w))},c=function(w){var N,H=w.get("initialKeyword"),X=i.useMemo((function(){if(H&&H.length===1){var re=t(H[0]);return{matchCase:re.regExp.flags.indexOf("i")===-1,wholeWords:re.wholeWords}}return{matchCase:!1,wholeWords:!1}}),[]),G=(function(re){var le=i.useRef(re.get("doc")),Se=function(ve){le.current=ve};return i.useEffect((function(){return re.subscribe("doc",Se),function(){re.unsubscribe("doc",Se)}}),[]),le})(w),U=i.useState(H),k=U[0],_=U[1],p=i.useState([]),b=p[0],M=p[1],F=i.useState(0),I=F[0],q=F[1],B=i.useState(X.matchCase),v=B[0],C=B[1],L=i.useRef([]),V=i.useState(X.wholeWords),W=V[0],Z=V[1],$=function(){return!0},ce=i.useCallback((function(){return w.get("targetPageFilter")||$}),[w.get("targetPageFilter")]),_e=function(re){var le=b.length;if(k.length===0||le===0)return null;var Se=re===le+1?1:Math.max(1,Math.min(le,re));return q(Se),he(b[Se-1])},de=function(re){return _(re===""?[]:[re])},he=function(re){var le=w.get("jumpToPage");return le&&le(re.pageIndex),w.update("matchPosition",{matchIndex:re.matchIndex,pageIndex:re.pageIndex}),re},fe=function(re,le,Se){var ve=G.current;if(!ve)return Promise.resolve([]);var be=ve.numPages,ke=re.map((function(Le){return t(Le,le,Se)}));return w.update("keyword",ke),q(0),M([]),new Promise((function(Le,Ue){var tt=L.current.length===0?(function(){var Je=G.current;if(!Je)return Promise.resolve([]);var gt=Array(Je.numPages).fill(0).map((function(rt,ft){return r.getPage(Je,ft).then((function(st){return st.getTextContent()})).then((function(st){var jt=st.items.map((function(_t){return _t.str||""})).join("");return Promise.resolve({pageContent:jt,pageIndex:ft})}))}));return Promise.all(gt).then((function(rt){return rt.sort((function(ft,st){return ft.pageIndex-st.pageIndex})),Promise.resolve(rt.map((function(ft){return ft.pageContent})))}))})().then((function(Je){return L.current=Je,Promise.resolve(Je)})):Promise.resolve(L.current);tt.then((function(Je){var gt=[];Je.forEach((function(rt,ft){ce()({pageIndex:ft,numPages:be})&&ke.forEach((function(st){for(var jt,_t=0;(jt=st.regExp.exec(rt))!==null;)gt.push({keyword:st.regExp,matchIndex:_t,pageIndex:ft,pageText:rt,startIndex:jt.index,endIndex:st.regExp.lastIndex}),_t++}))})),M(gt),gt.length>0&&(q(1),he(gt[0])),Le(gt)}))}))};return i.useEffect((function(){L.current=[]}),[G.current]),{clearKeyword:function(){w.update("keyword",[z]),de(""),q(0),M([]),C(!1),Z(!1)},changeMatchCase:function(re){C(re),k.length>0&&fe(k,re,W)},changeWholeWords:function(re){Z(re),k.length>0&&fe(k,v,re)},currentMatch:I,jumpToMatch:_e,jumpToNextMatch:function(){return _e(I+1)},jumpToPreviousMatch:function(){return _e(I-1)},keywords:k,matchCase:v,numberOfMatches:b.length,wholeWords:W,search:function(){return fe(k,v,W)},searchFor:fe,setKeywords:_,keyword:k.length===0?"":(N=k[0],N instanceof RegExp?N.source:typeof N=="string"?N:N.keyword),setKeyword:de,setTargetPages:function(re){w.update("targetPageFilter",re)}}},s=function(w){var N=w.children,H=w.store,X=c(H),G=i.useState(!1),U=G[0],k=G[1],_=function(p){return k(!0)};return i.useEffect((function(){return H.subscribe("doc",_),function(){H.unsubscribe("doc",_)}}),[]),N(T(T({},X),{isDocumentLoaded:U}))},f=function(w){var N=w.containerRef,H=w.store,X=i.useRef(!1),G=function(){X.current=!0},U=function(){X.current=!1},k=function(_){var p=N.current;p&&(_.shiftKey||_.altKey||_.key!=="f"||(r.isMac()?_.metaKey&&!_.ctrlKey:_.ctrlKey)&&(X.current||document.activeElement&&p.contains(document.activeElement))&&(_.preventDefault(),H.update("areShortcutsPressed",!0)))};return i.useEffect((function(){var _=N.current;if(_)return document.addEventListener("keydown",k),_.addEventListener("mouseenter",G),_.addEventListener("mouseleave",U),function(){document.removeEventListener("keydown",k),_.removeEventListener("mouseenter",G),_.removeEventListener("mouseleave",U)}}),[N.current]),i.createElement(i.Fragment,null)},x={left:0,top:8},E=function(w){var N=w.store,H=w.onToggle,X=i.useContext(r.LocalizationContext).l10n,G=i.useContext(r.ThemeContext).direction,U=i.useState(!1),k=U[0],_=U[1],p=i.useState(!1),b=p[0],M=p[1],F=G===r.TextDirection.RightToLeft,I=c(N),q=I.clearKeyword,B=I.changeMatchCase,v=I.changeWholeWords,C=I.currentMatch,L=I.jumpToNextMatch,V=I.jumpToPreviousMatch,W=I.keyword,Z=I.matchCase,$=I.numberOfMatches,ce=I.wholeWords,_e=I.search,de=I.setKeyword,he=function(ve){_(!0),_e().then((function(be){_(!1),M(!0),ve&&ve()}))};i.useEffect((function(){var ve=N.get("initialKeyword");ve&&ve.length===1&&W&&he((function(){N.update("initialKeyword",[])}))}),[]);var fe=X&&X.search?X.search.enterToSearch:"Enter to search",re=X&&X.search?X.search.previousMatch:"Previous match",le=X&&X.search?X.search.nextMatch:"Next match",Se=X&&X.search?X.search.close:"Close";return i.createElement("div",{className:"rpv-search__popover"},i.createElement("div",{className:"rpv-search__popover-input-counter"},i.createElement(r.TextBox,{ariaLabel:fe,autoFocus:!0,placeholder:fe,type:"text",value:W,onChange:function(ve){M(!1),de(ve)},onKeyDown:function(ve){ve.key==="Enter"&&W&&(b?L():he())}}),i.createElement("div",{className:r.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!F,"rpv-search__popover-counter--rtl":F})},k&&i.createElement(r.Spinner,{testId:"search__popover-searching",size:"1rem"}),!k&&i.createElement("span",{"data-testid":"search__popover-num-matches"},C,"/",$))),i.createElement("label",{className:"rpv-search__popover-label"},i.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:Z,type:"checkbox",onChange:function(ve){M(!1),B(ve.target.checked)}})," ",X&&X.search?X.search.matchCase:"Match case"),i.createElement("label",{className:"rpv-search__popover-label"},i.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:ce,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(ve){M(!1),v(ve.target.checked)}})," ",X&&X.search?X.search.wholeWords:"Whole words"),i.createElement("div",{className:"rpv-search__popover-footer"},i.createElement("div",{className:"rpv-search__popover-footer-item"},i.createElement(r.Tooltip,{ariaControlsSuffix:"search-previous-match",position:F?r.Position.BottomRight:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:re,isDisabled:C<=1,onClick:V},i.createElement(y,null)),content:function(){return re},offset:x})),i.createElement("div",{className:"rpv-search__popover-footer-item"},i.createElement(r.Tooltip,{ariaControlsSuffix:"search-next-match",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:le,isDisabled:C>$-1,onClick:L},i.createElement(m,null)),content:function(){return le},offset:x})),i.createElement("div",{className:r.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!F,"rpv-search__popover-footer-button--rtl":F})},i.createElement(r.Button,{onClick:function(){H(),q()}},Se))))},g=function(w){var N=w.children,H=w.onClick,X=i.useContext(r.LocalizationContext).l10n,G=X&&X.search?X.search.search:"Search";return N({icon:i.createElement(o,null),label:G,onClick:H})},A={left:0,top:8},D=function(w){var N=w.enableShortcuts,H=w.store,X=w.onClick,G=N?r.isMac()?"Meta+F":"Ctrl+F":"",U=function(k){k&&X()};return i.useEffect((function(){return H.subscribe("areShortcutsPressed",U),function(){H.unsubscribe("areShortcutsPressed",U)}}),[]),i.createElement(g,{onClick:X},(function(k){return i.createElement(r.Tooltip,{ariaControlsSuffix:"search-popover",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:G,ariaLabel:k.label,testId:"search__popover-button",onClick:X},k.icon),content:function(){return k.label},offset:A})}))},P={left:0,top:8},R=function(w){var N=w.children,H=w.enableShortcuts,X=w.store,G=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft?r.Position.BottomRight:r.Position.BottomLeft,U=N||function(k){return i.createElement(D,T({enableShortcuts:H,store:X},k))};return i.createElement(r.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:G,target:function(k){return U({onClick:k})},content:function(k){return i.createElement(E,{store:X,onToggle:k})},offset:P,closeOnClickOutside:!1,closeOnEscape:!0})},j=function(w){return Array.isArray(w)?w.map((function(N){return t(N)})):[t(w)]};return search_min.NextIcon=m,search_min.PreviousIcon=y,search_min.SearchIcon=o,search_min.searchPlugin=function(w){var N=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},w)}),[]),H=i.useMemo((function(){return r.createStore({initialKeyword:w&&w.keyword?Array.isArray(w.keyword)?w.keyword:[w.keyword]:[],keyword:w&&w.keyword?j(w.keyword):[z],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})}),[]),X=c(H),G=X.clearKeyword,U=X.jumpToMatch,k=X.jumpToNextMatch,_=X.jumpToPreviousMatch,p=X.searchFor,b=X.setKeywords,M=X.setTargetPages,F=function(I){return i.createElement(R,T({enableShortcuts:N.enableShortcuts},I,{store:H}))};return{install:function(I){var q=w&&w.keyword?Array.isArray(w.keyword)?w.keyword:[w.keyword]:[],B=w&&w.keyword?j(w.keyword):[z];H.update("initialKeyword",q),H.update("jumpToDestination",I.jumpToDestination),H.update("jumpToPage",I.jumpToPage),H.update("keyword",B)},renderPageLayer:function(I){return i.createElement(l,{key:I.pageIndex,numPages:I.doc.numPages,pageIndex:I.pageIndex,renderHighlights:w?.renderHighlights,store:H,onHighlightKeyword:N.onHighlightKeyword})},renderViewer:function(I){var q=I.slot;return q.subSlot&&(q.subSlot.children=i.createElement(i.Fragment,null,N.enableShortcuts&&i.createElement(f,{containerRef:I.containerRef,store:H}),q.subSlot.children)),q},uninstall:function(I){var q=H.get("renderStatus");q&&q.clear()},onDocumentLoad:function(I){H.update("doc",I.doc)},onTextLayerRender:function(I){var q=H.get("renderStatus");q&&(q=q.set(I.pageIndex,I),H.update("renderStatus",q))},Search:function(I){return i.createElement(s,T({},I,{store:H}))},ShowSearchPopover:F,ShowSearchPopoverButton:function(){return i.createElement(F,null,(function(I){return i.createElement(D,T({enableShortcuts:N.enableShortcuts,store:H},I))}))},clearHighlights:function(){G()},highlight:function(I){var q=Array.isArray(I)?I:[I];return b(q),p(q)},jumpToMatch:U,jumpToNextMatch:k,jumpToPreviousMatch:_,setTargetPages:M}},search_min}var hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$2.exports;hasRequiredLib$4=1;return lib$2.exports=requireSearch_min(),lib$2.exports}var lib$1={exports:{}},theme_min={},hasRequiredTheme_min;function requireTheme_min(){if(hasRequiredTheme_min)return theme_min;hasRequiredTheme_min=1;var r=requireLib$h();function d(n){var a=Object.create(null);return n&&Object.keys(n).forEach((function(u){if(u!=="default"){var l=Object.getOwnPropertyDescriptor(n,u);Object.defineProperty(a,u,l.get?l:{enumerable:!0,get:function(){return n[u]}})}})),a.default=n,Object.freeze(a)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),i.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},y=function(){return i.createElement(r.Icon,{size:16},i.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),i.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},o=function(){return o=Object.assign||function(n){for(var a,u=1,l=arguments.length;u<l;u++)for(var e in a=arguments[u])Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e]);return n},o.apply(this,arguments)},T={left:0,top:8},z=function(n){var a=n.onClick,u=i.useContext(r.ThemeContext),l=i.useContext(r.LocalizationContext).l10n,e=u.currentTheme==="dark",t=l&&l.theme?e?l.theme.switchLightTheme:l.theme.switchDarkTheme:e?"Switch to the light theme":"Switch to the dark theme";return i.createElement(r.Tooltip,{ariaControlsSuffix:"theme-switch",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaLabel:t,testId:"theme__switch-button",onClick:a},e?i.createElement(y,null):i.createElement(m,null)),content:function(){return t},offset:T})},K=function(n){var a=n.children,u=i.useContext(r.ThemeContext);return(a||function(l){return i.createElement(z,{onClick:l.onClick})})({onClick:function(){return u.setCurrentTheme(u.currentTheme==="dark"?"light":"dark")}})},h=function(n){var a=n.onClick,u=i.useContext(r.ThemeContext),l=i.useContext(r.LocalizationContext).l10n,e=u.currentTheme==="dark",t=l&&l.theme?e?l.theme.switchLightTheme:l.theme.switchDarkTheme:e?"Switch to the light theme":"Switch to the dark theme";return i.createElement(r.MenuItem,{icon:e?i.createElement(y,null):i.createElement(m,null),testId:"theme__switch-menu",onClick:a},t)};return theme_min.DarkIcon=m,theme_min.LightIcon=y,theme_min.themePlugin=function(){var n=function(a){return i.createElement(K,o({},a))};return{SwitchTheme:n,SwitchThemeButton:function(){return i.createElement(n,null,(function(a){return i.createElement(z,o({},a))}))},SwitchThemeMenuItem:function(a){return i.createElement(n,null,(function(u){return i.createElement(h,{onClick:function(){u.onClick(),a.onClick()}})}))}}},theme_min}var hasRequiredLib$3;function requireLib$3(){if(hasRequiredLib$3)return lib$1.exports;hasRequiredLib$3=1;return lib$1.exports=requireTheme_min(),lib$1.exports}var lib={exports:{}},zoom_min={},hasRequiredZoom_min;function requireZoom_min(){if(hasRequiredZoom_min)return zoom_min;hasRequiredZoom_min=1;var r=requireLib$h();function d(w){var N=Object.create(null);return w&&Object.keys(w).forEach((function(H){if(H!=="default"){var X=Object.getOwnPropertyDescriptor(w,H);Object.defineProperty(N,H,X.get?X:{enumerable:!0,get:function(){return w[H]}})}})),N.default=w,Object.freeze(N)}var i=d(requireReact()),m=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},y=function(){return i.createElement(r.Icon,{ignoreDirection:!0,size:16},i.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},o=function(){return o=Object.assign||function(w){for(var N,H=1,X=arguments.length;H<X;H++)for(var G in N=arguments[H])Object.prototype.hasOwnProperty.call(N,G)&&(w[G]=N[G]);return w},o.apply(this,arguments)},T=function(w){var N=i.useState(w.get("scale")||0),H=N[0],X=N[1],G=function(U){X(U)};return i.useEffect((function(){return w.subscribe("scale",G),function(){w.unsubscribe("scale",G)}}),[]),{scale:H}},z=function(w){var N=w.children,H=w.store;return(N||function(X){return i.createElement(i.Fragment,null,"".concat(Math.round(100*X.scale),"%"))})({scale:T(H).scale})},K={passive:!1},h=null,n=function(w){var N=w.pagesContainerRef,H=w.store,X=r.useDebounceCallback((function(U){var k=H.get("zoom");k&&k(U)}),40),G=function(U){if(U.ctrlKey){U.preventDefault();var k=U.target.getBoundingClientRect(),_=1-U.deltaY/100,p=U.clientX-k.left,b=U.clientY-k.top,M=H.get("scale"),F=(h||(h=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(p,b).scale(_).translate(-p,-b).scale(M);X(F.a)}};return r.useIsomorphicLayoutEffect((function(){var U=N.current;if(U)return U.addEventListener("wheel",G,K),function(){U.removeEventListener("wheel",G)}}),[]),i.createElement(i.Fragment,null)},a=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],u=function(w){return a.find((function(N){return N>w}))||w},l=function(w){var N=a.findIndex((function(H){return H>=w}));return N===-1||N===0?w:a[N-1]},e=function(w){var N=w.containerRef,H=w.store,X=function(G){if(!G.shiftKey&&!G.altKey&&(r.isMac()?G.metaKey:G.ctrlKey)){var U=N.current;if(U&&document.activeElement&&U.contains(document.activeElement)){var k=H.get("zoom");if(k){var _=H.get("scale")||1,p=1;switch(G.key){case"-":p=l(_);break;case"=":p=u(_);break;case"0":p=1;break;default:p=_}p!==_&&(G.preventDefault(),k(p))}}}};return i.useEffect((function(){if(N.current)return document.addEventListener("keydown",X),function(){document.removeEventListener("keydown",X)}}),[N.current]),i.createElement(i.Fragment,null)},t=[.5,.75,1,1.25,1.5,2,3,4],c={left:0,top:8},s=function(w){var N=w.levels,H=N===void 0?t:N,X=w.scale,G=w.onZoom,U=i.useContext(r.LocalizationContext).l10n,k=i.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,_=U&&U.zoom?U.zoom.zoomDocument:"Zoom document";return i.createElement(r.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:r.Position.BottomCenter,target:function(p){return i.createElement(r.MinimalButton,{ariaLabel:_,testId:"zoom__popover-target",onClick:function(){p()}},i.createElement("span",{className:"rpv-zoom__popover-target"},i.createElement("span",{"data-testid":"zoom__popover-target-scale",className:r.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!k,"rpv-zoom__popover-target-scale--rtl":k})},Math.round(100*X),"%"),i.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(p){return i.createElement(r.Menu,null,Object.keys(r.SpecialZoomLevel).map((function(b){var M=b;return i.createElement(r.MenuItem,{key:M,onClick:function(){p(),G(M)}},(function(F){switch(F){case r.SpecialZoomLevel.ActualSize:return U&&U.zoom?U.zoom.actualSize:"Actual size";case r.SpecialZoomLevel.PageFit:return U&&U.zoom?U.zoom.pageFit:"Page fit";case r.SpecialZoomLevel.PageWidth:return U&&U.zoom?U.zoom.pageWidth:"Page width"}})(M))})),i.createElement(r.MenuDivider,null),H.map((function(b){return i.createElement(r.MenuItem,{key:b,onClick:function(){p(),G(b)}},"".concat(Math.round(100*b),"%"))})))},offset:c,closeOnClickOutside:!0,closeOnEscape:!0})},f=function(w){var N=w.children,H=w.levels,X=w.store;return(N||function(G){return i.createElement(s,{levels:H,scale:G.scale,onZoom:G.onZoom})})({scale:T(X).scale,onZoom:function(G){var U=X.get("zoom");U&&U(G)}})},x={left:0,top:8},E=function(w){var N=w.enableShortcuts,H=w.onClick,X=i.useContext(r.LocalizationContext).l10n,G=X&&X.zoom?X.zoom.zoomIn:"Zoom in",U=N?r.isMac()?"Meta+=":"Ctrl+=":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"zoom-in",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:U,ariaLabel:G,testId:"zoom__in-button",onClick:H},i.createElement(m,null)),content:function(){return G},offset:x})},g=function(w){var N=w.children,H=w.enableShortcuts,X=w.store,G=T(X).scale;return(N||E)({enableShortcuts:H,onClick:function(){var U=X.get("zoom");U&&U(u(G))}})},A=function(w){var N=w.onClick,H=i.useContext(r.LocalizationContext).l10n,X=H&&H.zoom?H.zoom.zoomIn:"Zoom in";return i.createElement(r.MenuItem,{icon:i.createElement(m,null),testId:"zoom__in-menu",onClick:N},X)},D={left:0,top:8},P=function(w){var N=w.enableShortcuts,H=w.onClick,X=i.useContext(r.LocalizationContext).l10n,G=X&&X.zoom?X.zoom.zoomOut:"Zoom out",U=N?r.isMac()?"Meta+-":"Ctrl+-":"";return i.createElement(r.Tooltip,{ariaControlsSuffix:"zoom-out",position:r.Position.BottomCenter,target:i.createElement(r.MinimalButton,{ariaKeyShortcuts:U,ariaLabel:G,testId:"zoom__out-button",onClick:H},i.createElement(y,null)),content:function(){return G},offset:D})},R=function(w){var N=w.children,H=w.enableShortcuts,X=w.store,G=T(X).scale;return(N||P)({enableShortcuts:H,onClick:function(){var U=X.get("zoom");U&&U(l(G))}})},j=function(w){var N=w.onClick,H=i.useContext(r.LocalizationContext).l10n,X=H&&H.zoom?H.zoom.zoomOut:"Zoom out";return i.createElement(r.MenuItem,{icon:i.createElement(y,null),testId:"zoom__out-menu",onClick:N},X)};return zoom_min.ZoomInIcon=m,zoom_min.ZoomOutIcon=y,zoom_min.zoomPlugin=function(w){var N=i.useMemo((function(){return Object.assign({},{enableShortcuts:!0},w)}),[]),H=i.useMemo((function(){return r.createStore({})}),[]),X=function(k){return i.createElement(g,o({enableShortcuts:N.enableShortcuts},k,{store:H}))},G=function(k){return i.createElement(R,o({enableShortcuts:N.enableShortcuts},k,{store:H}))},U=function(k){return i.createElement(f,o({},k,{store:H}))};return{renderViewer:function(k){var _=k.slot;if(!N.enableShortcuts)return _;var p={children:i.createElement(i.Fragment,null,i.createElement(e,{containerRef:k.containerRef,store:H}),i.createElement(n,{pagesContainerRef:k.pagesContainerRef,store:H}),_.children)};return o(o({},_),p)},install:function(k){H.update("zoom",k.zoom)},onViewerStateChange:function(k){return H.update("scale",k.scale),k},zoomTo:function(k){var _=H.get("zoom");_&&_(k)},CurrentScale:function(k){return i.createElement(z,o({},k,{store:H}))},ZoomIn:X,ZoomInButton:function(){return i.createElement(X,null,(function(k){return i.createElement(E,o({},k))}))},ZoomInMenuItem:function(k){return i.createElement(X,null,(function(_){return i.createElement(A,{onClick:function(){_.onClick(),k.onClick()}})}))},ZoomOut:G,ZoomOutButton:function(){return i.createElement(G,null,(function(k){return i.createElement(P,o({},k))}))},ZoomOutMenuItem:function(k){return i.createElement(G,null,(function(_){return i.createElement(j,{onClick:function(){_.onClick(),k.onClick()}})}))},Zoom:U,ZoomPopover:function(k){return i.createElement(U,null,(function(_){return i.createElement(s,o({levels:k?.levels},_))}))}}},zoom_min}var hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib.exports;hasRequiredLib$2=1;return lib.exports=requireZoom_min(),lib.exports}var hasRequiredToolbar_min;function requireToolbar_min(){if(hasRequiredToolbar_min)return toolbar_min;hasRequiredToolbar_min=1;var r=requireLib$h(),d=requireLib$d(),i=requireReact(),m=requireLib$c(),y=requireLib$b(),o=requireLib$a(),T=requireLib$9(),z=requireLib$8(),K=requireLib$7(),h=requireLib$6(),n=requireLib$5(),a=requireLib$4(),u=requireLib$3(),l=requireLib$2();function e(P){var R=Object.create(null);return P&&Object.keys(P).forEach((function(j){if(j!=="default"){var w=Object.getOwnPropertyDescriptor(P,j);Object.defineProperty(R,j,w.get?w:{enumerable:!0,get:function(){return P[j]}})}})),R.default=P,Object.freeze(R)}var t=e(i),c=function(){return t.createElement(r.Icon,{size:16},t.createElement("path",{d:`M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z
            M12,9.5
            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z
            M12,18.5c1.381,0,2.5,1.119,2.5,2.5
            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z`}))},s={left:0,top:8},f=function(P){var R=P.toolbarSlot,j=t.useContext(r.LocalizationContext).l10n,w=t.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft?r.Position.BottomLeft:r.Position.BottomRight,N=R.DownloadMenuItem,H=R.EnterFullScreenMenuItem,X=R.GoToFirstPageMenuItem,G=R.GoToLastPageMenuItem,U=R.GoToNextPageMenuItem,k=R.GoToPreviousPageMenuItem,_=R.OpenMenuItem,p=R.PrintMenuItem,b=R.RotateBackwardMenuItem,M=R.RotateForwardMenuItem,F=R.ShowPropertiesMenuItem,I=R.SwitchScrollModeMenuItem,q=R.SwitchSelectionModeMenuItem,B=R.SwitchViewModeMenuItem,v=R.SwitchThemeMenuItem;return t.createElement(r.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:w,target:function(C,L){var V=j&&j.toolbar?j.toolbar.moreActions:"More actions";return t.createElement(r.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:w,target:t.createElement(r.MinimalButton,{ariaLabel:V,isSelected:L,testId:"toolbar__more-actions-popover-target",onClick:C},t.createElement(c,null)),content:function(){return V},offset:s})},content:function(C){return t.createElement(r.Menu,null,t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(v,{onClick:C})),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(H,{onClick:C})),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(_,null)),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(p,{onClick:C})),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(N,{onClick:C})),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(r.MenuDivider,null)),t.createElement(X,{onClick:C}),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(k,{onClick:C})),t.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},t.createElement(U,{onClick:C})),t.createElement(G,{onClick:C}),t.createElement(r.MenuDivider,null),t.createElement(M,{onClick:C}),t.createElement(b,{onClick:C}),t.createElement(r.MenuDivider,null),t.createElement(q,{mode:d.SelectionMode.Text,onClick:C}),t.createElement(q,{mode:d.SelectionMode.Hand,onClick:C}),t.createElement(r.MenuDivider,null),t.createElement(I,{mode:r.ScrollMode.Page,onClick:C}),t.createElement(I,{mode:r.ScrollMode.Vertical,onClick:C}),t.createElement(I,{mode:r.ScrollMode.Horizontal,onClick:C}),t.createElement(I,{mode:r.ScrollMode.Wrapped,onClick:C}),t.createElement(r.MenuDivider,null),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement(B,{mode:r.ViewMode.SinglePage,onClick:C})),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement(B,{mode:r.ViewMode.DualPage,onClick:C})),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement(B,{mode:r.ViewMode.DualPageWithCover,onClick:C})),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement(r.MenuDivider,null)),t.createElement(F,{onClick:C}))},offset:s,closeOnClickOutside:!0,closeOnEscape:!0})},x=function(){return x=Object.assign||function(P){for(var R,j=1,w=arguments.length;j<w;j++)for(var N in R=arguments[j])Object.prototype.hasOwnProperty.call(R,N)&&(P[N]=R[N]);return P},x.apply(this,arguments)},E=function(P){return function(R){var j=t.useMemo((function(){return P(R)}),[]),w=t.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,N=j.CurrentPageInput,H=j.Download,X=j.EnterFullScreen,G=j.GoToNextPage,U=j.GoToPreviousPage,k=j.NumberOfPages,_=j.Open,p=j.Print,b=j.ShowSearchPopover,M=j.SwitchTheme,F=j.Zoom,I=j.ZoomIn,q=j.ZoomOut;return t.createElement("div",{"data-testid":"toolbar",className:r.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":w}),role:"toolbar","aria-orientation":"horizontal"},t.createElement("div",{className:"rpv-toolbar__left"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(b,null)),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(U,null))),t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(N,null),t.createElement("span",{className:"rpv-toolbar__label"},t.createElement(k,null))),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(G,null)))),t.createElement("div",{className:"rpv-toolbar__center"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(q,null)),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(F,null))),t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(I,null))),t.createElement("div",{className:"rpv-toolbar__right"},t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(M,null))),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(X,null))),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(_,null))),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(H,null))),t.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(p,null))),t.createElement("div",{className:"rpv-toolbar__item"},t.createElement(f,{toolbarSlot:j}))))}},g=function(P){var R=P.NumberOfPages;return Object.assign({},P,{NumberOfPages:function(){return t.createElement(t.Fragment,null,"/ ",t.createElement(R,null))}})},A=function(P){return E(g)(P)},D=function(P){var R=P.children,j=P.slot;return(R||A)(j)};return toolbar_min.MoreActionsPopover=f,toolbar_min.MoreIcon=c,toolbar_min.toolbarPlugin=function(P){var R=m.fullScreenPlugin(P?P.fullScreenPlugin:{}),j=y.getFilePlugin(P?P.getFilePlugin:{}),w=o.openPlugin(P?P.openPlugin:{}),N=T.pageNavigationPlugin(P?P.pageNavigationPlugin:{}),H=z.printPlugin(P?P.printPlugin:{}),X=K.propertiesPlugin(),G=h.rotatePlugin(),U=n.scrollModePlugin(),k=a.searchPlugin(P?P.searchPlugin:{}),_=d.selectionModePlugin(P?P.selectionModePlugin:{}),p=u.themePlugin(),b=l.zoomPlugin(P?P.zoomPlugin:{}),M=[R,j,w,N,H,X,G,U,k,_,p,b],F=t.useCallback((function(I){var q=R.EnterFullScreen,B=R.EnterFullScreenMenuItem,v=j.Download,C=j.DownloadMenuItem,L=w.Open,V=w.OpenMenuItem,W=N.CurrentPageInput,Z=N.CurrentPageLabel,$=N.GoToFirstPage,ce=N.GoToFirstPageMenuItem,_e=N.GoToLastPage,de=N.GoToLastPageMenuItem,he=N.GoToNextPage,fe=N.GoToNextPageMenuItem,re=N.GoToPreviousPage,le=N.GoToPreviousPageMenuItem,Se=N.NumberOfPages,ve=H.Print,be=H.PrintMenuItem,ke=X.ShowProperties,Le=X.ShowPropertiesMenuItem,Ue=G.Rotate,tt=G.RotateBackwardMenuItem,Je=G.RotateForwardMenuItem,gt=U.SwitchScrollMode,rt=U.SwitchScrollModeMenuItem,ft=U.SwitchViewMode,st=U.SwitchViewModeMenuItem,jt=k.Search,_t=k.ShowSearchPopover,ye=_.SwitchSelectionMode,ue=_.SwitchSelectionModeMenuItem,se=p.SwitchTheme,Pe=p.SwitchThemeMenuItem,it=b.CurrentScale,He=b.Zoom,Qe=b.ZoomIn,zt=b.ZoomInMenuItem,Nt=b.ZoomOut,Ht=b.ZoomOutMenuItem;return t.createElement(D,x({},I,{slot:{CurrentPageInput:W,CurrentPageLabel:Z,CurrentScale:it,Download:v,DownloadMenuItem:C,EnterFullScreen:q,EnterFullScreenMenuItem:B,GoToFirstPage:$,GoToFirstPageMenuItem:ce,GoToLastPage:_e,GoToLastPageMenuItem:de,GoToNextPage:he,GoToNextPageMenuItem:fe,GoToPreviousPage:re,GoToPreviousPageMenuItem:le,NumberOfPages:Se,Open:L,OpenMenuItem:V,Print:ve,PrintMenuItem:be,Rotate:Ue,RotateBackwardMenuItem:tt,RotateForwardMenuItem:Je,Search:jt,ShowProperties:ke,ShowPropertiesMenuItem:Le,ShowSearchPopover:_t,SwitchScrollMode:gt,SwitchScrollModeMenuItem:rt,SwitchSelectionMode:ye,SwitchSelectionModeMenuItem:ue,SwitchViewMode:ft,SwitchViewModeMenuItem:st,SwitchTheme:se,SwitchThemeMenuItem:Pe,Zoom:He,ZoomIn:Qe,ZoomInMenuItem:zt,ZoomOut:Nt,ZoomOutMenuItem:Ht}}))}),[]);return{fullScreenPluginInstance:R,getFilePluginInstance:j,openPluginInstance:w,pageNavigationPluginInstance:N,printPluginInstance:H,propertiesPluginInstance:X,rotatePluginInstance:G,scrollModePluginInstance:U,searchPluginInstance:k,selectionModePluginInstance:_,themePluginInstance:p,zoomPluginInstance:b,install:function(I){M.forEach((function(q){q.install&&q.install(I)}))},renderPageLayer:function(I){return t.createElement(t.Fragment,null,M.map((function(q,B){return q.renderPageLayer?t.createElement(t.Fragment,{key:B},q.renderPageLayer(I)):t.createElement(t.Fragment,{key:B})})))},renderViewer:function(I){var q=I.slot;return M.forEach((function(B){B.renderViewer&&(q=B.renderViewer(x(x({},I),{slot:q})))})),q},uninstall:function(I){M.forEach((function(q){q.uninstall&&q.uninstall(I)}))},onDocumentLoad:function(I){M.forEach((function(q){q.onDocumentLoad&&q.onDocumentLoad(I)}))},onAnnotationLayerRender:function(I){M.forEach((function(q){q.onAnnotationLayerRender&&q.onAnnotationLayerRender(I)}))},onTextLayerRender:function(I){M.forEach((function(q){q.onTextLayerRender&&q.onTextLayerRender(I)}))},onViewerStateChange:function(I){var q=I;return M.forEach((function(B){B.onViewerStateChange&&(q=B.onViewerStateChange(q))})),q},renderDefaultToolbar:E,Toolbar:F}},toolbar_min}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$c.exports;hasRequiredLib$1=1;return lib$c.exports=requireToolbar_min(),lib$c.exports}var hasRequiredDefaultLayout_min;function requireDefaultLayout_min(){if(hasRequiredDefaultLayout_min)return defaultLayout_min;hasRequiredDefaultLayout_min=1;var r=requireLib$h(),d=requireReact(),i=requireLib$g(),m=requireLib$f(),y=requireLib$e(),o=requireLib$1();function T(t){var c=Object.create(null);return t&&Object.keys(t).forEach((function(s){if(s!=="default"){var f=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(c,s,f.get?f:{enumerable:!0,get:function(){return t[s]}})}})),c.default=t,Object.freeze(c)}var z=T(d),K=function(){return z.createElement(r.Icon,{size:16},z.createElement("path",{d:`M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3
            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5
            c0.552,0,1,0.448,1,1L11.5,10.5z
            M14.5,6.499h6
            M14.5,10.499h6
            M3.5,14.499h17
            M3.5,18.499h16.497`}))},h=function(){return h=Object.assign||function(t){for(var c,s=1,f=arguments.length;s<f;s++)for(var x in c=arguments[s])Object.prototype.hasOwnProperty.call(c,x)&&(t[x]=c[x]);return t},h.apply(this,arguments)},n=function(){return z.createElement(r.Icon,{size:16},z.createElement("path",{d:`M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883
            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0
            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9`}))},a=function(){return z.createElement(r.Icon,{size:16},z.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},u={left:8,top:0},l={left:-8,top:0},e=function(t){var c=t.attachmentTabContent,s=t.bookmarkTabContent,f=t.store,x=t.thumbnailTabContent,E=t.tabs,g=z.useRef(),A=z.useContext(r.LocalizationContext).l10n,D=z.useState(f.get("isCurrentTabOpened")||!1),P=D[0],R=D[1],j=z.useState(Math.max(f.get("currentTab")||0,0)),w=j[0],N=j[1],H=z.useContext(r.ThemeContext).direction===r.TextDirection.RightToLeft,X=[{content:x,icon:z.createElement(a,null),title:A&&A.defaultLayout?A.defaultLayout.thumbnail:"Thumbnail"},{content:s,icon:z.createElement(K,null),title:A&&A.defaultLayout?A.defaultLayout.bookmark:"Bookmark"},{content:c,icon:z.createElement(n,null),title:A&&A.defaultLayout?A.defaultLayout.attachment:"Attachment"}],G=E?E(X):X,U=function(_){_>=0&&_<=G.length-1&&(f.update("isCurrentTabOpened",!0),N(_))},k=function(_){R(_)};return z.useEffect((function(){return f.subscribe("currentTab",U),f.subscribe("isCurrentTabOpened",k),function(){f.unsubscribe("currentTab",U),f.unsubscribe("isCurrentTabOpened",k)}}),[]),G.length===0?z.createElement(z.Fragment,null):z.createElement(z.Fragment,null,z.createElement("div",{"data-testid":"default-layout__sidebar",className:r.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":P,"rpv-default-layout__sidebar--ltr":!H,"rpv-default-layout__sidebar--rtl":H}),ref:g},z.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},z.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},G.map((function(_,p){return z.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":w===p,key:p,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(p),role:"tab"},z.createElement(r.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(p),position:H?r.Position.LeftCenter:r.Position.RightCenter,target:z.createElement(r.MinimalButton,{ariaLabel:_.title,isSelected:w===p,onClick:function(){return(function(b){if(w===b){f.update("isCurrentTabOpened",!f.get("isCurrentTabOpened"));var M=g.current;M&&M.style.width&&M.style.removeProperty("width")}else f.update("currentTab",b)})(p)}},_.icon),content:function(){return _.title},offset:H?l:u}))}))),z.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(w),id:"rpv-default-layout__sidebar-content",className:r.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":P,"rpv-default-layout__sidebar-content--ltr":!H,"rpv-default-layout__sidebar-content--rtl":H}),role:"tabpanel",tabIndex:-1},G[w].content))),P&&z.createElement(r.Splitter,{constrain:function(_){return _.firstHalfPercentage>=20&&_.firstHalfPercentage<=80}}))};return defaultLayout_min.BookmarkIcon=K,defaultLayout_min.FileIcon=n,defaultLayout_min.ThumbnailIcon=a,defaultLayout_min.defaultLayoutPlugin=function(t){var c=z.useMemo((function(){return r.createStore({isCurrentTabOpened:!1,currentTab:0})}),[]),s=i.attachmentPlugin(),f=m.bookmarkPlugin(),x=y.thumbnailPlugin(t?t.thumbnailPlugin:{}),E=o.toolbarPlugin(t?t.toolbarPlugin:{}),g=s.Attachments,A=f.Bookmarks,D=x.Thumbnails,P=E.Toolbar,R=t?t.sidebarTabs:function(w){return w},j=[s,f,x,E];return{attachmentPluginInstance:s,bookmarkPluginInstance:f,thumbnailPluginInstance:x,toolbarPluginInstance:E,activateTab:function(w){c.update("currentTab",w)},toggleTab:function(w){var N=c.get("currentTab");c.update("isCurrentTabOpened",!c.get("isCurrentTabOpened")),N!==w&&c.update("currentTab",w)},install:function(w){j.forEach((function(N){N.install&&N.install(w)}))},renderPageLayer:function(w){return z.createElement(z.Fragment,null,j.map((function(N,H){return N.renderPageLayer?z.createElement(z.Fragment,{key:H},N.renderPageLayer(w)):z.createElement(z.Fragment,{key:H},z.createElement(z.Fragment,null))})))},renderViewer:function(w){var N=w.slot;j.forEach((function(X){X.renderViewer&&(N=X.renderViewer(h(h({},w),{slot:N})))}));var H=N.subSlot&&N.subSlot.attrs?{className:N.subSlot.attrs.className,"data-testid":N.subSlot.attrs["data-testid"],ref:N.subSlot.attrs.ref,style:N.subSlot.attrs.style}:{};return N.children=z.createElement("div",{className:"rpv-default-layout__container"},z.createElement("div",{"data-testid":"default-layout__main",className:r.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":w.themeContext.direction===r.TextDirection.RightToLeft})},z.createElement(e,{attachmentTabContent:z.createElement(g,null),bookmarkTabContent:z.createElement(A,null),store:c,thumbnailTabContent:z.createElement(D,null),tabs:R}),z.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},z.createElement("div",{className:"rpv-default-layout__toolbar"},t&&t.renderToolbar?t.renderToolbar(P):z.createElement(P,null)),z.createElement("div",h({},H),N.subSlot.children))),N.children),N.subSlot.attrs={},N.subSlot.children=z.createElement(z.Fragment,null),N},uninstall:function(w){j.forEach((function(N){N.uninstall&&N.uninstall(w)}))},onDocumentLoad:function(w){j.forEach((function(N){N.onDocumentLoad&&N.onDocumentLoad(w)})),t&&t.setInitialTab&&t.setInitialTab(w.doc).then((function(N){c.update("currentTab",N),c.update("isCurrentTabOpened",!0)}))},onAnnotationLayerRender:function(w){j.forEach((function(N){N.onAnnotationLayerRender&&N.onAnnotationLayerRender(w)}))},onTextLayerRender:function(w){j.forEach((function(N){N.onTextLayerRender&&N.onTextLayerRender(w)}))},onViewerStateChange:function(w){var N=w;return j.forEach((function(H){H.onViewerStateChange&&(N=H.onViewerStateChange(N))})),N}}},defaultLayout_min.setInitialTabFromPageMode=function(t){return new Promise((function(c,s){t.getPageMode().then((function(f){if(f)switch(f){case r.PageMode.Attachments:c(2);break;case r.PageMode.Bookmarks:c(1);break;case r.PageMode.Thumbnails:c(0);break;default:c(-1)}else c(-1)}))}))},defaultLayout_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib$g.exports;hasRequiredLib=1;return lib$g.exports=requireDefaultLayout_min(),lib$g.exports}var libExports=requireLib();const worker=""+new URL("pdf.worker.min-DKQKFyKK.js",import.meta.url).href,isOfficeFile=r=>["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"].includes(r),PreviewDocument=({fileUrl:r="",fileType:d="",fileName:i="",heightClassName:m="h-[calc(100vh-16rem)]"})=>{const y=libExports.defaultLayoutPlugin(),o=()=>r?d.startsWith("image/")?jsxRuntimeExports.jsx("img",{src:r,alt:i||"Preview",className:"w-full h-full object-contain"}):d==="application/pdf"?jsxRuntimeExports.jsx("div",{className:`w-full ${m}`,children:jsxRuntimeExports.jsx(libExports$1.Worker,{workerUrl:worker,children:jsxRuntimeExports.jsx(libExports$1.Viewer,{fileUrl:r,plugins:[y]})})}):isOfficeFile(d)?jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{children:"This file type cannot be previewed locally. Please download to view it."}),jsxRuntimeExports.jsxs("a",{href:r,download:!0,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 px-4 py-2 themes-bg-brand-v5 text-white rounded-md hover:themes-bg-brand-v7 transition-colors duration-200",children:['Download "',i,'"']})]}):jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsxs("p",{children:["This file type is not supported for preview."," ",jsxRuntimeExports.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})]})}):jsxRuntimeExports.jsx("p",{children:"No document to preview"});return jsxRuntimeExports.jsx("div",{className:"w-full h-full",children:o()})};PreviewDocument.__docgenInfo={description:"",methods:[],displayName:"PreviewDocument",props:{fileUrl:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},fileType:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},fileName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},heightClassName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'h-[calc(100vh-16rem)]'",computed:!1}}}};const sampleImageUrl="https://media.istockphoto.com/id/1316134499/photo/a-concept-image-of-a-magnifying-glass-on-blue-background-with-a-word-example-zoom-inside-the.jpg?s=612x612&w=0&k=20&c=sZM5HlZvHFYnzjrhaStRpex43URlxg6wwJXff3BE9VA=",samplePdfUrl="https://pdfobject.com/pdf/sample.pdf",sampleUnsupportedUrl="https://file-examples.com/wp-content/storage/2017/02/file-sample_100kB.doc",meta={title:"Components/PreviewDocument",component:PreviewDocument,tags:["autodocs"],parameters:{layout:"fullscreen"}},ImagePreview={args:{fileUrl:sampleImageUrl,fileType:"image/png",fileName:"sample-image.png"}},PdfPreview={args:{fileUrl:samplePdfUrl,fileType:"application/pdf",fileName:"sample.pdf"}},OfficeFilePreview={args:{fileUrl:sampleUnsupportedUrl,fileType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",fileName:"sample.docx"}},UnsupportedFile={args:{fileUrl:sampleUnsupportedUrl,fileType:"application/octet-stream",fileName:"unsupported.xyz"}};ImagePreview.parameters={...ImagePreview.parameters,docs:{...ImagePreview.parameters?.docs,source:{originalSource:`{
  args: {
    fileUrl: sampleImageUrl,
    fileType: 'image/png',
    fileName: 'sample-image.png'
  }
}`,...ImagePreview.parameters?.docs?.source}}};PdfPreview.parameters={...PdfPreview.parameters,docs:{...PdfPreview.parameters?.docs,source:{originalSource:`{
  args: {
    fileUrl: samplePdfUrl,
    fileType: 'application/pdf',
    fileName: 'sample.pdf'
  }
}`,...PdfPreview.parameters?.docs?.source}}};OfficeFilePreview.parameters={...OfficeFilePreview.parameters,docs:{...OfficeFilePreview.parameters?.docs,source:{originalSource:`{
  args: {
    fileUrl: sampleUnsupportedUrl,
    // simulate blob local preview
    fileType: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    fileName: 'sample.docx'
  }
}`,...OfficeFilePreview.parameters?.docs?.source}}};UnsupportedFile.parameters={...UnsupportedFile.parameters,docs:{...UnsupportedFile.parameters?.docs,source:{originalSource:`{
  args: {
    fileUrl: sampleUnsupportedUrl,
    fileType: 'application/octet-stream',
    fileName: 'unsupported.xyz'
  }
}`,...UnsupportedFile.parameters?.docs?.source}}};const __namedExportsOrder=["ImagePreview","PdfPreview","OfficeFilePreview","UnsupportedFile"];export{ImagePreview,OfficeFilePreview,PdfPreview,UnsupportedFile,__namedExportsOrder,meta as default};
