import{j as s}from"./jsx-runtime-u17CrQMm.js";import{c as w}from"./utils-BEHD0UYf.js";import{r as u}from"./iframe-sOrGF-FJ.js";import{S as j}from"./spinner-BuW5qLLj.js";function N({data:h,columnConfig:T,checkboxConfig:b}){const[n,d]=u.useState({accessor:null,direction:null}),[c,o]=u.useState(new Set),i=u.useMemo(()=>!n.accessor||!n.direction?h:[...h].sort((r,l)=>{const e=r[n.accessor],a=l[n.accessor];if(e===a)return 0;const t=e>a?1:-1;return n.direction==="asc"?t:-t}),[h,n]),p=r=>{const l=T.find(e=>e.accessor===r);if(l?.onSort){l.onSort(r);return}d(e=>e.accessor!==r?{accessor:r,direction:"asc"}:e.direction==="asc"?{accessor:r,direction:"desc"}:{accessor:null,direction:null})},y=r=>{let l;r?l=new Set(i.map((t,m)=>m)):l=new Set,o(l);const e=Array.from(l),a=e.map(t=>i[t]);b?.onSelectionChange?.({indices:e,data:a})},g=(r,l)=>{const e=new Set(c);l?e.add(r):e.delete(r),o(e);const a=Array.from(e),t=a.map(m=>i[m]);b?.onSelectionChange?.({indices:a,data:t})},S=i.length>0&&c.size===i.length,x=c.size>0&&c.size<i.length,f=u.useRef(null);return u.useEffect(()=>{f.current&&(f.current.indeterminate=x)},[x]),{sortConfig:n,setSortConfig:d,selectedRows:c,setSelectedRows:o,sortedData:i,isAllSelected:S,isSomeSelected:x,selectAllCheckboxRef:f,handleSort:p,handleSelectAll:y,handleRowCheckbox:g,getCellValue:(r,l,e)=>{const a=r[l.accessor];return l.columnText?typeof l.columnText=="function"?l.columnText({data:r,index:e}):l.columnText:a}}}function v({data:h,isLoading:T=!1,className:b,rowConfig:n,columnConfig:d,maxHeight:c="500px",checkboxConfig:o}){const{sortConfig:i,selectedRows:p,sortedData:y,isAllSelected:g,isSomeSelected:S,selectAllCheckboxRef:x,handleSort:f,handleSelectAll:C,handleRowCheckbox:r,getCellValue:l}=N({data:h,columnConfig:d,checkboxConfig:o});return s.jsxs("div",{"data-slot":"table-container",className:w("relative w-full border border-neutral-200 rounded-lg overflow-hidden flex flex-col",b),children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("table",{className:"w-full caption-bottom text-sm border-collapse",style:{tableLayout:"fixed"},children:s.jsx("thead",{className:"bg-neutral-50",style:{boxShadow:"0 1px 0 0 rgba(229, 231, 235, 1)"},children:s.jsxs("tr",{children:[o?.enabled&&s.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-neutral-700 whitespace-nowrap w-12",style:{width:"48px"},children:s.jsx("input",{ref:x,type:"checkbox",checked:g,onChange:e=>C(e.target.checked),className:"w-4 h-4 cursor-pointer",title:g||S?"Deselect all":"Select all"})}),d.map((e,a)=>s.jsx("th",{className:w("h-12 px-4 text-left align-middle font-medium text-neutral-700 whitespace-nowrap",e.headerClassName,e.sort&&"cursor-pointer select-none hover:bg-neutral-100 transition-colors",e.flexible&&"flex-1"),style:{width:e.flexible?"auto":e.columnWidth,...e.flexible&&{flex:1,minWidth:"100px"}},onClick:()=>e.sort&&f(e.accessor),title:e.headerTooltip,children:s.jsxs("div",{className:"flex items-center gap-2",children:[typeof e.headerText=="function"?e.headerText():e.headerText||e.accessor,e.sort&&s.jsx("span",{className:"text-black flex-shrink-0",children:i.accessor===e.accessor?i.direction==="asc"?s.jsx("i",{className:"ti ti-chevron-up"}):s.jsx("i",{className:"ti ti-chevron-down"}):s.jsx(s.Fragment,{})})]})},a))]})})})}),T?s.jsxs("div",{className:"flex-1 min-h-0 flex flex-col items-center justify-center p-8 gap-3 text-neutral-700",children:[s.jsx(j,{size:"2"}),s.jsx("div",{className:"text-muted-foreground text-neutral-700",children:"Please Wait"})]}):s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",style:{maxHeight:c},children:s.jsx("table",{className:"w-full caption-bottom text-sm border-collapse",style:{tableLayout:"fixed"},children:s.jsx("tbody",{children:y.map((e,a)=>s.jsxs("tr",{className:w("h-[48px] border-b border-neutral-200 transition-colors",p.has(a)&&o?.enabled?"bg-blue-50":"hover:bg-neutral-50",n?.rowOverlayClassName,n?.onClick&&"cursor-pointer"),onClick:()=>n?.onClick?.(e,a),children:[o?.enabled&&s.jsx("td",{className:"px-4 py-2 align-middle w-12",style:{width:"48px"},children:s.jsx("input",{type:"checkbox",checked:p.has(a),onChange:t=>r(a,t.target.checked),className:"w-4 h-4 cursor-pointer",onClick:t=>t.stopPropagation(),title:p.has(a)?"Deselect row":"Select row"})}),d.map((t,m)=>s.jsx("td",{className:w("px-4 py-2 align-middle text-neutral-900",t.columnEllipsis&&"overflow-hidden text-ellipsis whitespace-nowrap",!t.columnEllipsis&&"whitespace-nowrap",t.columnClassName,t.flexible&&"flex-1"),style:{width:t.flexible?"auto":t.columnWidth,height:t.columnHeight,maxWidth:t.flexible?"none":t.columnWidth,...t.flexible&&{flex:1,minWidth:"10px"}},title:t.columnTooltip,children:l(e,t,a)},m))]},a))})})})]})}v.__docgenInfo={description:"",methods:[],displayName:"Table",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},rowConfig:{required:!1,tsType:{name:"ITableRowConfig",elements:[{name:"T"}],raw:"ITableRowConfig<T>"},description:""},columnConfig:{required:!0,tsType:{name:"Array",elements:[{name:"ITableColumnConfig",elements:[{name:"T"}],raw:"ITableColumnConfig<T>"}],raw:"ITableColumnConfig<T>[]"},description:""},maxHeight:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"500px"',computed:!1}},checkboxConfig:{required:!1,tsType:{name:"ITableCheckboxConfig",elements:[{name:"T"}],raw:"ITableCheckboxConfig<T>"},description:""}}};export{v as T};
